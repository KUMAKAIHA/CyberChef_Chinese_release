/*! For license information please see Bletchley.js.LICENSE.txt */
(()=>{var e={67526:(e,t)=>{"use strict";t.byteLength=function(e){var t=u(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,o=u(e),a=o[0],s=o[1],l=new i(function(e,t,r){return 3*(t+r)/4-r}(0,a,s)),c=0,f=s>0?a-4:a;for(r=0;r<f;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],l[c++]=t>>16&255,l[c++]=t>>8&255,l[c++]=255&t;return 2===s&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,l[c++]=255&t),1===s&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,l[c++]=t>>8&255,l[c++]=255&t),l},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],a=16383,u=0,l=n-i;u<l;u+=a)o.push(s(e,u,u+a>l?l:u+a));return 1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),o.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0;a<64;++a)r[a]=o[a],n[o.charCodeAt(a)]=a;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function s(e,t,n){for(var i,o,a=[],u=t;u<n;u+=3)i=(e[u]<<16&16711680)+(e[u+1]<<8&65280)+(255&e[u+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},48287:(e,t,r)=>{"use strict";const n=r(67526),i=r(251),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=s,t.INSPECT_MAX_BYTES=50;const a=2147483647;function u(e){if(e>a)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,s.prototype),t}function s(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return f(e)}return l(e,t,r)}function l(e,t,r){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!s.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|m(e,t);let n=u(r);const i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(W(e,Uint8Array)){const t=new Uint8Array(e);return p(t.buffer,t.byteOffset,t.byteLength)}return h(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(W(e,ArrayBuffer)||e&&W(e.buffer,ArrayBuffer))return p(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(W(e,SharedArrayBuffer)||e&&W(e.buffer,SharedArrayBuffer)))return p(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return s.from(n,t,r);const i=function(e){if(s.isBuffer(e)){const t=0|v(e.length),r=u(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||J(e.length)?u(0):h(e):"Buffer"===e.type&&Array.isArray(e.data)?h(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return s.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function f(e){return c(e),u(e<0?0:0|v(e))}function h(e){const t=e.length<0?0:0|v(e.length),r=u(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function p(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,s.prototype),n}function v(e){if(e>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|e}function m(e,t){if(s.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||W(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return H(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return V(e).length;default:if(i)return n?-1:H(e).length;t=(""+t).toLowerCase(),i=!0}}function y(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return T(this,t,r);case"utf8":case"utf-8":return S(this,t,r);case"ascii":return I(this,t,r);case"latin1":case"binary":return C(this,t,r);case"base64":return F(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function d(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function g(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),J(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=s.from(t,n)),s.isBuffer(t))return 0===t.length?-1:b(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):b(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function b(e,t,r,n,i){let o,a=1,u=e.length,s=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,u/=2,s/=2,r/=2}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){let n=-1;for(o=r;o<u;o++)if(l(e,o)===l(t,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===s)return n*a}else-1!==n&&(o-=o-n),n=-1}else for(r+s>u&&(r=u-s),o=r;o>=0;o--){let r=!0;for(let n=0;n<s;n++)if(l(e,o+n)!==l(t,n)){r=!1;break}if(r)return o}return-1}function w(e,t,r,n){r=Number(r)||0;const i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;const o=t.length;let a;for(n>o/2&&(n=o/2),a=0;a<n;++a){const n=parseInt(t.substr(2*a,2),16);if(J(n))return a;e[r+a]=n}return a}function x(e,t,r,n){return Y(H(t,e.length-r),e,r,n)}function B(e,t,r,n){return Y(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function A(e,t,r,n){return Y(V(t),e,r,n)}function E(e,t,r,n){return Y(function(e,t){let r,n,i;const o=[];for(let a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function F(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function S(e,t,r){r=Math.min(e.length,r);const n=[];let i=t;for(;i<r;){const t=e[i];let o=null,a=t>239?4:t>223?3:t>191?2:1;if(i+a<=r){let r,n,u,s;switch(a){case 1:t<128&&(o=t);break;case 2:r=e[i+1],128==(192&r)&&(s=(31&t)<<6|63&r,s>127&&(o=s));break;case 3:r=e[i+1],n=e[i+2],128==(192&r)&&128==(192&n)&&(s=(15&t)<<12|(63&r)<<6|63&n,s>2047&&(s<55296||s>57343)&&(o=s));break;case 4:r=e[i+1],n=e[i+2],u=e[i+3],128==(192&r)&&128==(192&n)&&128==(192&u)&&(s=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&u,s>65535&&s<1114112&&(o=s))}}null===o?(o=65533,a=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=a}return function(e){const t=e.length;if(t<=k)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=k));return r}(n)}s.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),s.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),s.poolSize=8192,s.from=function(e,t,r){return l(e,t,r)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array),s.alloc=function(e,t,r){return function(e,t,r){return c(e),e<=0?u(e):void 0!==t?"string"==typeof r?u(e).fill(t,r):u(e).fill(t):u(e)}(e,t,r)},s.allocUnsafe=function(e){return f(e)},s.allocUnsafeSlow=function(e){return f(e)},s.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==s.prototype},s.compare=function(e,t){if(W(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),W(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const n=s.allocUnsafe(t);let i=0;for(r=0;r<e.length;++r){let t=e[r];if(W(t,Uint8Array))i+t.length>n.length?(s.isBuffer(t)||(t=s.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else{if(!s.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,i)}i+=t.length}return n},s.byteLength=m,s.prototype._isBuffer=!0,s.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)d(this,t,t+1);return this},s.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)d(this,t,t+3),d(this,t+1,t+2);return this},s.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)d(this,t,t+7),d(this,t+1,t+6),d(this,t+2,t+5),d(this,t+3,t+4);return this},s.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?S(this,0,e):y.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){let e="";const r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},o&&(s.prototype[o]=s.prototype.inspect),s.prototype.compare=function(e,t,r,n,i){if(W(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;let o=(i>>>=0)-(n>>>=0),a=(r>>>=0)-(t>>>=0);const u=Math.min(o,a),l=this.slice(n,i),c=e.slice(t,r);for(let e=0;e<u;++e)if(l[e]!==c[e]){o=l[e],a=c[e];break}return o<a?-1:a<o?1:0},s.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},s.prototype.indexOf=function(e,t,r){return g(this,e,t,r,!0)},s.prototype.lastIndexOf=function(e,t,r){return g(this,e,t,r,!1)},s.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let o=!1;for(;;)switch(n){case"hex":return w(this,e,t,r);case"utf8":case"utf-8":return x(this,e,t,r);case"ascii":case"latin1":case"binary":return B(this,e,t,r);case"base64":return A(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const k=4096;function I(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function C(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function T(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=t;n<r;++n)i+=z[e[n]];return i}function R(e,t,r){const n=e.slice(t,r);let i="";for(let e=0;e<n.length-1;e+=2)i+=String.fromCharCode(n[e]+256*n[e+1]);return i}function O(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function L(e,t,r,n,i,o){if(!s.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function M(e,t,r,n,i){j(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,a>>=8,e[r++]=a,r}function U(e,t,r,n,i){j(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r+7]=o,o>>=8,e[r+6]=o,o>>=8,e[r+5]=o,o>>=8,e[r+4]=o;let a=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=a,a>>=8,e[r+2]=a,a>>=8,e[r+1]=a,a>>=8,e[r]=a,r+8}function P(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function D(e,t,r,n,o){return t=+t,r>>>=0,o||P(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function N(e,t,r,n,o){return t=+t,r>>>=0,o||P(e,0,r,8),i.write(e,t,r,n,52,8),r+8}s.prototype.slice=function(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,s.prototype),n},s.prototype.readUintLE=s.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||O(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return n},s.prototype.readUintBE=s.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||O(e,t,this.length);let n=this[e+--t],i=1;for(;t>0&&(i*=256);)n+=this[e+--t]*i;return n},s.prototype.readUint8=s.prototype.readUInt8=function(e,t){return e>>>=0,t||O(e,1,this.length),this[e]},s.prototype.readUint16LE=s.prototype.readUInt16LE=function(e,t){return e>>>=0,t||O(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUint16BE=s.prototype.readUInt16BE=function(e,t){return e>>>=0,t||O(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUint32LE=s.prototype.readUInt32LE=function(e,t){return e>>>=0,t||O(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUint32BE=s.prototype.readUInt32BE=function(e,t){return e>>>=0,t||O(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readBigUInt64LE=q((function(e){G(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||Z(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),s.prototype.readBigUInt64BE=q((function(e){G(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||Z(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),s.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||O(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},s.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||O(e,t,this.length);let n=t,i=1,o=this[e+--n];for(;n>0&&(i*=256);)o+=this[e+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},s.prototype.readInt8=function(e,t){return e>>>=0,t||O(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},s.prototype.readInt16LE=function(e,t){e>>>=0,t||O(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},s.prototype.readInt16BE=function(e,t){e>>>=0,t||O(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},s.prototype.readInt32LE=function(e,t){return e>>>=0,t||O(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return e>>>=0,t||O(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readBigInt64LE=q((function(e){G(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||Z(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),s.prototype.readBigInt64BE=q((function(e){G(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||Z(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),s.prototype.readFloatLE=function(e,t){return e>>>=0,t||O(e,4,this.length),i.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return e>>>=0,t||O(e,4,this.length),i.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return e>>>=0,t||O(e,8,this.length),i.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return e>>>=0,t||O(e,8,this.length),i.read(this,e,!1,52,8)},s.prototype.writeUintLE=s.prototype.writeUIntLE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||L(this,e,t,r,Math.pow(2,8*r)-1,0);let i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},s.prototype.writeUintBE=s.prototype.writeUIntBE=function(e,t,r,n){e=+e,t>>>=0,r>>>=0,n||L(this,e,t,r,Math.pow(2,8*r)-1,0);let i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},s.prototype.writeUint8=s.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||L(this,e,t,1,255,0),this[t]=255&e,t+1},s.prototype.writeUint16LE=s.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||L(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeUint16BE=s.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||L(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeUint32LE=s.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||L(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},s.prototype.writeUint32BE=s.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||L(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeBigUInt64LE=q((function(e,t=0){return M(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),s.prototype.writeBigUInt64BE=q((function(e,t=0){return U(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),s.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);L(this,e,t,r,n-1,-n)}let i=0,o=1,a=0;for(this[t]=255&e;++i<r&&(o*=256);)e<0&&0===a&&0!==this[t+i-1]&&(a=1),this[t+i]=(e/o|0)-a&255;return t+r},s.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);L(this,e,t,r,n-1,-n)}let i=r-1,o=1,a=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===a&&0!==this[t+i+1]&&(a=1),this[t+i]=(e/o|0)-a&255;return t+r},s.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||L(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||L(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||L(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||L(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},s.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||L(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeBigInt64LE=q((function(e,t=0){return M(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),s.prototype.writeBigInt64BE=q((function(e,t=0){return U(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),s.prototype.writeFloatLE=function(e,t,r){return D(this,e,t,!0,r)},s.prototype.writeFloatBE=function(e,t,r){return D(this,e,t,!1,r)},s.prototype.writeDoubleLE=function(e,t,r){return N(this,e,t,!0,r)},s.prototype.writeDoubleBE=function(e,t,r){return N(this,e,t,!1,r)},s.prototype.copy=function(e,t,r,n){if(!s.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);const i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},s.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!s.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{const o=s.isBuffer(e)?e:s.from(e,n),a=o.length;if(0===a)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=o[i%a]}return this};const _={};function $(e,t,r){_[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function X(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function j(e,t,r,n,i,o){if(e>r||e<t){const n="bigint"==typeof t?"n":"";let i;throw i=o>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(o+1)}${n}`:`>= -(2${n} ** ${8*(o+1)-1}${n}) and < 2 ** ${8*(o+1)-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new _.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,r){G(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||Z(t,e.length-(r+1))}(n,i,o)}function G(e,t){if("number"!=typeof e)throw new _.ERR_INVALID_ARG_TYPE(t,"number",e)}function Z(e,t,r){if(Math.floor(e)!==e)throw G(e,r),new _.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new _.ERR_BUFFER_OUT_OF_BOUNDS;throw new _.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}$("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),$("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),$("ERR_OUT_OF_RANGE",(function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=X(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=X(i)),i+="n"),n+=` It must be ${t}. Received ${i}`,n}),RangeError);const Q=/[^+/0-9A-Za-z-_]/g;function H(e,t){let r;t=t||1/0;const n=e.length;let i=null;const o=[];for(let a=0;a<n;++a){if(r=e.charCodeAt(a),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function V(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(Q,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function Y(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function W(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function J(e){return e!=e}const z=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function q(e){return"undefined"==typeof BigInt?K:e}function K(){throw new Error("BigInt not supported")}},251:(e,t)=>{t.read=function(e,t,r,n,i){var o,a,u=8*i-n-1,s=(1<<u)-1,l=s>>1,c=-7,f=r?i-1:0,h=r?-1:1,p=e[t+f];for(f+=h,o=p&(1<<-c)-1,p>>=-c,c+=u;c>0;o=256*o+e[t+f],f+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;c>0;a=256*a+e[t+f],f+=h,c-=8);if(0===o)o=1-l;else{if(o===s)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),o-=l}return(p?-1:1)*a*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var a,u,s,l=8*o-i-1,c=(1<<l)-1,f=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,v=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(s=Math.pow(2,-a))<1&&(a--,s*=2),(t+=a+f>=1?h/s:h*Math.pow(2,1-f))*s>=2&&(a++,s/=2),a+f>=c?(u=0,a=c):a+f>=1?(u=(t*s-1)*Math.pow(2,i),a+=f):(u=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[r+p]=255&u,p+=v,u/=256,i-=8);for(a=a<<i|u,l+=i;l>0;e[r+p]=255&a,p+=v,a/=256,l-=8);e[r+p-v]|=128*m}},73065:function(e,t,r){var n,i;!function(){"use strict";n=function(){var e=function(){},t="undefined",r=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),n=["trace","debug","info","warn","error"],i={},o=null;function a(e,t){var r=e[t];if("function"==typeof r.bind)return r.bind(e);try{return Function.prototype.bind.call(r,e)}catch(t){return function(){return Function.prototype.apply.apply(r,[e,arguments])}}}function u(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function s(){for(var r=this.getLevel(),i=0;i<n.length;i++){var o=n[i];this[o]=i<r?e:this.methodFactory(o,r,this.name)}if(this.log=this.debug,typeof console===t&&r<this.levels.SILENT)return"No console available for logging"}function l(e){return function(){typeof console!==t&&(s.call(this),this[e].apply(this,arguments))}}function c(n,i,o){return function(n){return"debug"===n&&(n="log"),typeof console!==t&&("trace"===n&&r?u:void 0!==console[n]?a(console,n):void 0!==console.log?a(console,"log"):e)}(n)||l.apply(this,arguments)}function f(e,r){var a,u,l,f=this,h="loglevel";function p(){var e;if(typeof window!==t&&h){try{e=window.localStorage[h]}catch(e){}if(typeof e===t)try{var r=window.document.cookie,n=encodeURIComponent(h),i=r.indexOf(n+"=");-1!==i&&(e=/^([^;]+)/.exec(r.slice(i+n.length+1))[1])}catch(e){}return void 0===f.levels[e]&&(e=void 0),e}}function v(e){var t=e;if("string"==typeof t&&void 0!==f.levels[t.toUpperCase()]&&(t=f.levels[t.toUpperCase()]),"number"==typeof t&&t>=0&&t<=f.levels.SILENT)return t;throw new TypeError("log.setLevel() called with invalid level: "+e)}"string"==typeof e?h+=":"+e:"symbol"==typeof e&&(h=void 0),f.name=e,f.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},f.methodFactory=r||c,f.getLevel=function(){return null!=l?l:null!=u?u:a},f.setLevel=function(e,r){return l=v(e),!1!==r&&function(e){var r=(n[e]||"silent").toUpperCase();if(typeof window!==t&&h){try{return void(window.localStorage[h]=r)}catch(e){}try{window.document.cookie=encodeURIComponent(h)+"="+r+";"}catch(e){}}}(l),s.call(f)},f.setDefaultLevel=function(e){u=v(e),p()||f.setLevel(e,!1)},f.resetLevel=function(){l=null,function(){if(typeof window!==t&&h){try{window.localStorage.removeItem(h)}catch(e){}try{window.document.cookie=encodeURIComponent(h)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}(),s.call(f)},f.enableAll=function(e){f.setLevel(f.levels.TRACE,e)},f.disableAll=function(e){f.setLevel(f.levels.SILENT,e)},f.rebuild=function(){if(o!==f&&(a=v(o.getLevel())),s.call(f),o===f)for(var e in i)i[e].rebuild()},a=v(o?o.getLevel():"WARN");var m=p();null!=m&&(l=v(m)),s.call(f)}(o=new f).getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=i[e];return t||(t=i[e]=new f(e,o.methodFactory)),t};var h=typeof window!==t?window.log:void 0;return o.noConflict=function(){return typeof window!==t&&window.log===o&&(window.log=h),o},o.getLoggers=function(){return i},o.default=o,o},void 0===(i=n.call(t,r,t,e))||(e.exports=i)}()},65606:e=>{var t,r,n=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var u,s=[],l=!1,c=-1;function f(){l&&u&&(l=!1,u.length?s=u.concat(s):c=-1,s.length&&h())}function h(){if(!l){var e=a(f);l=!0;for(var t=s.length;t;){for(u=s,s=[];++c<t;)u&&u[c].run();c=-1,t=s.length}u=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{return r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function v(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];s.push(new p(e,t)),1!==s.length||l||a(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=v,n.addListener=v,n.once=v,n.off=v,n.removeListener=v,n.removeAllListeners=v,n.emit=v,n.prependListener=v,n.prependOnceListener=v,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},90031:(e,t)=>{!function(e){var t,r,n,i=String.fromCharCode;function o(e){for(var t,r,n=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(r=e.charCodeAt(i++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--):n.push(t);return n}function a(e){if(e>=55296&&e<=57343)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value")}function u(e,t){return i(e>>t&63|128)}function s(e){if(!(4294967168&e))return i(e);var t="";return 4294965248&e?4294901760&e?4292870144&e||(t=i(e>>18&7|240),t+=u(e,12),t+=u(e,6)):(a(e),t=i(e>>12&15|224),t+=u(e,6)):t=i(e>>6&31|192),t+i(63&e|128)}function l(){if(n>=r)throw Error("Invalid byte index");var e=255&t[n];if(n++,128==(192&e))return 63&e;throw Error("Invalid continuation byte")}function c(){var e,i;if(n>r)throw Error("Invalid byte index");if(n==r)return!1;if(e=255&t[n],n++,!(128&e))return e;if(192==(224&e)){if((i=(31&e)<<6|l())>=128)return i;throw Error("Invalid continuation byte")}if(224==(240&e)){if((i=(15&e)<<12|l()<<6|l())>=2048)return a(i),i;throw Error("Invalid continuation byte")}if(240==(248&e)&&(i=(7&e)<<18|l()<<12|l()<<6|l())>=65536&&i<=1114111)return i;throw Error("Invalid UTF-8 detected")}e.version="3.0.0",e.encode=function(e){for(var t=o(e),r=t.length,n=-1,i="";++n<r;)i+=s(t[n]);return i},e.decode=function(e){t=o(e),r=t.length,n=0;for(var a,u=[];!1!==(a=c());)u.push(a);return function(e){for(var t,r=e.length,n=-1,o="";++n<r;)(t=e[n])>65535&&(o+=i((t-=65536)>>>10&1023|55296),t=56320|1023&t),o+=i(t);return o}(u)}}(t)},4633:(e,t,r)=>{var n=r(73738).default;function i(){"use strict";e.exports=i=function(){return r},e.exports.__esModule=!0,e.exports.default=e.exports;var t,r={},o=Object.prototype,a=o.hasOwnProperty,u=Object.defineProperty||function(e,t,r){e[t]=r.value},s="function"==typeof Symbol?Symbol:{},l=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",f=s.toStringTag||"@@toStringTag";function h(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(t){h=function(e,t,r){return e[t]=r}}function p(e,t,r,n){var i=t&&t.prototype instanceof w?t:w,o=Object.create(i.prototype),a=new L(n||[]);return u(o,"_invoke",{value:C(e,r,a)}),o}function v(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}r.wrap=p;var m="suspendedStart",y="suspendedYield",d="executing",g="completed",b={};function w(){}function x(){}function B(){}var A={};h(A,l,(function(){return this}));var E=Object.getPrototypeOf,F=E&&E(E(M([])));F&&F!==o&&a.call(F,l)&&(A=F);var S=B.prototype=w.prototype=Object.create(A);function k(e){["next","throw","return"].forEach((function(t){h(e,t,(function(e){return this._invoke(t,e)}))}))}function I(e,t){function r(i,o,u,s){var l=v(e[i],e,o);if("throw"!==l.type){var c=l.arg,f=c.value;return f&&"object"==n(f)&&a.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,u,s)}),(function(e){r("throw",e,u,s)})):t.resolve(f).then((function(e){c.value=e,u(c)}),(function(e){return r("throw",e,u,s)}))}s(l.arg)}var i;u(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(o,o):o()}})}function C(e,r,n){var i=m;return function(o,a){if(i===d)throw Error("Generator is already running");if(i===g){if("throw"===o)throw a;return{value:t,done:!0}}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=T(u,n);if(s){if(s===b)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===m)throw i=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=d;var l=v(e,r,n);if("normal"===l.type){if(i=n.done?g:y,l.arg===b)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i=g,n.method="throw",n.arg=l.arg)}}}function T(e,r){var n=r.method,i=e.iterator[n];if(i===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var o=v(i,e.iterator,r.arg);if("throw"===o.type)return r.method="throw",r.arg=o.arg,r.delegate=null,b;var a=o.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function R(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function L(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(R,this),this.reset(!0)}function M(e){if(e||""===e){var r=e[l];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,o=function r(){for(;++i<e.length;)if(a.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return o.next=o}}throw new TypeError(n(e)+" is not iterable")}return x.prototype=B,u(S,"constructor",{value:B,configurable:!0}),u(B,"constructor",{value:x,configurable:!0}),x.displayName=h(B,f,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===x||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,B):(e.__proto__=B,h(e,f,"GeneratorFunction")),e.prototype=Object.create(S),e},r.awrap=function(e){return{__await:e}},k(I.prototype),h(I.prototype,c,(function(){return this})),r.AsyncIterator=I,r.async=function(e,t,n,i,o){void 0===o&&(o=Promise);var a=new I(p(e,t,n,i),o);return r.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},k(S),h(S,f,"Generator"),h(S,l,(function(){return this})),h(S,"toString",(function(){return"[object Generator]"})),r.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},r.values=M,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(O),!e)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(n,i){return u.type="throw",u.arg=e,r.next=n,i&&(r.method="next",r.arg=t),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],u=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var s=a.call(o,"catchLoc"),l=a.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),b},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),b}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;O(r)}return i}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:M(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},r}e.exports=i,e.exports.__esModule=!0,e.exports.default=e.exports},73738:e=>{function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},54756:(e,t,r)=>{var n=r(4633)();e.exports=n;try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function t(t,r){if(t){if("string"==typeof t)return e(t,r);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(t,r):void 0}}function n(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,a,u=[],s=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=o.call(r)).done)&&(u.push(n.value),u.length!==t);s=!0);}catch(e){l=!0,i=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(l)throw i}}return u}}(e,r)||t(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e){var t=function(e){if("object"!=o(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:t+""}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function s(e,t,r){return t&&u(e.prototype,t),r&&u(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){if(t&&("object"==o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return l(e)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}function v(e,t,r,n,i,o,a){try{var u=e[o](a),s=u.value}catch(e){return void r(e)}u.done?t(s):Promise.resolve(s).then(n,i)}function m(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function a(e){v(o,n,i,a,u,"next",e)}function u(e){v(o,n,i,a,u,"throw",e)}a(void 0)}))}}var y=r(54756),d=r.n(y);function g(r){return function(t){if(Array.isArray(t))return e(t)}(r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||t(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var b=r(73065),w=r.n(b),x=r(90031),B=r.n(x);function A(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(A=function(){return!!e})()}const E=function(e){function t(){var e,r,n,o;i(this,t);for(var a=arguments.length,u=new Array(a),s=0;s<a;s++)u[s]=arguments[s];return r=this,n=t,o=[].concat(u),n=f(n),(e=c(r,A()?Reflect.construct(n,o||[],f(r).constructor):n.apply(r,o))).type="OperationError",Error.captureStackTrace&&Error.captureStackTrace(e,t),e}return p(t,e),s(t)}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Error));function F(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"A-Za-z0-9+/=";if(!e)return"";if("string"==typeof e&&(e=P.strToArrayBuffer(e)),e instanceof ArrayBuffer&&(e=new Uint8Array(e)),64!==(t=P.expandAlphRange(t).join("")).length&&65!==t.length)throw new E(`Invalid Base64 alphabet length (${t.length}): ${t}`);for(var r,n,i,o,a,u,s,l="",c=0;c<e.length;)o=(r=e[c++])>>2,a=(3&r)<<4|(n=e[c++])>>4,u=(15&n)<<2|(i=e[c++])>>6,s=63&i,isNaN(n)?u=s=64:isNaN(i)&&(s=64),l+=t.charAt(o)+t.charAt(a)+t.charAt(u)+t.charAt(s);return l}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"A-Za-z0-9+/=",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"string",n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!e)return"string"===r?"":[];if(t=t||"A-Za-z0-9+/=",64!==(t=P.expandAlphRange(t).join("")).length&&65!==t.length)throw new E(`Error: Base64 alphabet should be 64 characters long, or 65 with a padding character. Found ${t.length}: ${t}`);if(n){var o=new RegExp("[^"+t.replace(/[[\]\\\-^$]/g,"\\$&")+"]","g");e=e.replace(o,"")}if(i){if(e.length%4==1)throw new E(`Error: Invalid Base64 input length (${e.length}). Cannot be 4n+1, even without padding chars.`);if(65===t.length){var a=t.charAt(64),u=e.indexOf(a);if(u>=0){if(u<e.length-2||e.charAt(e.length-1)!==a)throw new E(`Error: Base64 padding character (${a}) not used in the correct place.`);if(e.length%4!=0)throw new E("Error: Base64 not padded to a multiple of 4.")}}}for(var s,l,c,f,h,p,v,m=[],y=0;y<e.length;){if(f=t.indexOf(e.charAt(y++)||null),h=t.indexOf(e.charAt(y++)||null),p=t.indexOf(e.charAt(y++)||null),v=t.indexOf(e.charAt(y++)||null),i&&(f<0||h<0||p<0||v<0))throw new E("Error: Base64 input contains non-alphabet char(s)");l=(15&h)<<4|p>>2,c=(3&p)<<6|v,(s=f<<2|h>>4)>=0&&s<256&&m.push(s),l>=0&&l<256&&64!==p&&m.push(l),c>=0&&c<256&&64!==v&&m.push(c)}return"string"===r?P.byteArrayToUtf8(m):m}function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Auto",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;if(r<1||Math.round(r)!==r)throw new E("Byte length must be a positive integer");if("None"!==t){var n="Auto"===t?/[^a-f\d]|0x/gi:P.regexRep(t);e=e.split(n)}else e=[e];for(var i=[],o=0;o<e.length;o++)for(var a=0;a<e[o].length;a+=r)i.push(parseInt(e[o].substr(a,r),16));return i}function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Auto";t=P.charRep(t);var r=[],n=e.split(t);""===n[n.length-1]&&(n=n.slice(0,n.length-1));for(var i=0;i<n.length;i++)r[i]=parseInt(n[i],10);return r}function C(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Space",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8;if(r<1||Math.round(r)!==r)throw new E("Byte length must be a positive integer");var n=P.regexRep(t);e=e.replace(n,"");for(var i=[],o=0;o<e.length;o+=r)i.push(parseInt(e.substr(o,r),2));return i}["Auto"].concat(["Space","Percent","Comma","Semi-colon","Colon","Line feed","CRLF","0x","0x with comma","\\x","None"]);var T=r(48287).Buffer,R=r(65606),O=function(){function e(){i(this,e)}return s(e,null,[{key:"chr",value:function(e){if(e>65535){e-=65536;var t=String.fromCharCode(e>>>10&1023|55296);return e=56320|1023&e,t+String.fromCharCode(e)}return String.fromCharCode(e)}},{key:"ord",value:function(e){if(2===e.length){var t=e.charCodeAt(0),r=e.charCodeAt(1);if(t>=55296&&t<56320&&r>=56320&&r<57344)return 1024*(t-55296)+r-56320+65536}return e.charCodeAt(0)}},{key:"padBytesRight",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=new Array(t);return n.fill(r),g(e).forEach((function(e,t){n[t]=e})),n}},{key:"truncate",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"...";return e.length>t&&(e=e.slice(0,t-r.length)+r),e}},{key:"hex",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return(t="string"==typeof t?e.ord(t):t).toString(16).padStart(r,"0")}},{key:"bin",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8;return(t="string"==typeof t?e.ord(t):t).toString(2).padStart(r,"0")}},{key:"printable",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return arguments.length>2&&void 0!==arguments[2]&&arguments[2]?e.replace(/[^\x20-\x7f]/g,"."):(e=e.replace(/[\0-\x08\x0B-\x0C\x0E-\x1F\x7F-\x9F\xAD\u0378\u0379\u037F-\u0383\u038B\u038D\u03A2\u0528-\u0530\u0557\u0558\u0560\u0588\u058B-\u058E\u0590\u05C8-\u05CF\u05EB-\u05EF\u05F5-\u0605\u061C\u061D\u06DD\u070E\u070F\u074B\u074C\u07B2-\u07BF\u07FB-\u07FF\u082E\u082F\u083F\u085C\u085D\u085F-\u089F\u08A1\u08AD-\u08E3\u08FF\u0978\u0980\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA\u09BB\u09C5\u09C6\u09C9\u09CA\u09CF-\u09D6\u09D8-\u09DB\u09DE\u09E4\u09E5\u09FC-\u0A00\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A\u0A3B\u0A3D\u0A43-\u0A46\u0A49\u0A4A\u0A4E-\u0A50\u0A52-\u0A58\u0A5D\u0A5F-\u0A65\u0A76-\u0A80\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA\u0ABB\u0AC6\u0ACA\u0ACE\u0ACF\u0AD1-\u0ADF\u0AE4\u0AE5\u0AF2-\u0B00\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A\u0B3B\u0B45\u0B46\u0B49\u0B4A\u0B4E-\u0B55\u0B58-\u0B5B\u0B5E\u0B64\u0B65\u0B78-\u0B81\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BBD\u0BC3-\u0BC5\u0BC9\u0BCE\u0BCF\u0BD1-\u0BD6\u0BD8-\u0BE5\u0BFB-\u0C00\u0C04\u0C0D\u0C11\u0C29\u0C34\u0C3A-\u0C3C\u0C45\u0C49\u0C4E-\u0C54\u0C57\u0C5A-\u0C5F\u0C64\u0C65\u0C70-\u0C77\u0C80\u0C81\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA\u0CBB\u0CC5\u0CC9\u0CCE-\u0CD4\u0CD7-\u0CDD\u0CDF\u0CE4\u0CE5\u0CF0\u0CF3-\u0D01\u0D04\u0D0D\u0D11\u0D3B\u0D3C\u0D45\u0D49\u0D4F-\u0D56\u0D58-\u0D5F\u0D64\u0D65\u0D76-\u0D78\u0D80\u0D81\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0DC9\u0DCB-\u0DCE\u0DD5\u0DD7\u0DE0-\u0DF1\u0DF5-\u0E00\u0E3B-\u0E3E\u0E5C-\u0E80\u0E83\u0E85\u0E86\u0E89\u0E8B\u0E8C\u0E8E-\u0E93\u0E98\u0EA0\u0EA4\u0EA6\u0EA8\u0EA9\u0EAC\u0EBA\u0EBE\u0EBF\u0EC5\u0EC7\u0ECE\u0ECF\u0EDA\u0EDB\u0EE0-\u0EFF\u0F48\u0F6D-\u0F70\u0F98\u0FBD\u0FCD\u0FDB-\u0FFF\u10C6\u10C8-\u10CC\u10CE\u10CF\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B\u135C\u137D-\u137F\u139A-\u139F\u13F5-\u13FF\u169D-\u169F\u16F1-\u16FF\u170D\u1715-\u171F\u1737-\u173F\u1754-\u175F\u176D\u1771\u1774-\u177F\u17DE\u17DF\u17EA-\u17EF\u17FA-\u17FF\u180F\u181A-\u181F\u1878-\u187F\u18AB-\u18AF\u18F6-\u18FF\u191D-\u191F\u192C-\u192F\u193C-\u193F\u1941-\u1943\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19CF\u19DB-\u19DD\u1A1C\u1A1D\u1A5F\u1A7D\u1A7E\u1A8A-\u1A8F\u1A9A-\u1A9F\u1AAE-\u1AFF\u1B4C-\u1B4F\u1B7D-\u1B7F\u1BF4-\u1BFB\u1C38-\u1C3A\u1C4A-\u1C4C\u1C80-\u1CBF\u1CC8-\u1CCF\u1CF7-\u1CFF\u1DE7-\u1DFB\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FC5\u1FD4\u1FD5\u1FDC\u1FF0\u1FF1\u1FF5\u1FFF\u200B-\u200F\u202A-\u202E\u2060-\u206F\u2072\u2073\u208F\u209D-\u209F\u20BB-\u20CF\u20F1-\u20FF\u218A-\u218F\u23F4-\u23FF\u2427-\u243F\u244B-\u245F\u2700\u2B4D-\u2B4F\u2B5A-\u2BFF\u2C2F\u2C5F\u2CF4-\u2CF8\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D71-\u2D7E\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF\u2E3C-\u2E7F\u2E9A\u2EF4-\u2EFF\u2FD6-\u2FEF\u2FFC-\u2FFF\u3040\u3097\u3098\u3100-\u3104\u312E-\u3130\u318F\u31BB-\u31BF\u31E4-\u31EF\u321F\u32FF\u4DB6-\u4DBF\u9FCD-\u9FFF\uA48D-\uA48F\uA4C7-\uA4CF\uA62C-\uA63F\uA698-\uA69E\uA6F8-\uA6FF\uA78F\uA794-\uA79F\uA7AB-\uA7F7\uA82C-\uA82F\uA83A-\uA83F\uA878-\uA87F\uA8C5-\uA8CD\uA8DA-\uA8DF\uA8FC-\uA8FF\uA954-\uA95E\uA97D-\uA97F\uA9CE\uA9DA-\uA9DD\uA9E0-\uA9FF\uAA37-\uAA3F\uAA4E\uAA4F\uAA5A\uAA5B\uAA7C-\uAA7F\uAAC3-\uAADA\uAAF7-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F-\uABBF\uABEE\uABEF\uABFA-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uD7FF\uE000-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBC2-\uFBD2\uFD40-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFE\uFDFF\uFE1A-\uFE1F\uFE27-\uFE2F\uFE53\uFE67\uFE6C-\uFE6F\uFE75\uFEFD-\uFF00\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFDF\uFFE7\uFFEF-\uFFFB\uFFFE\uFFFF]/g,"."),t||(e=e.replace(/[\x09-\x10\u2028\u2029]/g,".")),e)}},{key:"escapeWhitespace",value:function(e){return e.replace(/[\x09-\x10]/g,(function(e){return String.fromCharCode(57344+e.charCodeAt(0))}))}},{key:"parseEscapedChars",value:function(e){return e.replace(/\\([abfnrtv'"]|[0-3][0-7]{2}|[0-7]{1,2}|x[\da-fA-F]{2}|u[\da-fA-F]{4}|u\{[\da-fA-F]{1,6}\}|\\)/g,(function(e,t){switch(t[0]){case"\\":return"\\";case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":return String.fromCharCode(parseInt(t,8));case"a":return String.fromCharCode(7);case"b":return"\b";case"t":return"\t";case"n":return"\n";case"v":return"\v";case"f":return"\f";case"r":return"\r";case'"':return'"';case"'":return"'";case"x":return String.fromCharCode(parseInt(t.substr(1),16));case"u":return"{"===t[1]?String.fromCodePoint(parseInt(t.slice(2,-1),16)):String.fromCharCode(parseInt(t.substr(1),16))}}))}},{key:"escapeRegex",value:function(e){return e.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")}},{key:"expandAlphRange",value:function(t){for(var r=[],n=0;n<t.length;n++)if(n<t.length-2&&"-"===t[n+1]&&"\\"!==t[n]){for(var i=e.ord(t[n]),o=e.ord(t[n+2]),a=i;a<=o;a++)r.push(e.chr(a));n+=2}else n<t.length-2&&"\\"===t[n]&&"-"===t[n+1]?(r.push("-"),n++):r.push(t[n]);return r}},{key:"convertToByteArray",value:function(t,r){switch(r.toLowerCase()){case"binary":return C(t);case"hex":return k(t);case"decimal":return I(t);case"base64":return S(t,null,"byteArray");case"utf8":return e.strToUtf8ByteArray(t);default:return e.strToByteArray(t)}}},{key:"convertToByteString",value:function(t,r){switch(r.toLowerCase()){case"binary":return e.byteArrayToChars(C(t));case"hex":return e.byteArrayToChars(k(t));case"decimal":return e.byteArrayToChars(I(t));case"base64":return e.byteArrayToChars(S(t,null,"byteArray"));case"utf8":return B().encode(t);default:return t}}},{key:"byteArrayToInt",value:function(e,t){var r=0;if("big"===t)for(var n=0;n<e.length;n++)r=256*r+e[n];else for(var i=e.length-1;i>=0;i--)r=256*r+e[i];return r}},{key:"intToByteArray",value:function(e,t,r){var n=new Array(t);if("little"===r)for(var i=0;i<t;i++)n[i]=255&e,e>>>=8;else for(var o=t-1;o>=0;o--)n[o]=255&e,e>>>=8;return n}},{key:"strToArrayBuffer",value:function(t){if(w().debug(`Converting string[${null==t?void 0:t.length}] to array buffer`),!t)return new ArrayBuffer;for(var r,n=new Uint8Array(t.length),i=t.length;i--;)if(r=t.charCodeAt(i),n[i]=r,r>255)return e.strToUtf8ArrayBuffer(t);return n.buffer}},{key:"strToUtf8ArrayBuffer",value:function(e){if(w().debug(`Converting string[${null==e?void 0:e.length}] to UTF8 array buffer`),!e)return new ArrayBuffer;var t=new TextEncoder("utf-8").encode(e);return e.length!==t.length&&(U()&&self&&"function"==typeof self.setOption?self.setOption("attemptHighlight",!1):M()&&(window.app.options.attemptHighlight=!1)),t.buffer}},{key:"strToByteArray",value:function(t){if(w().debug(`Converting string[${null==t?void 0:t.length}] to byte array`),!t)return[];for(var r,n=new Array(t.length),i=t.length;i--;)if(r=t.charCodeAt(i),n[i]=r,r>255)return e.strToUtf8ByteArray(t);return n}},{key:"strToUtf8ByteArray",value:function(t){if(w().debug(`Converting string[${null==t?void 0:t.length}] to UTF8 byte array`),!t)return[];var r=B().encode(t);return t.length!==r.length&&(U()?self.setOption("attemptHighlight",!1):M()&&(window.app.options.attemptHighlight=!1)),e.strToByteArray(r)}},{key:"strToCharcode",value:function(t){if(w().debug(`Converting string[${null==t?void 0:t.length}] to charcode`),!t)return[];for(var r=[],n=0;n<t.length;n++){var i=t.charCodeAt(n);if(n<t.length-1&&i>=55296&&i<56320){var o=t[n+1].charCodeAt(0);o>=56320&&o<57344&&(i=e.ord(t[n]+t[++n]))}r.push(i)}return r}},{key:"byteArrayToUtf8",value:function(t){var r;if(w().debug(`Converting byte array[${null===(r=t)||void 0===r?void 0:r.length}] to UTF8`),!t||!t.length)return"";t instanceof Uint8Array||(t=new Uint8Array(t));try{var n=new TextDecoder("utf-8",{fatal:!0}).decode(t);return n.length!==t.length&&(U()?self.setOption("attemptHighlight",!1):M()&&(window.app.options.attemptHighlight=!1)),n}catch(r){return e.byteArrayToChars(t)}}},{key:"byteArrayToChars",value:function(e){if(w().debug(`Converting byte array[${null==e?void 0:e.length}] to chars`),!e||!e.length)return"";for(var t="",r=0;r<e.length;r+=2e4)t+=String.fromCharCode.apply(String,g(e.slice(r,r+2e4)));return t}},{key:"arrayBufferToStr",value:function(t){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(w().debug(`Converting array buffer[${null==t?void 0:t.byteLength}] to str`),!t||!t.byteLength)return"";var n=new Uint8Array(t);return r?e.byteArrayToUtf8(n):e.byteArrayToChars(n)}},{key:"calculateShannonEntropy",value:function(e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));var t,r=[],n=new Array(256).fill(0);for(t=0;t<e.length;t++)n[e[t]]++;for(t=0;t<n.length;t++)n[t]>0&&r.push(n[t]/e.length);var i,o=0;for(t=0;t<r.length;t++)o+=(i=r[t])*Math.log(i)/Math.log(2);return-o}},{key:"parseCSV",value:function(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[","],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["\n","\r"],o=!1,a=!1,u="",s=[],l=[];e.length&&"\ufeff"===e[0]&&(e=e.substr(1));for(var c=0;c<e.length;c++)t=e[c],r=e[c+1]||"",o?(u+=t,o=!1):'"'!==t||a?'"'===t&&a?'"'===r?o=!0:a=!1:!a&&n.indexOf(t)>=0?(s.push(u),u=""):!a&&i.indexOf(t)>=0?(s.push(u),u="",l.push(s),s=[],i.indexOf(r)>=0&&r!==t&&c++):u+=t:a=!0;return s.length&&(s.push(u),l.push(s)),l}},{key:"stripHtmlTags",value:function(e){function t(e,r){var n=r.replace(e,"");return n.length===r.length?n:t(e,n)}return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(e=t(/<script[^>]*>(\s|\S)*?<\/script[^>]*>/gi,e),e=t(/<style[^>]*>(\s|\S)*?<\/style[^>]*>/gi,e)),t(/<[^>]+>/g,e)}},{key:"escapeHtml",value:function(e){var t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","\0":""};return e?e.replace(/[&<>"'`\u0000]/g,(function(e){return t[e]})):e}},{key:"unescapeHtml",value:function(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#x27;":"'","&#x2F;":"/","&#x60;":"`","":"\0"};return e.replace(/(&#?x?[a-z0-9]{2,4};|\ue000)/gi,(function(e){return t[e]||e}))}},{key:"toTitleCase",value:function(e){return e.replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))}},{key:"encodeURIFragment",value:function(e){var t={"%2D":"-","%2E":".","%5F":"_","%7E":"~","%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2C":",","%3B":";","%3A":":","%40":"@","%2F":"/","%3F":"?"};return(e=encodeURIComponent(e)).replace(/%[0-9A-F]{2}/g,(function(e){return t[e]||e}))}},{key:"generatePrettyRecipe",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r="",n="",i="",o="",a="";return e.forEach((function(e){n=e.op.replace(/ /g,"_"),i=JSON.stringify(e.args).slice(1,-1).replace(/'/g,"\\'").replace(/"((?:[^"\\]|\\.)*)"/g,"'$1'").replace(/\\"/g,'"'),o=e.disabled?"/disabled":"",a=e.breakpoint?"/breakpoint":"",r+=`${n}(${i}${o}${a})`,t&&(r+="\n")})),r}},{key:"parseRecipeConfig",value:function(e){if(0===(e=e.trim()).length)return[];if("["===e[0])return JSON.parse(e);var t,r;e=e.replace(/\n/g,"");for(var n=/([^(]+)\(((?:'[^'\\]*(?:\\.[^'\\]*)*'|[^)/'])*)(\/[^)]+)?\)/g,i=[];t=n.exec(e);){r="["+(r=t[2].replace(/"/g,'\\"').replace(/(^|,|{|:)'/g,'$1"').replace(/([^\\]|(?:\\\\)+)'(,|:|}|$)/g,'$1"$2').replace(/\\'/g,"'"))+"]";var o={op:t[1].replace(/_/g," "),args:JSON.parse(r)};t[3]&&t[3].indexOf("disabled")>0&&(o.disabled=!0),t[3]&&t[3].indexOf("breakpoint")>0&&(o.breakpoint=!0),i.push(o)}return i}},{key:"displayFilesAsHTML",value:(t=m(d().mark((function t(r){var n,i,o,a,u;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=function(t){return`<div class='card' style='white-space: normal;'>\n                    <div class='card-header'>\n                        <h6 class="mb-0">\n                            ${e.escapeHtml(t.name)}\n                        </h6>\n                    </div>\n                </div>`},i=function(t,r){if(r.startsWith("image")){var n="data:";return n+=r+";","<img style='max-width: 100%;' src='"+(n+="base64,"+F(t))+"'>"}return`<pre>${e.escapeHtml(e.arrayBufferToStr(t.buffer))}</pre>`},o=function(){var t=m(d().mark((function t(r,n){var o,a,u,s;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.readFile(r);case 2:return o=t.sent,a=new Blob([o],{type:r.type||"octet/stream"}),u=URL.createObjectURL(a),s=`<div class='card' style='white-space: normal;'>\n                    <div class='card-header' id='heading${n}'>\n                        <h6 class='mb-0'>\n                            <a class='collapsed'\n                                data-toggle='collapse'\n                                href='#collapse${n}'\n                                aria-expanded='false'\n                                aria-controls='collapse${n}'\n                                title="Show/hide contents of '${e.escapeHtml(r.name)}'">\n                                ${e.escapeHtml(r.name)}</a>\n                            <span class='float-right' style="margin-top: -3px">\n                                ${r.size.toLocaleString()} bytes\n                                <a title="Download ${e.escapeHtml(r.name)}"\n                                    href="${u}"\n                                    download="${e.escapeHtml(r.name)}"\n                                    data-toggle="tooltip">\n                                    <i class="material-icons" style="vertical-align: bottom">save</i>\n                                </a>\n                                <a title="Move to input"\n                                    href="#"\n                                    blob-url="${u}"\n                                    file-name="${e.escapeHtml(r.name)}"\n                                    class="extract-file"\n                                    data-toggle="tooltip">\n                                    <i class="material-icons" style="vertical-align: bottom">open_in_browser</i>\n                                </a>\n                            </span>\n                        </h6>\n                    </div>\n                    <div id='collapse${n}' class='collapse' aria-labelledby='heading${n}' data-parent="#files">\n                        <div class='card-body'>\n                            ${i(o,r.type)}\n                        </div>\n                    </div>\n                </div>`,t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),a=`<div style='padding: 5px; white-space: normal;'>\n                ${r.length} file(s) found\n            </div><div id="files" style="padding: 20px">`,u=0;case 5:if(!(u<r.length)){t.next=17;break}if(!r[u].name.endsWith("/")){t.next=10;break}a+=n(r[u]),t.next=14;break;case 10:return t.t0=a,t.next=13,o(r[u],u);case 13:a=t.t0+=t.sent;case 14:u++,t.next=5;break;case 17:return t.abrupt("return",a+="</div>");case 18:case"end":return t.stop()}}),t)}))),function(e){return t.apply(this,arguments)})},{key:"parseURIParams",value:function(e){if(""===e)return{};"?"!==e[0]&&"#"!==e[0]||(e=e.substr(1));for(var t=e.split("&"),r={},n=0;n<t.length;n++){var i=t[n].split("=");2!==i.length?r[t[n]]=!0:r[i[0]]=decodeURIComponent(i[1].replace(/\+/g," "))}return r}},{key:"readFile",value:function(e){return L()?T.from(e).buffer:new Promise((function(t,r){var n=new FileReader,i=new Uint8Array(e.size),o=0,a=10485760,u=function(){if(o>=e.size)t(i);else{var r=e.slice(o,o+a);n.readAsArrayBuffer(r)}};n.onload=function(e){i.set(new Uint8Array(n.result),o),o+=a,u()},n.onerror=function(e){r(n.error.message)},u()}))}},{key:"readFileSync",value:function(e){if(!L())throw new TypeError("Browser environment cannot support readFileSync");return Uint8Array.from(e.data).buffer}},{key:"mod",value:function(e,t){return(e%t+t)%t}},{key:"gcd",value:function(t,r){return r?e.gcd(r,t%r):t}},{key:"modInv",value:function(e,t){e%=t;for(var r=1;r<t;r++)if(e*r%26==1)return r}},{key:"charRep",value:function(e){return{Space:" ",Percent:"%",Comma:",","Semi-colon":";",Colon:":",Tab:"\t","Line feed":"\n",CRLF:"\r\n","Forward slash":"/",Backslash:"\\","0x":"0x","\\x":"\\x","Nothing (separate chars)":"",None:""}[e]}},{key:"regexRep",value:function(e){return{Space:/\s+/g,Percent:/%/g,Comma:/,/g,"Semi-colon":/;/g,Colon:/:/g,"Line feed":/\n/g,CRLF:/\r\n/g,"Forward slash":/\//g,Backslash:/\\/g,"0x with comma":/,?0x/g,"0x":/0x/g,"\\x":/\\x/g,None:/\s+/g}[e]}},{key:"chunked",value:d().mark((function e(t,r){var n,i,o,a;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t[Symbol.iterator]();case 1:i=[],o=0;case 4:if(!(o<r)){e.next=12;break}if(!(a=n.next()).done){e.next=8;break}return e.abrupt("break",12);case 8:i.push(a.value);case 9:o++,e.next=4;break;case 12:if(!i.length){e.next=17;break}return e.next=15,i;case 15:e.next=18;break;case 17:return e.abrupt("return");case 18:e.next=1;break;case 20:case"end":return e.stop()}}),e)}))}]);var t}();function L(){return void 0!==R&&null!=R.versions&&null!=R.versions.node}function M(){return"object"==typeof window}function U(){return"function"==typeof importScripts}const P=O;function D(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(D=function(){return!!e})()}Array.prototype.unique=function(){for(var e={},t=[],r=0,n=this.length;r<n;r++)Object.prototype.hasOwnProperty.call(e,this[r])||(t.push(this[r]),e[this[r]]=1);return t},Array.prototype.max=function(){return Math.max.apply(null,this)},Array.prototype.min=function(){return Math.min.apply(null,this)},Array.prototype.sum=function(){return this.reduce((function(e,t){return e+t}),0)},Array.prototype.equals=function(e){if(!e)return!1;var t=this.length;if(t!==e.length)return!1;for(;t--;)if(this[t]!==e[t])return!1;return!0},String.prototype.count=function(e){return this.split(e).length-1},String.prototype.padStart||(String.prototype.padStart=function(e,t){return e|=0,t=String(void 0!==t?t:" "),this.length>e?String(this):((e-=this.length)>t.length&&(t+=t.repeat(e/t.length)),t.slice(0,e)+String(this))}),String.prototype.padEnd||(String.prototype.padEnd=function(e,t){return e|=0,t=String(void 0!==t?t:" "),this.length>e?String(this):((e-=this.length)>t.length&&(t+=t.repeat(e/t.length)),String(this)+t.slice(0,e))});const N=function(e){function t(){var e,r,n,o;i(this,t);for(var a=arguments.length,u=new Array(a),s=0;s<a;s++)u[s]=arguments[s];return r=this,n=t,o=[].concat(u),n=f(n),(e=c(r,D()?Reflect.construct(n,o||[],f(r).constructor):n.apply(r,o))).type="DishError",Error.captureStackTrace&&Error.captureStackTrace(e,t),e}return p(t,e),s(t)}(function(e){function t(){var t=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(t,Object.getPrototypeOf(this)),t}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Error));var _=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,$=Math.ceil,X=Math.floor,j="[BigNumber Error] ",G=j+"Number primitive has more than 15 significant digits: ",Z=1e14,Q=14,H=9007199254740991,V=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Y=1e7,W=1e9;function J(e){var t=0|e;return e>0||e===t?t:t-1}function z(e){for(var t,r,n=1,i=e.length,o=e[0]+"";n<i;){for(t=e[n++]+"",r=Q-t.length;r--;t="0"+t);o+=t}for(i=o.length;48===o.charCodeAt(--i););return o.slice(0,i+1||1)}function q(e,t){var r,n,i=e.c,o=t.c,a=e.s,u=t.s,s=e.e,l=t.e;if(!a||!u)return null;if(r=i&&!i[0],n=o&&!o[0],r||n)return r?n?0:-u:a;if(a!=u)return a;if(r=a<0,n=s==l,!i||!o)return n?0:!i^r?1:-1;if(!n)return s>l^r?1:-1;for(u=(s=i.length)<(l=o.length)?s:l,a=0;a<u;a++)if(i[a]!=o[a])return i[a]>o[a]^r?1:-1;return s==l?0:s>l^r?1:-1}function K(e,t,r,n){if(e<t||e>r||e!==X(e))throw Error(j+(n||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function ee(e){var t=e.c.length-1;return J(e.e/Q)==t&&e.c[t]%2!=0}function te(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function re(e,t,r){var n,i;if(t<0){for(i=r+".";++t;i+=r);e=i+e}else if(++t>(n=e.length)){for(i=r,t-=n;--t;i+=r);e+=i}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}var ne=function e(t){var r,n,i,o,a,u,s,l,c,f,h=S.prototype={constructor:S,toString:null,valueOf:null},p=new S(1),v=20,m=4,y=-7,d=21,g=-1e7,b=1e7,w=!1,x=1,B=0,A={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},E="0123456789abcdefghijklmnopqrstuvwxyz",F=!0;function S(e,t){var r,o,a,u,s,l,c,f,h=this;if(!(h instanceof S))return new S(e,t);if(null==t){if(e&&!0===e._isBigNumber)return h.s=e.s,void(!e.c||e.e>b?h.c=h.e=null:e.e<g?h.c=[h.e=0]:(h.e=e.e,h.c=e.c.slice()));if((l="number"==typeof e)&&0*e==0){if(h.s=1/e<0?(e=-e,-1):1,e===~~e){for(u=0,s=e;s>=10;s/=10,u++);return void(u>b?h.c=h.e=null:(h.e=u,h.c=[e]))}f=String(e)}else{if(!_.test(f=String(e)))return i(h,f,l);h.s=45==f.charCodeAt(0)?(f=f.slice(1),-1):1}(u=f.indexOf("."))>-1&&(f=f.replace(".","")),(s=f.search(/e/i))>0?(u<0&&(u=s),u+=+f.slice(s+1),f=f.substring(0,s)):u<0&&(u=f.length)}else{if(K(t,2,E.length,"Base"),10==t&&F)return T(h=new S(e),v+h.e+1,m);if(f=String(e),l="number"==typeof e){if(0*e!=0)return i(h,f,l,t);if(h.s=1/e<0?(f=f.slice(1),-1):1,S.DEBUG&&f.replace(/^0\.0*|\./,"").length>15)throw Error(G+e)}else h.s=45===f.charCodeAt(0)?(f=f.slice(1),-1):1;for(r=E.slice(0,t),u=s=0,c=f.length;s<c;s++)if(r.indexOf(o=f.charAt(s))<0){if("."==o){if(s>u){u=c;continue}}else if(!a&&(f==f.toUpperCase()&&(f=f.toLowerCase())||f==f.toLowerCase()&&(f=f.toUpperCase()))){a=!0,s=-1,u=0;continue}return i(h,String(e),l,t)}l=!1,(u=(f=n(f,t,10,h.s)).indexOf("."))>-1?f=f.replace(".",""):u=f.length}for(s=0;48===f.charCodeAt(s);s++);for(c=f.length;48===f.charCodeAt(--c););if(f=f.slice(s,++c)){if(c-=s,l&&S.DEBUG&&c>15&&(e>H||e!==X(e)))throw Error(G+h.s*e);if((u=u-s-1)>b)h.c=h.e=null;else if(u<g)h.c=[h.e=0];else{if(h.e=u,h.c=[],s=(u+1)%Q,u<0&&(s+=Q),s<c){for(s&&h.c.push(+f.slice(0,s)),c-=Q;s<c;)h.c.push(+f.slice(s,s+=Q));s=Q-(f=f.slice(s)).length}else s-=c;for(;s--;f+="0");h.c.push(+f)}}else h.c=[h.e=0]}function k(e,t,r,n){var i,o,a,u,s;if(null==r?r=m:K(r,0,8),!e.c)return e.toString();if(i=e.c[0],a=e.e,null==t)s=z(e.c),s=1==n||2==n&&(a<=y||a>=d)?te(s,a):re(s,a,"0");else if(o=(e=T(new S(e),t,r)).e,u=(s=z(e.c)).length,1==n||2==n&&(t<=o||o<=y)){for(;u<t;s+="0",u++);s=te(s,o)}else if(t-=a,s=re(s,o,"0"),o+1>u){if(--t>0)for(s+=".";t--;s+="0");}else if((t+=o-u)>0)for(o+1==u&&(s+=".");t--;s+="0");return e.s<0&&i?"-"+s:s}function I(e,t){for(var r,n,i=1,o=new S(e[0]);i<e.length;i++)(!(n=new S(e[i])).s||(r=q(o,n))===t||0===r&&o.s===t)&&(o=n);return o}function C(e,t,r){for(var n=1,i=t.length;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,n++);return(r=n+r*Q-1)>b?e.c=e.e=null:r<g?e.c=[e.e=0]:(e.e=r,e.c=t),e}function T(e,t,r,n){var i,o,a,u,s,l,c,f=e.c,h=V;if(f){e:{for(i=1,u=f[0];u>=10;u/=10,i++);if((o=t-i)<0)o+=Q,a=t,s=f[l=0],c=X(s/h[i-a-1]%10);else if((l=$((o+1)/Q))>=f.length){if(!n)break e;for(;f.length<=l;f.push(0));s=c=0,i=1,a=(o%=Q)-Q+1}else{for(s=u=f[l],i=1;u>=10;u/=10,i++);c=(a=(o%=Q)-Q+i)<0?0:X(s/h[i-a-1]%10)}if(n=n||t<0||null!=f[l+1]||(a<0?s:s%h[i-a-1]),n=r<4?(c||n)&&(0==r||r==(e.s<0?3:2)):c>5||5==c&&(4==r||n||6==r&&(o>0?a>0?s/h[i-a]:0:f[l-1])%10&1||r==(e.s<0?8:7)),t<1||!f[0])return f.length=0,n?(t-=e.e+1,f[0]=h[(Q-t%Q)%Q],e.e=-t||0):f[0]=e.e=0,e;if(0==o?(f.length=l,u=1,l--):(f.length=l+1,u=h[Q-o],f[l]=a>0?X(s/h[i-a]%h[a])*u:0),n)for(;;){if(0==l){for(o=1,a=f[0];a>=10;a/=10,o++);for(a=f[0]+=u,u=1;a>=10;a/=10,u++);o!=u&&(e.e++,f[0]==Z&&(f[0]=1));break}if(f[l]+=u,f[l]!=Z)break;f[l--]=0,u=1}for(o=f.length;0===f[--o];f.pop());}e.e>b?e.c=e.e=null:e.e<g&&(e.c=[e.e=0])}return e}function R(e){var t,r=e.e;return null===r?e.toString():(t=z(e.c),t=r<=y||r>=d?te(t,r):re(t,r,"0"),e.s<0?"-"+t:t)}return S.clone=e,S.ROUND_UP=0,S.ROUND_DOWN=1,S.ROUND_CEIL=2,S.ROUND_FLOOR=3,S.ROUND_HALF_UP=4,S.ROUND_HALF_DOWN=5,S.ROUND_HALF_EVEN=6,S.ROUND_HALF_CEIL=7,S.ROUND_HALF_FLOOR=8,S.EUCLID=9,S.config=S.set=function(e){var t,r;if(null!=e){if("object"!=typeof e)throw Error(j+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(K(r=e[t],0,W,t),v=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(K(r=e[t],0,8,t),m=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((r=e[t])&&r.pop?(K(r[0],-W,0,t),K(r[1],0,W,t),y=r[0],d=r[1]):(K(r,-W,W,t),y=-(d=r<0?-r:r))),e.hasOwnProperty(t="RANGE"))if((r=e[t])&&r.pop)K(r[0],-W,-1,t),K(r[1],1,W,t),g=r[0],b=r[1];else{if(K(r,-W,W,t),!r)throw Error(j+t+" cannot be zero: "+r);g=-(b=r<0?-r:r)}if(e.hasOwnProperty(t="CRYPTO")){if((r=e[t])!==!!r)throw Error(j+t+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw w=!r,Error(j+"crypto unavailable");w=r}else w=r}if(e.hasOwnProperty(t="MODULO_MODE")&&(K(r=e[t],0,9,t),x=r),e.hasOwnProperty(t="POW_PRECISION")&&(K(r=e[t],0,W,t),B=r),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(r=e[t]))throw Error(j+t+" not an object: "+r);A=r}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(r))throw Error(j+t+" invalid: "+r);F="0123456789"==r.slice(0,10),E=r}}return{DECIMAL_PLACES:v,ROUNDING_MODE:m,EXPONENTIAL_AT:[y,d],RANGE:[g,b],CRYPTO:w,MODULO_MODE:x,POW_PRECISION:B,FORMAT:A,ALPHABET:E}},S.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!S.DEBUG)return!0;var t,r,n=e.c,i=e.e,o=e.s;e:if("[object Array]"=={}.toString.call(n)){if((1===o||-1===o)&&i>=-W&&i<=W&&i===X(i)){if(0===n[0]){if(0===i&&1===n.length)return!0;break e}if((t=(i+1)%Q)<1&&(t+=Q),String(n[0]).length==t){for(t=0;t<n.length;t++)if((r=n[t])<0||r>=Z||r!==X(r))break e;if(0!==r)return!0}}}else if(null===n&&null===i&&(null===o||1===o||-1===o))return!0;throw Error(j+"Invalid BigNumber: "+e)},S.maximum=S.max=function(){return I(arguments,-1)},S.minimum=S.min=function(){return I(arguments,1)},S.random=(o=9007199254740992,a=Math.random()*o&2097151?function(){return X(Math.random()*o)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,r,n,i,o,u=0,s=[],l=new S(p);if(null==e?e=v:K(e,0,W),i=$(e/Q),w)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(i*=2));u<i;)(o=131072*t[u]+(t[u+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),t[u]=r[0],t[u+1]=r[1]):(s.push(o%1e14),u+=2);u=i/2}else{if(!crypto.randomBytes)throw w=!1,Error(j+"crypto unavailable");for(t=crypto.randomBytes(i*=7);u<i;)(o=281474976710656*(31&t[u])+1099511627776*t[u+1]+4294967296*t[u+2]+16777216*t[u+3]+(t[u+4]<<16)+(t[u+5]<<8)+t[u+6])>=9e15?crypto.randomBytes(7).copy(t,u):(s.push(o%1e14),u+=7);u=i/7}if(!w)for(;u<i;)(o=a())<9e15&&(s[u++]=o%1e14);for(i=s[--u],e%=Q,i&&e&&(o=V[Q-e],s[u]=X(i/o)*o);0===s[u];s.pop(),u--);if(u<0)s=[n=0];else{for(n=-1;0===s[0];s.splice(0,1),n-=Q);for(u=1,o=s[0];o>=10;o/=10,u++);u<Q&&(n-=Q-u)}return l.e=n,l.c=s,l}),S.sum=function(){for(var e=1,t=arguments,r=new S(t[0]);e<t.length;)r=r.plus(t[e++]);return r},n=function(){var e="0123456789";function t(e,t,r,n){for(var i,o,a=[0],u=0,s=e.length;u<s;){for(o=a.length;o--;a[o]*=t);for(a[0]+=n.indexOf(e.charAt(u++)),i=0;i<a.length;i++)a[i]>r-1&&(null==a[i+1]&&(a[i+1]=0),a[i+1]+=a[i]/r|0,a[i]%=r)}return a.reverse()}return function(n,i,o,a,u){var s,l,c,f,h,p,y,d,g=n.indexOf("."),b=v,w=m;for(g>=0&&(f=B,B=0,n=n.replace(".",""),p=(d=new S(i)).pow(n.length-g),B=f,d.c=t(re(z(p.c),p.e,"0"),10,o,e),d.e=d.c.length),c=f=(y=t(n,i,o,u?(s=E,e):(s=e,E))).length;0==y[--f];y.pop());if(!y[0])return s.charAt(0);if(g<0?--c:(p.c=y,p.e=c,p.s=a,y=(p=r(p,d,b,w,o)).c,h=p.r,c=p.e),g=y[l=c+b+1],f=o/2,h=h||l<0||null!=y[l+1],h=w<4?(null!=g||h)&&(0==w||w==(p.s<0?3:2)):g>f||g==f&&(4==w||h||6==w&&1&y[l-1]||w==(p.s<0?8:7)),l<1||!y[0])n=h?re(s.charAt(1),-b,s.charAt(0)):s.charAt(0);else{if(y.length=l,h)for(--o;++y[--l]>o;)y[l]=0,l||(++c,y=[1].concat(y));for(f=y.length;!y[--f];);for(g=0,n="";g<=f;n+=s.charAt(y[g++]));n=re(n,c,s.charAt(0))}return n}}(),r=function(){function e(e,t,r){var n,i,o,a,u=0,s=e.length,l=t%Y,c=t/Y|0;for(e=e.slice();s--;)u=((i=l*(o=e[s]%Y)+(n=c*o+(a=e[s]/Y|0)*l)%Y*Y+u)/r|0)+(n/Y|0)+c*a,e[s]=i%r;return u&&(e=[u].concat(e)),e}function t(e,t,r,n){var i,o;if(r!=n)o=r>n?1:-1;else for(i=o=0;i<r;i++)if(e[i]!=t[i]){o=e[i]>t[i]?1:-1;break}return o}function r(e,t,r,n){for(var i=0;r--;)e[r]-=i,i=e[r]<t[r]?1:0,e[r]=i*n+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(n,i,o,a,u){var s,l,c,f,h,p,v,m,y,d,g,b,w,x,B,A,E,F=n.s==i.s?1:-1,k=n.c,I=i.c;if(!(k&&k[0]&&I&&I[0]))return new S(n.s&&i.s&&(k?!I||k[0]!=I[0]:I)?k&&0==k[0]||!I?0*F:F/0:NaN);for(y=(m=new S(F)).c=[],F=o+(l=n.e-i.e)+1,u||(u=Z,l=J(n.e/Q)-J(i.e/Q),F=F/Q|0),c=0;I[c]==(k[c]||0);c++);if(I[c]>(k[c]||0)&&l--,F<0)y.push(1),f=!0;else{for(x=k.length,A=I.length,c=0,F+=2,(h=X(u/(I[0]+1)))>1&&(I=e(I,h,u),k=e(k,h,u),A=I.length,x=k.length),w=A,g=(d=k.slice(0,A)).length;g<A;d[g++]=0);E=I.slice(),E=[0].concat(E),B=I[0],I[1]>=u/2&&B++;do{if(h=0,(s=t(I,d,A,g))<0){if(b=d[0],A!=g&&(b=b*u+(d[1]||0)),(h=X(b/B))>1)for(h>=u&&(h=u-1),v=(p=e(I,h,u)).length,g=d.length;1==t(p,d,v,g);)h--,r(p,A<v?E:I,v,u),v=p.length,s=1;else 0==h&&(s=h=1),v=(p=I.slice()).length;if(v<g&&(p=[0].concat(p)),r(d,p,g,u),g=d.length,-1==s)for(;t(I,d,A,g)<1;)h++,r(d,A<g?E:I,g,u),g=d.length}else 0===s&&(h++,d=[0]);y[c++]=h,d[0]?d[g++]=k[w]||0:(d=[k[w]],g=1)}while((w++<x||null!=d[0])&&F--);f=null!=d[0],y[0]||y.splice(0,1)}if(u==Z){for(c=1,F=y[0];F>=10;F/=10,c++);T(m,o+(m.e=c+l*Q-1)+1,a,f)}else m.e=l,m.r=+f;return m}}(),u=/^(-?)0([xbo])(?=\w[\w.]*$)/i,s=/^([^.]+)\.$/,l=/^\.([^.]+)$/,c=/^-?(Infinity|NaN)$/,f=/^\s*\+(?=[\w.])|^\s+|\s+$/g,i=function(e,t,r,n){var i,o=r?t:t.replace(f,"");if(c.test(o))e.s=isNaN(o)?null:o<0?-1:1;else{if(!r&&(o=o.replace(u,(function(e,t,r){return i="x"==(r=r.toLowerCase())?16:"b"==r?2:8,n&&n!=i?e:t})),n&&(i=n,o=o.replace(s,"$1").replace(l,"0.$1")),t!=o))return new S(o,i);if(S.DEBUG)throw Error(j+"Not a"+(n?" base "+n:"")+" number: "+t);e.s=null}e.c=e.e=null},h.absoluteValue=h.abs=function(){var e=new S(this);return e.s<0&&(e.s=1),e},h.comparedTo=function(e,t){return q(this,new S(e,t))},h.decimalPlaces=h.dp=function(e,t){var r,n,i,o=this;if(null!=e)return K(e,0,W),null==t?t=m:K(t,0,8),T(new S(o),e+o.e+1,t);if(!(r=o.c))return null;if(n=((i=r.length-1)-J(this.e/Q))*Q,i=r[i])for(;i%10==0;i/=10,n--);return n<0&&(n=0),n},h.dividedBy=h.div=function(e,t){return r(this,new S(e,t),v,m)},h.dividedToIntegerBy=h.idiv=function(e,t){return r(this,new S(e,t),0,1)},h.exponentiatedBy=h.pow=function(e,t){var r,n,i,o,a,u,s,l,c=this;if((e=new S(e)).c&&!e.isInteger())throw Error(j+"Exponent not an integer: "+R(e));if(null!=t&&(t=new S(t)),a=e.e>14,!c.c||!c.c[0]||1==c.c[0]&&!c.e&&1==c.c.length||!e.c||!e.c[0])return l=new S(Math.pow(+R(c),a?e.s*(2-ee(e)):+R(e))),t?l.mod(t):l;if(u=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new S(NaN);(n=!u&&c.isInteger()&&t.isInteger())&&(c=c.mod(t))}else{if(e.e>9&&(c.e>0||c.e<-1||(0==c.e?c.c[0]>1||a&&c.c[1]>=24e7:c.c[0]<8e13||a&&c.c[0]<=9999975e7)))return o=c.s<0&&ee(e)?-0:0,c.e>-1&&(o=1/o),new S(u?1/o:o);B&&(o=$(B/Q+2))}for(a?(r=new S(.5),u&&(e.s=1),s=ee(e)):s=(i=Math.abs(+R(e)))%2,l=new S(p);;){if(s){if(!(l=l.times(c)).c)break;o?l.c.length>o&&(l.c.length=o):n&&(l=l.mod(t))}if(i){if(0===(i=X(i/2)))break;s=i%2}else if(T(e=e.times(r),e.e+1,1),e.e>14)s=ee(e);else{if(0==(i=+R(e)))break;s=i%2}c=c.times(c),o?c.c&&c.c.length>o&&(c.c.length=o):n&&(c=c.mod(t))}return n?l:(u&&(l=p.div(l)),t?l.mod(t):o?T(l,B,m,void 0):l)},h.integerValue=function(e){var t=new S(this);return null==e?e=m:K(e,0,8),T(t,t.e+1,e)},h.isEqualTo=h.eq=function(e,t){return 0===q(this,new S(e,t))},h.isFinite=function(){return!!this.c},h.isGreaterThan=h.gt=function(e,t){return q(this,new S(e,t))>0},h.isGreaterThanOrEqualTo=h.gte=function(e,t){return 1===(t=q(this,new S(e,t)))||0===t},h.isInteger=function(){return!!this.c&&J(this.e/Q)>this.c.length-2},h.isLessThan=h.lt=function(e,t){return q(this,new S(e,t))<0},h.isLessThanOrEqualTo=h.lte=function(e,t){return-1===(t=q(this,new S(e,t)))||0===t},h.isNaN=function(){return!this.s},h.isNegative=function(){return this.s<0},h.isPositive=function(){return this.s>0},h.isZero=function(){return!!this.c&&0==this.c[0]},h.minus=function(e,t){var r,n,i,o,a=this,u=a.s;if(t=(e=new S(e,t)).s,!u||!t)return new S(NaN);if(u!=t)return e.s=-t,a.plus(e);var s=a.e/Q,l=e.e/Q,c=a.c,f=e.c;if(!s||!l){if(!c||!f)return c?(e.s=-t,e):new S(f?a:NaN);if(!c[0]||!f[0])return f[0]?(e.s=-t,e):new S(c[0]?a:3==m?-0:0)}if(s=J(s),l=J(l),c=c.slice(),u=s-l){for((o=u<0)?(u=-u,i=c):(l=s,i=f),i.reverse(),t=u;t--;i.push(0));i.reverse()}else for(n=(o=(u=c.length)<(t=f.length))?u:t,u=t=0;t<n;t++)if(c[t]!=f[t]){o=c[t]<f[t];break}if(o&&(i=c,c=f,f=i,e.s=-e.s),(t=(n=f.length)-(r=c.length))>0)for(;t--;c[r++]=0);for(t=Z-1;n>u;){if(c[--n]<f[n]){for(r=n;r&&!c[--r];c[r]=t);--c[r],c[n]+=Z}c[n]-=f[n]}for(;0==c[0];c.splice(0,1),--l);return c[0]?C(e,c,l):(e.s=3==m?-1:1,e.c=[e.e=0],e)},h.modulo=h.mod=function(e,t){var n,i,o=this;return e=new S(e,t),!o.c||!e.s||e.c&&!e.c[0]?new S(NaN):!e.c||o.c&&!o.c[0]?new S(o):(9==x?(i=e.s,e.s=1,n=r(o,e,0,3),e.s=i,n.s*=i):n=r(o,e,0,x),(e=o.minus(n.times(e))).c[0]||1!=x||(e.s=o.s),e)},h.multipliedBy=h.times=function(e,t){var r,n,i,o,a,u,s,l,c,f,h,p,v,m,y,d=this,g=d.c,b=(e=new S(e,t)).c;if(!(g&&b&&g[0]&&b[0]))return!d.s||!e.s||g&&!g[0]&&!b||b&&!b[0]&&!g?e.c=e.e=e.s=null:(e.s*=d.s,g&&b?(e.c=[0],e.e=0):e.c=e.e=null),e;for(n=J(d.e/Q)+J(e.e/Q),e.s*=d.s,(s=g.length)<(f=b.length)&&(v=g,g=b,b=v,i=s,s=f,f=i),i=s+f,v=[];i--;v.push(0));for(m=Z,y=Y,i=f;--i>=0;){for(r=0,h=b[i]%y,p=b[i]/y|0,o=i+(a=s);o>i;)r=((l=h*(l=g[--a]%y)+(u=p*l+(c=g[a]/y|0)*h)%y*y+v[o]+r)/m|0)+(u/y|0)+p*c,v[o--]=l%m;v[o]=r}return r?++n:v.splice(0,1),C(e,v,n)},h.negated=function(){var e=new S(this);return e.s=-e.s||null,e},h.plus=function(e,t){var r,n=this,i=n.s;if(t=(e=new S(e,t)).s,!i||!t)return new S(NaN);if(i!=t)return e.s=-t,n.minus(e);var o=n.e/Q,a=e.e/Q,u=n.c,s=e.c;if(!o||!a){if(!u||!s)return new S(i/0);if(!u[0]||!s[0])return s[0]?e:new S(u[0]?n:0*i)}if(o=J(o),a=J(a),u=u.slice(),i=o-a){for(i>0?(a=o,r=s):(i=-i,r=u),r.reverse();i--;r.push(0));r.reverse()}for((i=u.length)-(t=s.length)<0&&(r=s,s=u,u=r,t=i),i=0;t;)i=(u[--t]=u[t]+s[t]+i)/Z|0,u[t]=Z===u[t]?0:u[t]%Z;return i&&(u=[i].concat(u),++a),C(e,u,a)},h.precision=h.sd=function(e,t){var r,n,i,o=this;if(null!=e&&e!==!!e)return K(e,1,W),null==t?t=m:K(t,0,8),T(new S(o),e,t);if(!(r=o.c))return null;if(n=(i=r.length-1)*Q+1,i=r[i]){for(;i%10==0;i/=10,n--);for(i=r[0];i>=10;i/=10,n++);}return e&&o.e+1>n&&(n=o.e+1),n},h.shiftedBy=function(e){return K(e,-9007199254740991,H),this.times("1e"+e)},h.squareRoot=h.sqrt=function(){var e,t,n,i,o,a=this,u=a.c,s=a.s,l=a.e,c=v+4,f=new S("0.5");if(1!==s||!u||!u[0])return new S(!s||s<0&&(!u||u[0])?NaN:u?a:1/0);if(0==(s=Math.sqrt(+R(a)))||s==1/0?(((t=z(u)).length+l)%2==0&&(t+="0"),s=Math.sqrt(+t),l=J((l+1)/2)-(l<0||l%2),n=new S(t=s==1/0?"5e"+l:(t=s.toExponential()).slice(0,t.indexOf("e")+1)+l)):n=new S(s+""),n.c[0])for((s=(l=n.e)+c)<3&&(s=0);;)if(o=n,n=f.times(o.plus(r(a,o,c,1))),z(o.c).slice(0,s)===(t=z(n.c)).slice(0,s)){if(n.e<l&&--s,"9999"!=(t=t.slice(s-3,s+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(T(n,n.e+v+2,1),e=!n.times(n).eq(a));break}if(!i&&(T(o,o.e+v+2,0),o.times(o).eq(a))){n=o;break}c+=4,s+=4,i=1}return T(n,n.e+v+1,m,e)},h.toExponential=function(e,t){return null!=e&&(K(e,0,W),e++),k(this,e,t,1)},h.toFixed=function(e,t){return null!=e&&(K(e,0,W),e=e+this.e+1),k(this,e,t)},h.toFormat=function(e,t,r){var n,i=this;if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=A;else if("object"!=typeof r)throw Error(j+"Argument not an object: "+r);if(n=i.toFixed(e,t),i.c){var o,a=n.split("."),u=+r.groupSize,s=+r.secondaryGroupSize,l=r.groupSeparator||"",c=a[0],f=a[1],h=i.s<0,p=h?c.slice(1):c,v=p.length;if(s&&(o=u,u=s,s=o,v-=o),u>0&&v>0){for(o=v%u||u,c=p.substr(0,o);o<v;o+=u)c+=l+p.substr(o,u);s>0&&(c+=l+p.slice(o)),h&&(c="-"+c)}n=f?c+(r.decimalSeparator||"")+((s=+r.fractionGroupSize)?f.replace(new RegExp("\\d{"+s+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):f):c}return(r.prefix||"")+n+(r.suffix||"")},h.toFraction=function(e){var t,n,i,o,a,u,s,l,c,f,h,v,y=this,d=y.c;if(null!=e&&(!(s=new S(e)).isInteger()&&(s.c||1!==s.s)||s.lt(p)))throw Error(j+"Argument "+(s.isInteger()?"out of range: ":"not an integer: ")+R(s));if(!d)return new S(y);for(t=new S(p),c=n=new S(p),i=l=new S(p),v=z(d),a=t.e=v.length-y.e-1,t.c[0]=V[(u=a%Q)<0?Q+u:u],e=!e||s.comparedTo(t)>0?a>0?t:c:s,u=b,b=1/0,s=new S(v),l.c[0]=0;f=r(s,t,0,1),1!=(o=n.plus(f.times(i))).comparedTo(e);)n=i,i=o,c=l.plus(f.times(o=c)),l=o,t=s.minus(f.times(o=t)),s=o;return o=r(e.minus(n),i,0,1),l=l.plus(o.times(c)),n=n.plus(o.times(i)),l.s=c.s=y.s,h=r(c,i,a*=2,m).minus(y).abs().comparedTo(r(l,n,a,m).minus(y).abs())<1?[c,i]:[l,n],b=u,h},h.toNumber=function(){return+R(this)},h.toPrecision=function(e,t){return null!=e&&K(e,1,W),k(this,e,t,2)},h.toString=function(e){var t,r=this,i=r.s,o=r.e;return null===o?i?(t="Infinity",i<0&&(t="-"+t)):t="NaN":(null==e?t=o<=y||o>=d?te(z(r.c),o):re(z(r.c),o,"0"):10===e&&F?t=re(z((r=T(new S(r),v+o+1,m)).c),r.e,"0"):(K(e,2,E.length,"Base"),t=n(re(z(r.c),o,"0"),10,e,i,!0)),i<0&&r.c[0]&&(t="-"+t)),t},h.valueOf=h.toJSON=function(){return R(this)},h._isBigNumber=!0,h[Symbol.toStringTag]="BigNumber",h[Symbol.for("nodejs.util.inspect.custom")]=h.valueOf,null!=t&&S.set(t),S}();const ie=ne;var oe=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;i(this,e),this.bytes=t,this.length=this.bytes.length,this.position=r,this.bitPos=n}return s(e,[{key:"clone",value:function(){return new e(this.bytes,this.position,this.bitPos)}},{key:"getBytes",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!(this.position>this.length)){var t=null!==e?this.position+e:this.length,r=this.bytes.slice(this.position,t);return this.position=t,this.bitPos=0,r}}},{key:"readString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;if(!(this.position>this.length)){-1===e&&(e=this.length-this.position);for(var t="",r=this.position;r<this.position+e;r++){var n=this.bytes[r];if(0===n)break;t+=String.fromCharCode(n)}return this.position+=e,this.bitPos=0,t}}},{key:"readInt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"be";if(!(this.position>this.length)){var r=0;if("be"===t)for(var n=this.position;n<this.position+e;n++)r<<=8,r|=this.bytes[n];else for(var i=this.position+e-1;i>=this.position;i--)r<<=8,r|=this.bytes[i];return this.position+=e,this.bitPos=0,r}}},{key:"readBits",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"be";if(!(this.position>this.length)){var r,n=0,i=0;for(n=this.bytes[this.position++]&(r=this.bitPos,"be"===t?(1<<8-r)-1:256-(1<<r)),"be"!==t&&(n>>>=this.bitPos),i=8-this.bitPos,this.bitPos=0;i<e;)"be"===t?n=n<<i|this.bytes[this.position++]:n|=this.bytes[this.position++]<<i,i+=8;if(i>e){var o=i-e;"be"===t?n>>>=o:n&=(1<<e)-1,i-=o,this.position--,this.bitPos=8-o}return n}}},{key:"continueUntil",value:function(e){if(!(this.position>this.length))if(this.bitPos=0,"number"!=typeof e){var t=e.length,r=e[t-1];this.position=t;for(var n,i=function(e,t){var r=new Array;return e.forEach((function(e,n){r[e]=t-n})),r}(e,t);this.position<this.length;){for(;this.position<this.length&&this.bytes[this.position++]!==r;);n=!0;for(var o=t-1;o>=0;o--)if(this.bytes[this.position-t+o]!==e[o]){n=!1,this.position+=i[e[o]];break}if(n){this.position-=t;break}}}else for(;++this.position<this.length&&this.bytes[this.position]!==e;);}},{key:"consumeWhile",value:function(e){for(;this.position<this.length&&this.bytes[this.position]===e;)this.position++;this.bitPos=0}},{key:"consumeIf",value:function(e){this.bytes[this.position]===e&&(this.position++,this.bitPos=0)}},{key:"moveForwardsBy",value:function(e){var t=this.position+e;if(t<0||t>this.length)throw new Error("Cannot move to position "+t+" in stream. Out of bounds.");this.position=t,this.bitPos=0}},{key:"moveBackwardsBy",value:function(e){var t=this.position-e;if(t<0||t>this.length)throw new Error("Cannot move to position "+t+" in stream. Out of bounds.");this.position=t,this.bitPos=0}},{key:"moveBackwardsByBits",value:function(e){if(e<=this.bitPos)this.bitPos-=e;else for(this.bitPos>0&&(e-=this.bitPos,this.bitPos=0);e>0;)this.moveBackwardsBy(1),this.bitPos=8,this.moveBackwardsByBits(e),e-=8}},{key:"moveTo",value:function(e){if(e<0||e>this.length)throw new Error("Cannot move to position "+e+" in stream. Out of bounds.");this.position=e,this.bitPos=0}},{key:"hasMore",value:function(){return this.position<this.length}},{key:"carve",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.position;return this.bitPos>0&&t++,this.bytes.slice(e,t)}}])}();function ae(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return ue(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ue(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var se={图像:[{name:"联合图像专家组图像",extension:"jpg,jpeg,jpe,thm,mpo",mime:"image/jpeg",description:"",signature:{0:255,1:216,2:255,3:[192,196,219,221,224,225,226,227,228,229,231,232,234,235,236,237,238,254]},extractor:function(e,t){for(var r=new oe(e.slice(t));r.hasMore();){var n=r.getBytes(2);if(255!==n[0])throw new Error(`Invalid marker while parsing JPEG at pos ${r.position}: ${n}`);var i=0;switch(n[1]){case 216:case 1:break;case 217:return r.carve();case 192:case 193:case 194:case 195:case 196:case 197:case 198:case 199:case 200:case 201:case 202:case 203:case 204:case 205:case 206:case 207:case 219:case 222:case 224:case 225:case 226:case 227:case 228:case 229:case 230:case 231:case 232:case 233:case 234:case 235:case 236:case 237:case 238:case 239:case 254:i=r.readInt(2,"be"),r.position+=i-2;break;case 223:r.position++;break;case 220:case 221:r.position+=2;break;case 218:i=r.readInt(2,"be"),r.position+=i-2,r.continueUntil(255);break;default:r.continueUntil(255)}}throw new Error("Unable to parse JPEG successfully")}},{name:"图形交换格式图像",extension:"gif",mime:"image/gif",description:"",signature:{0:71,1:73,2:70,3:56,4:[55,57],5:97},extractor:function(e,t){var r=new oe(e.slice(t));for(r.continueUntil([33,255]),r.continueUntil([33,249]),r.moveForwardsBy(2);r.hasMore();){for(r.moveForwardsBy(r.readInt(1)+1),r.moveForwardsBy(11);!Array.from(r.getBytes(2)).equals([33,249])&&(r.moveBackwardsBy(2),r.moveForwardsBy(r.readInt(1)),r.readInt(1));)r.moveBackwardsBy(1);if(59===r.readInt(1))break;r.moveForwardsBy(1)}return r.carve()}},{name:"便携式网络图形图像",extension:"png",mime:"image/png",description:"",signature:{0:137,1:80,2:78,3:71,4:13,5:10,6:26,7:10},extractor:function(e,t){var r=new oe(e.slice(t));r.moveForwardsBy(8);for(var n=0,i="";"IEND"!==i;)n=r.readInt(4,"be"),i=r.readString(4),r.moveForwardsBy(n+4);return r.carve()}},{name:"WEBP 图像",extension:"webp",mime:"image/webp",description:"",signature:{8:87,9:69,10:66,11:80},extractor:function(e,t){var r=new oe(e.slice(t));r.moveForwardsBy(4);var n=r.readInt(4,"le");return r.moveForwardsBy(n),r.carve()}},{name:"高效率图像文件格式",extension:"heic,heif",mime:"image/heif",description:"",signature:{0:0,1:0,2:0,3:[36,24],4:102,5:116,6:121,7:112,8:104,9:101,10:105,11:99},extractor:null},{name:"相机图像文件格式",extension:"crw",mime:"image/x-canon-crw",description:"",signature:{6:72,7:69,8:65,9:80,10:67,11:67,12:68,13:82},extractor:null},{name:"佳能 CR2 原始图像",extension:"cr2",mime:"image/x-canon-cr2",description:"",signature:[{0:73,1:73,2:42,3:0,8:67,9:82},{0:77,1:77,2:0,3:42,8:67,9:82}],extractor:null},{name:"标签图像文件格式图像",extension:"tif",mime:"image/tiff",description:"",signature:[{0:73,1:73,2:42,3:0},{0:77,1:77,2:0,3:42}],extractor:null},{name:"位图图像",extension:"bmp",mime:"image/bmp",description:"",signature:{0:66,1:77,7:0,9:0,14:[12,40,56,64,108,124],15:0,16:0,17:0},extractor:function(e,t){var r=new oe(e.slice(t));r.moveForwardsBy(2);var n=r.readInt(4,"le");return r.moveForwardsBy(n-6),r.carve()}},{name:"JPEG 扩展范围图像",extension:"jxr",mime:"image/vnd.ms-photo",description:"",signature:{0:73,1:73,2:188},extractor:null},{name:"Photoshop 图像",extension:"psd",mime:"image/vnd.adobe.photoshop",description:"",signature:{0:56,1:66,2:80,3:83,4:0,5:1,6:0,7:0,8:0,9:0,10:0,11:0},extractor:null},{name:"Photoshop 大型文档",extension:"psb",mime:"application/x-photoshop",description:"",signature:{0:56,1:66,2:80,3:83,4:0,5:2,6:0,7:0,8:0,9:0,10:0,11:0,12:0},extractor:null},{name:"Paint Shop Pro 图像",extension:"psp",mime:"image/psp",description:"",signature:[{0:80,1:97,2:105,3:110,4:116,5:32,6:83,7:104,8:111,9:112,10:32,11:80,12:114,13:111,14:32,15:73,16:109},{0:126,1:66,2:75,3:0}],extractor:null},{name:"GIMP 图像",extension:"xcf",mime:"image/x-xcf",description:"",signature:{0:103,1:105,2:109,3:112,4:32,5:120,6:99,7:102,8:32,9:[102,118],10:[105,48],11:[108,48],12:[101,49,50,51]},extractor:null},{name:"图标图像",extension:"ico",mime:"image/x-icon",description:"",signature:{0:0,1:0,2:1,3:0,4:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21],5:0,6:[16,32,48,64,128],7:[16,32,48,64,128],9:0,10:[0,1]},extractor:function(e,t){var r=new oe(e.slice(t));r.moveTo(4);var n=r.readInt(2,"le");r.moveForwardsBy(8+16*(n-1));var i=r.readInt(4,"le"),o=r.readInt(4,"le");return r.moveTo(o+i),r.carve()}},{name:"Radiance 高动态范围图像",extension:"hdr",mime:"image/vnd.radiance",description:"",signature:{0:35,1:63,2:82,3:65,4:68,5:73,6:65,7:78,8:67,9:69,10:10},extractor:null},{name:"索尼 ARW 图像",extension:"arw",mime:"image/x-raw",description:"",signature:{0:5,1:0,2:0,3:0,4:65,5:87,6:49,7:46},extractor:null},{name:"富士胶片原始图像",extension:"raf",mime:"image/x-raw",description:"",signature:{0:70,1:85,2:74,3:73,4:70,5:73,6:76,7:77,8:67,9:67,10:68,11:45,12:82,13:65,14:87},extractor:null},{name:"美能达 RAW 图像",extension:"mrw",mime:"image/x-raw",description:"",signature:{0:0,1:77,2:82,3:77},extractor:null},{name:"Adobe Bridge 缩略图缓存",extension:"bct",mime:"application/octet-stream",description:"",signature:{0:108,1:110,2:98,3:116,4:2,5:0,6:0,7:0},extractor:null},{name:"Microsoft 文档成像",extension:"mdi",mime:"image/vnd.ms-modi",description:"",signature:{0:69,1:80,2:42,3:0},extractor:null},{name:"联合图像专家组图像 (Base64 编码)",extension:"B64",mime:"application/octet-stream",description:"",signature:{0:47,1:57,2:106,3:47,4:52},extractor:null},{name:"便携式网络图形图像 (Base64 编码)",extension:"B64",mime:"application/octet-stream",description:"",signature:{0:105,1:86,2:66,3:79,4:82,5:119,6:48},extractor:null},{name:"AutoCAD 工程图",extension:"dwg,123d",mime:"application/acad",description:"",signature:{0:65,1:67,2:49,3:48,4:[48,49],5:[48,49,50,51,52,53],6:0},extractor:null},{name:"AutoCAD 工程图",extension:"dwg,dwt",mime:"application/acad",description:"",signature:[{0:65,1:67,2:49,3:48,4:49,5:56,6:0},{0:65,1:67,2:49,3:48,4:50,5:52,6:0},{0:65,1:67,2:49,3:48,4:50,5:55,6:0}],extractor:null},{name:"Targa 图像",extension:"tga",mime:"image/x-targa",description:"",signature:[{0:84,1:82,2:85,3:69,4:86,5:73,6:83,7:73,8:79,9:78,10:45,11:88,12:70,13:73,14:76,15:69,16:46}],extractor:function(e,t){var r=new oe(e);r.moveTo(t-8);var n=r.readInt(4,"le"),i=r.readInt(4,"le");function o(e,t){for(var n=0;n<e;n++){r.moveBackwardsBy(1);var i=r.readInt(t,"le")-1;if(r.moveBackwardsBy(t),i===n)break}}return r.moveBackwardsBy(8),n||i?n?(o(65535,2),r.moveBackwardsBy(n)):i&&(o(4294967295,4),r.moveBackwardsBy(6),r.moveBackwardsBy(i)):(function(){r.moveBackwardsBy(5);for(var e=0;e<1048576&&r.readInt(2,"le")*r.readInt(2,"le")*r.readInt(1)/8!=e-1;e++)r.moveBackwardsBy(6)}(),r.moveBackwardsBy(17)),r.carve(r.position,t+18)}}],视频:[{name:"Matroska 多媒体容器",extension:"mkv",mime:"video/x-matroska",description:"",signature:{31:109,32:97,33:116,34:114,35:111,36:115,37:107,38:97},extractor:null},{name:"WEBM 视频",extension:"webm",mime:"video/webm",description:"",signature:{0:26,1:69,2:223,3:163},extractor:null},{name:"Flash MP4 视频",extension:"f4v",mime:"video/mp4",description:"",signature:{4:102,5:116,6:121,7:112,8:[102,70],9:52,10:[118,86],11:32},extractor:null},{name:"MPEG-4 视频",extension:"mp4",mime:"video/mp4",description:"",signature:[{0:0,1:0,2:0,3:[24,32],4:102,5:116,6:121,7:112},{0:51,1:103,2:112,3:53},{0:0,1:0,2:0,3:28,4:102,5:116,6:121,7:112,8:109,9:112,10:52,11:50,16:109,17:112,18:52,19:49,20:109,21:112,22:52,23:50,24:105,25:115,26:111,27:109}],extractor:null},{name:"M4V 视频",extension:"m4v",mime:"video/x-m4v",description:"",signature:{0:0,1:0,2:0,3:28,4:102,5:116,6:121,7:112,8:77,9:52,10:86},extractor:null},{name:"Quicktime 视频",extension:"mov",mime:"video/quicktime",description:"",signature:{0:0,1:0,2:0,3:20,4:102,5:116,6:121,7:112},extractor:null},{name:"音频视频交错格式",extension:"avi",mime:"video/x-msvideo",description:"",signature:{0:82,1:73,2:70,3:70,8:65,9:86,10:73},extractor:null},{name:"Windows Media 视频",extension:"wmv",mime:"video/x-ms-wmv",description:"",signature:{0:48,1:38,2:178,3:117,4:142,5:102,6:207,7:17,8:166,9:217},extractor:null},{name:"MPEG 视频",extension:"mpg",mime:"video/mpeg",description:"",signature:{0:0,1:0,2:1,3:186},extractor:null},{name:"Flash 视频",extension:"flv",mime:"video/x-flv",description:"",signature:{0:70,1:76,2:86,3:1},extractor:function(e,t){var r=new oe(e.slice(t));r.moveForwardsBy(5);var n=r.readInt(4,"be");r.moveForwardsBy(n-9);for(var i=-11;r.hasMore();){var o=r.readInt(4,"be"),a=r.readInt(1);if([8,9,18].indexOf(a)<0){r.moveBackwardsBy(1);break}if(o!==i+11){r.moveBackwardsBy(i+11+5);break}i=r.readInt(3,"be"),r.moveForwardsBy(7+i)}return r.carve()}},{name:"OGG 视频",extension:"ogv,ogm,opus,ogx",mime:"video/ogg",description:"",signature:[{0:79,1:103,2:103,3:83,4:0,5:2,28:1,29:118,30:105,31:100,32:101,33:111},{0:79,1:103,2:103,3:83,4:0,5:2,28:128,29:116,30:104,31:101,32:111,33:114,34:97},{0:79,1:103,2:103,3:83,4:0,5:2,28:102,29:105,30:115,31:104,32:101,33:97,34:100}],extractor:null}],音频:[{name:"波形音频",extension:"wav",mime:"audio/x-wav",description:"",signature:{0:82,1:73,2:70,3:70,8:87,9:65,10:86,11:69},extractor:function(e,t){var r=new oe(e.slice(t));return r.moveTo(4),r.moveTo(r.readInt(4,"le")+8),r.carve()}},{name:"OGG 音频",extension:"ogg",mime:"audio/ogg",description:"",signature:{0:79,1:103,2:103,3:83},extractor:null},{name:"乐器数字接口音频",extension:"midi",mime:"audio/midi",description:"",signature:{0:77,1:84,2:104,3:100},extractor:null},{name:"MPEG-3 音频",extension:"mp3",mime:"audio/mpeg",description:"",signature:[{0:73,1:68,2:51},{0:255,1:251}],extractor:function(e,t){var r=new oe(e.slice(t)),n=["free",32e3,4e4,48e3,56e3,64e3,8e4,96e3,112e3,128e3,16e4,192e3,224e3,256e3,32e4,"bad"],i=[44100,48e3,32e3,"reserved"];if(r.getBytes(3).toString()===[73,68,51].toString()){r.moveTo(6);var o=r.readInt(1)<<21|r.readInt(1)<<14|r.readInt(1)<<7|r.readInt(1);r.moveForwardsBy(o)}else r.moveTo(0);for(;r.hasMore();){if(r.getBytes(3)===[84,65,71].toString()){r.moveForwardsBy(125);break}if(r.getBytes(2).toString()!==[255,251].toString()){r.moveBackwardsBy(2);break}var a=r.readInt(1),u=n[a>>4],s=i[(15&a)>>2],l=(2&a)>>1;if("free"===u||"bad"===u||"reserved"===s){r.moveBackwardsBy(1);break}var c=Math.floor(144*u/s+l);if(r.position+c>r.length){r.moveTo(r.length);break}r.moveForwardsBy(c-3)}return r.carve()}},{name:"MPEG-4 Part 14 音频",extension:"m4a",mime:"audio/m4a",description:"",signature:[{4:102,5:116,6:121,7:112,8:77,9:52,10:65},{0:77,1:52,2:65,3:32}],extractor:null},{name:"无损音频编解码器",extension:"flac",mime:"audio/x-flac",description:"",signature:{0:102,1:76,2:97,3:67},extractor:null},{name:"自适应多速率音频编解码器",extension:"amr",mime:"audio/amr",description:"",signature:{0:35,1:33,2:65,3:77,4:82,5:10},extractor:null},{name:"Audacity",extension:"au",mime:"audio/x-au",description:"",signature:{0:100,1:110,2:115,3:46,24:65,25:117,26:100,27:97,28:99,29:105,30:116,31:121,32:66,33:108,34:111,35:99,36:107,37:70,38:105,39:108,40:101},extractor:null},{name:"Audacity 区块",extension:"auf",mime:"application/octet-stream",description:"",signature:{0:65,1:117,2:100,3:97,4:99,5:105,6:116,7:121,8:66,9:108,10:111,11:99,12:107,13:70,14:105,15:108,16:101},extractor:null},{name:"音频交换文件",extension:"aif",mime:"audio/x-aiff",description:"",signature:{0:70,1:79,2:82,3:77,8:65,9:73,10:70,11:70},extractor:null},{name:"音频交换文件 (已压缩)",extension:"aifc",mime:"audio/x-aifc",description:"",signature:{0:70,1:79,2:82,3:77,8:65,9:73,10:70,11:67},extractor:null}],文档:[{name:"便携式文档格式",extension:"pdf",mime:"application/pdf",description:"",signature:{0:37,1:80,2:68,3:70},extractor:function(e,t){var r=new oe(e.slice(t));return r.continueUntil([37,37,69,79,70]),r.moveForwardsBy(5),r.consumeIf(13),r.consumeIf(10),r.carve()}},{name:"便携式文档格式 (Base64 编码)",extension:"B64",mime:"application/octet-stream",description:"",signature:{0:65,1:74,2:86,3:66,4:69,5:82,6:105},extractor:null},{name:"Adobe PostScript",extension:"ps,eps,ai,pfa",mime:"application/postscript",description:"",signature:{0:37,1:33,2:80,3:83,4:45,5:65,6:100,7:111,8:98,9:101},extractor:null},{name:"PostScript",extension:"ps",mime:"application/postscript",description:"",signature:{0:37,1:33},extractor:null},{name:"封装 PostScript",extension:"eps,ai",mime:"application/eps",description:"",signature:{0:197,1:208,2:211,3:198},extractor:null},{name:"富文本格式",extension:"rtf",mime:"application/rtf",description:"",signature:{0:123,1:92,2:114,3:116},extractor:function(e,t){var r=new oe(e.slice(t)),n=0;if(123!==r.readInt(1))throw new Error("Not a valid RTF file");for(n++;n>0&&r.hasMore();)switch(r.readInt(1)){case 123:n++;break;case 125:n--;break;case 92:r.consumeIf(92),r.position++}return r.carve()}},{name:"Microsoft Office 文档/OLE2",extension:"ole2,doc,xls,dot,ppt,xla,ppa,pps,pot,msi,sdw,db,vsd,msg",mime:"application/msword,application/vnd.ms-excel,application/vnd.ms-powerpoint",description:"Microsoft Office 文档",signature:{0:208,1:207,2:17,3:224,4:161,5:177,6:26,7:225},extractor:null},{name:"Microsoft Office 文档/OLE2 (Base64 编码)",extension:"B64",mime:"application/octet-stream",description:"",signature:{0:48,1:77,2:56,3:82,4:52,5:75,6:71,7:120},extractor:null},{name:"Microsoft Office 2007+ 文档",extension:"docx,xlsx,pptx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.openxmlformats-officedocument.presentationml.presentation",description:"",signature:{38:95,39:84,40:121,41:112,42:101,43:115,44:93,45:46,46:120,47:109,48:108},extractor:le},{name:"Microsoft Access 数据库",extension:"mdb,mda,mde,mdt,fdb,psa",mime:"application/msaccess",description:"",signature:{0:0,1:1,2:0,3:0,4:83,5:116,6:97,7:110,8:100,9:97,10:114,11:100,12:32,13:74,14:101,15:116},extractor:null},{name:"Microsoft Access 2007+ 数据库",extension:"accdb,accde,accda,accdu",mime:"application/msaccess",description:"",signature:{0:0,1:1,2:0,3:0,4:83,5:116,6:97,7:110,8:100,9:97,10:114,11:100,12:32,13:65,14:67,15:69,16:32},extractor:null},{name:"Microsoft OneNote 文档",extension:"one",mime:"application/onenote",description:"",signature:{0:228,1:82,2:92,3:123,4:140,5:216,6:167,7:77,8:174,9:177,10:83,11:120,12:208,13:41,14:150,15:211},extractor:null},{name:"Outlook Express 数据库",extension:"dbx",mime:"application/octet-stream",description:"",signature:{0:207,1:173,2:18,3:254,4:[48,197,198,199],11:17},extractor:null},{name:"个人存储表 (Outlook)",extension:"pst,ost,fdb,pab",mime:"application/octet-stream",description:"",signature:{0:33,1:66,2:68,3:78},extractor:null},{name:"Microsoft Exchange 数据库",extension:"edb",mime:"application/octet-stream",description:"",signature:{4:239,5:205,6:171,7:137,8:[32,35],9:6,10:0,11:0,12:[0,1],13:0,14:0,15:0},extractor:null},{name:"WordPerfect 文档",extension:"wpd,wp,wp5,wp6,wpp,bk!,wcm",mime:"application/wordperfect",description:"",signature:{0:255,1:87,2:80,3:67,7:[0,1,2],8:1,9:10},extractor:null},{name:"EPUB 电子书",extension:"epub",mime:"application/epub+zip",description:"",signature:{0:80,1:75,2:3,3:4,30:109,31:105,32:109,33:101,34:116,35:121,36:112,37:101,38:97,39:112,40:112,41:108,42:105,43:99,44:97,45:116,46:105,47:111,48:110,49:47,50:101,51:112,52:117,53:98,54:43,55:122,56:105,57:112},extractor:le}],应用程序:[{name:"Windows 便携式可执行文件",extension:"exe,dll,drv,vxd,sys,ocx,vbx,com,fon,scr",mime:"application/vnd.microsoft.portable-executable",description:"",signature:{0:77,1:90,3:[0,1,2],5:[0,1,2]},extractor:function(e,t){var r=new oe(e.slice(t));r.moveTo(60);var n=r.readInt(4,"le");r.moveTo(n),r.moveForwardsBy(6);var i=r.readInt(2,"le");r.moveForwardsBy(16);var o=523===r.readInt(2,"le")?112:96;r.moveForwardsBy(o-2),r.moveForwardsBy(32);var a=r.readInt(4,"le"),u=r.readInt(4,"le");if(a>0)return r.moveTo(a+u),r.carve();r.moveForwardsBy(88),r.moveForwardsBy(40*(i-1)),r.moveForwardsBy(16);var s=r.readInt(4,"le"),l=r.readInt(4,"le");return r.moveTo(l+s),r.carve()}},{name:"可执行与可链接格式",extension:"elf,bin,axf,o,prx,so",mime:"application/x-executable",description:"可执行与可链接格式文件。无标准文件扩展名。",signature:{0:127,1:69,2:76,3:70},extractor:function(e,t){var r=new oe(e.slice(t));r.moveForwardsBy(4);var n=1===r.readInt(1),i=1===r.readInt(1)?"le":"be";r.moveForwardsBy(n?26:34);var o=n?r.readInt(4,i):r.readInt(8,i);r.moveForwardsBy(10);var a=r.readInt(2,i),u=r.readInt(2,i);return r.moveTo(o),r.moveForwardsBy(a*u),r.carve()}},{name:"MacOS Mach-O 对象",extension:"dylib",mime:"application/octet-stream",description:"",signature:[{0:202,1:254,2:186,3:190,4:0,5:0,6:0,7:[1,2,3]},{0:206,1:250,2:237,3:254,4:7,5:0,6:0,7:0,8:[1,2,3]}],extractor:ce},{name:"MacOS Mach-O 64 位对象",extension:"dylib",mime:"application/octet-stream",description:"",signature:{0:207,1:250,2:237,3:254},extractor:ce},{name:"Adobe Flash",extension:"swf",mime:"application/x-shockwave-flash",description:"",signature:{0:[67,70],1:87,2:83},extractor:null},{name:"Java 类文件",extension:"class",mime:"application/java-vm",description:"",signature:{0:202,1:254,2:186,3:190},extractor:null},{name:"Dalvik 可执行文件",extension:"dex",mime:"application/octet-stream",description:"Android 使用的 Dalvik 可执行文件",signature:{0:100,1:101,2:120,3:10,4:48,5:51,6:53,7:0},extractor:null},{name:"Google Chrome 扩展程序",extension:"crx",mime:"application/crx",description:"Google Chrome 扩展程序或打包应用",signature:{0:67,1:114,2:50,3:52},extractor:null}],压缩文件:[{name:"PKZIP 压缩文件",extension:"zip",mime:"application/zip",description:"",signature:{0:80,1:75,2:[3,5,7],3:[4,6,8]},extractor:le},{name:"PKZIP 压缩文件 (Base64 编码)",extension:"B64",mime:"application/octet-stream",description:"",signature:{0:85,1:69,2:115,3:68,4:66,5:66},extractor:null},{name:"TAR 压缩文件",extension:"tar",mime:"application/x-tar",description:"",signature:{257:117,258:115,259:116,260:97,261:114},extractor:function(e,t){for(var r=new oe(e.slice(t)),n=function(){if(r.moveForwardsBy(257),r.getBytes(5).join("")!==[117,115,116,97,114].join(""))return r.moveBackwardsBy(262),1;r.moveBackwardsBy(138);var e=0;r.getBytes(11).forEach((function(t,r){e+=(t-48).toString()})),e=512*Math.ceil(parseInt(e,8)/512),r.moveForwardsBy(e+377)};r.hasMore()&&!n(););return r.consumeWhile(0),r.carve()}},{name:"Roshal 压缩文件",extension:"rar",mime:"application/x-rar-compressed",description:"",signature:{0:82,1:97,2:114,3:33,4:26,5:7,6:[0,1]},extractor:null},{name:"Gzip",extension:"gz",mime:"application/gzip",description:"",signature:{0:31,1:139,2:8},extractor:function(e,t){var r=new oe(e.slice(t));r.moveForwardsBy(3);var n=r.readInt(1);if(r.moveForwardsBy(4),r.readInt(1),r.moveForwardsBy(1),4&n){var i=r.readInt(2,"le");r.moveForwardsby(i)}return 8&n&&(r.continueUntil(0),r.moveForwardsBy(1)),16&n&&(r.continueUntil(0),r.moveForwardsBy(1)),2&n&&r.moveForwardsBy(2),ye(r),r.moveForwardsBy(8),r.carve()}},{name:"Bzip2",extension:"bz2",mime:"application/x-bzip2",description:"",signature:{0:66,1:90,2:104},extractor:function(e,t){for(var r=new oe(e.slice(t)),n=[[119,36,83,133,9],[238,72,167,10,18],[220,145,78,20,36],[185,34,156,40,72],[114,69,56,80,144],[187,146,41,194,132],[93,201,20,225,66],[46,228,138,112,161],[23,114,69,56,80]],i=0;i<n.length&&(r.continueUntil(n[i]),r.getBytes(5).join("")!==n[i].join(""));i++)r.moveTo(0);return r.moveForwardsBy(4),r.carve()}},{name:"7zip",extension:"7z",mime:"application/x-7z-compressed",description:"",signature:{0:55,1:122,2:188,3:175,4:39,5:28},extractor:null},{name:"Zlib Deflate",extension:"zlib",mime:"application/x-deflate",description:"",signature:{0:120,1:[1,156,218,94]},extractor:function(e,t){var r=new oe(e.slice(t));return r.moveForwardsBy(1),32&r.readInt(1)&&r.moveForwardsBy(4),ye(r),r.moveForwardsBy(4),r.carve()}},{name:"xz 压缩",extension:"xz",mime:"application/x-xz",description:"",signature:{0:253,1:55,2:122,3:88,4:90,5:0},extractor:function(e,t){var r=new oe(e.slice(t));return r.continueUntil([0,0,0,0,4,89,90]),r.moveForwardsBy(7),r.carve()}},{name:"Tarball",extension:"tar.z",mime:"application/x-gtar",description:"",signature:{0:31,1:[157,160]},extractor:null},{name:"ISO 磁盘镜像",extension:"iso",mime:"application/octet-stream",description:"ISO 9660 CD/DVD 镜像文件",signature:[{32769:67,32770:68,32771:48,32772:48,32773:49},{34817:67,34818:68,34819:48,34820:48,34821:49},{36865:67,36866:68,36867:48,36868:48,36869:49}],extractor:null},{name:"虚拟机磁盘",extension:"vmdk",mime:"application/vmdk,application/x-virtualbox-vmdk",description:"",signature:{0:75,1:68,2:77,3:86,5:0,6:0,7:0},extractor:null},{name:"虚拟硬盘驱动器",extension:"vhd",mime:"application/x-vhd",description:"",signature:{0:99,1:111,2:110,3:101,4:99,5:116,6:105,7:120},extractor:null},{name:"Macintosh 磁盘镜像",extension:"dmf,dmg",mime:"application/octet-stream",description:"",signature:{0:120,1:1,2:115,3:13,4:98,5:98,6:96,7:96},extractor:null},{name:"ARJ 压缩文件",extension:"arj",mime:"application/x-arj-compressed",description:"",signature:{0:96,1:234,8:[0,16,20],9:0,10:2},extractor:null},{name:"WinAce 压缩文件",extension:"ace",mime:"application/x-ace-compressed",description:"",signature:{7:42,8:42,9:65,10:67,11:69,12:42,13:42},extractor:null},{name:"Macintosh BinHex 编码文件",extension:"hqx",mime:"application/mac-binhex",description:"",signature:{11:109,12:117,13:115,14:116,15:32,16:98,17:101,18:32,19:99,20:111,21:110,22:118,23:101,24:114,25:116,26:101,27:100,28:32,29:119,30:105,31:116,32:104,33:32,34:66,35:105,36:110,37:72,38:101,39:120},extractor:null},{name:"ALZip 压缩文件",extension:"alz",mime:"application/octet-stream",description:"",signature:{0:65,1:76,2:90,3:1,4:10,5:0,6:0,7:0},extractor:null},{name:"KGB 压缩文件",extension:"kgb",mime:"application/x-kgb-compressed",description:"",signature:{0:75,1:71,2:66,3:95,4:97,5:114,6:99,7:104,8:32,9:45},extractor:null},{name:"Microsoft Cabinet",extension:"cab",mime:"vnd.ms-cab-compressed",description:"",signature:{0:77,1:83,2:67,3:70,4:0,5:0,6:0,7:0},extractor:null},{name:"Jar 压缩文件",extension:"jar",mime:"application/java-archive",description:"",signature:{0:95,1:39,2:168,3:137},extractor:null},{name:"Jar 压缩文件",extension:"jar",mime:"application/java-archive",description:"",signature:{0:80,1:75,2:3,3:4,4:20,5:0,6:8,7:0,8:8,9:0},extractor:le},{name:"lzop 压缩",extension:"lzop,lzo",mime:"application/x-lzop",description:"",signature:{0:137,1:76,2:90,3:79,4:0,5:13,6:10,7:26},extractor:function(e,t){var r=new oe(e.slice(t)),n=0,i=0;r.moveForwardsBy(9);var o=r.readInt(2,"be");r.moveForwardsBy(6);var a=r.readInt(4,"be");2048&o&&r.moveForwardsBy(4),2&a&&n++,512&a&&n++,1&a&&i++,256&a&&i++,r.moveForwardsBy(8),o>=2368&&r.moveForwardsBy(4);var u=r.readInt(1,"be");if(r.moveForwardsBy(u),64&a){var s=r.readInt(4,"be");r.moveForwardsBy(s)}for(r.moveForwardsBy(4);r.hasMore();){var l=r.readInt(4,"be");if(0===l)break;var c=r.readInt(4,"be"),f=l===c?i:i+n;r.moveForwardsBy(c+4*f)}return r.carve()}},{name:"Linux deb 软件包",extension:"deb",mime:"application/vnd.debian.binary-package",description:"",signature:{0:33,1:60,2:97,3:114,4:99,5:104,6:62},extractor:function(e,t){var r=new oe(e.slice(t));for(r.moveForwardsBy(8);r.hasMore();){r.moveForwardsBy(48);var n,i="",o=ae(r.getBytes(10));try{for(o.s();!(n=o.n()).done;){var a=n.value;i+=String.fromCharCode(a)}}catch(e){o.e(e)}finally{o.f()}i=parseInt(i.trim(),10),r.moveForwardsBy(2),r.moveForwardsBy(i)}return r.carve()}},{name:"Apple 磁盘镜像",extension:"dmg",mime:"application/x-apple-diskimage",description:"",signature:{0:120,1:1,2:115,3:13,4:98,5:98,6:96},extractor:null}],杂项:[{name:"UTF-8 文本",extension:"txt",mime:"text/plain",description:"UTF-8 编码的 Unicode 字节顺序标记，常见于文本文件，但不限于文本文件。",signature:{0:239,1:187,2:191},extractor:null},{name:"UTF-32 LE 文本",extension:"utf32le",mime:"charset/utf32le",description:"小端序 UTF-32 编码的 Unicode 字节顺序标记。",signature:{0:255,1:254,2:0,3:0},extractor:null},{name:"UTF-16 LE 文本",extension:"utf16le",mime:"charset/utf16le",description:"小端序 UTF-16 编码的 Unicode 字节顺序标记。",signature:{0:255,1:254},extractor:null},{name:"Web 开放字体格式",extension:"woff",mime:"application/font-woff",description:"",signature:{0:119,1:79,2:70,3:70,4:0,5:1,6:0,7:0},extractor:null},{name:"Web 开放字体格式 2",extension:"woff2",mime:"application/font-woff",description:"",signature:{0:119,1:79,2:70,3:50,4:0,5:1,6:0,7:0},extractor:null},{name:"嵌入式 OpenType 字体",extension:"eot",mime:"application/octet-stream",description:"",signature:[{8:2,9:0,10:1,34:76,35:80},{8:1,9:0,10:0,34:76,35:80},{8:2,9:0,10:2,34:76,35:80}],extractor:null},{name:"TrueType 字体",extension:"ttf",mime:"application/font-sfnt",description:"",signature:{0:0,1:1,2:0,3:0,4:0},extractor:null},{name:"OpenType 字体",extension:"otf",mime:"application/font-sfnt",description:"",signature:{0:79,1:84,2:84,3:79,4:0},extractor:null},{name:"SQLite",extension:"sqlite",mime:"application/x-sqlite3",description:"",signature:{0:83,1:81,2:76,3:105},extractor:function(e,t){var r=new oe(e.slice(t));r.moveTo(16);var n=r.readInt(2);r.moveTo(28);var i=r.readInt(4);return r.moveTo(n*i),r.carve()}},{name:"BitTorrent 链接",extension:"torrent",mime:"application/x-bittorrent",description:"",signature:[{0:100,1:56,2:58,3:97,4:110,5:110,6:111,7:117,8:110,9:99,10:101,11:35,12:35,13:58},{0:100,1:52,2:58,3:105,4:110,5:102,6:111,7:100,8:[52,53,54],9:58}],extractor:null},{name:"加密货币钱包",extension:"wallet",mime:"application/octet-stream",description:"",signature:{0:0,1:0,2:0,3:0,4:1,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:98,13:49,14:5,15:0},extractor:null},{name:"注册表片段",extension:"hbin",mime:"application/octet-stream",description:"",signature:{0:104,1:98,2:105,3:110,4:0},extractor:null},{name:"注册表脚本",extension:"rgs",mime:"application/octet-stream",description:"",signature:{0:72,1:75,2:67,3:82,4:13,5:10,6:92,7:123},extractor:null},{name:"WinNT 注册表配置单元",extension:"registry",mime:"application/octet-stream",description:"",signature:{0:114,1:101,2:103,3:102},extractor:null},{name:"Windows 事件日志",extension:"evt",mime:"application/octet-stream",description:"",signature:{0:48,1:0,2:0,3:0,4:76,5:102,6:76,7:101},extractor:function(e,t){var r=new oe(e.slice(t));r.moveTo(20);var n=r.readInt(4,"le");r.moveTo(n);var i=r.readInt(4,"le");return r.moveForwardsBy(i-4),r.carve()}},{name:"Windows 事件日志",extension:"evtx",mime:"application/octet-stream",description:"",signature:{0:69,1:108,2:102,3:70,4:105,5:108,6:101},extractor:function(e,t){var r=new oe(e.slice(t));r.moveTo(40);var n=r.readInt(4,"le")-44;for(r.moveForwardsBy(n);r.hasMore()&&r.getBytes(7).join("")===[69,108,102,67,104,110,107].join("");)r.moveForwardsBy(65529);return r.consumeWhile(0),r.carve()}},{name:"Windows 页面转储文件",extension:"dmp",mime:"application/octet-stream",description:"",signature:{0:80,1:65,2:71,3:69,4:68,5:85,6:[77,54],7:[80,52]},extractor:function(e,t){var r=new oe(e.slice(t));return r.moveTo(112),r.moveTo(4096*(r.readInt(4,"le")+1)),r.carve()}},{name:"Windows 预取文件",extension:"pf",mime:"application/x-pf",description:"",signature:{0:[17,23,26],1:0,2:0,3:0,4:83,5:67,6:67,7:65},extractor:function(e,t){var r=new oe(e.slice(t));return r.moveTo(12),r.moveTo(r.readInt(4,"be")),r.carve()}},{name:"Windows 预取文件 (Win 10)",extension:"pf",mime:"application/x-pf",description:"",signature:{0:77,1:65,2:77,3:4,7:0},extractor:function(e,t){var r=new oe(e.slice(t));return r.moveTo(r.readInt(4,"be")),r.carve()}},{name:"PList (XML)",extension:"plist",mime:"application/xml",description:"",signature:{39:60,40:33,41:68,42:79,43:67,44:84,45:89,46:80,47:69,48:32,49:112,50:108,51:105,52:115,53:116},extractor:function(e,t){var r=new oe(e.slice(t)),n=0;for(r.continueUntil([60,112,108,105,115,116]),r.moveForwardsBy(6),n++;n>0&&r.hasMore();)60===r.readInt(1)&&(r.getBytes(5).join("")===[112,108,105,115,116].join("")?n++:r.moveBackwardsBy(5),r.getBytes(7).join("")===[47,112,108,105,115,116,62].join("")?n--:r.moveBackwardsBy(7));return r.consumeIf(10),r.carve()}},{name:"PList (二进制)",extension:"bplist,plist,ipmeta,abcdp,mdbackup,mdinfo,strings,nib,ichat,qtz,webbookmark,webhistory",mime:"application/x-plist",description:"",signature:{0:98,1:112,2:108,3:105,4:115,5:116,6:48,7:48},extractor:null},{name:"MacOS X 钥匙串",extension:"keychain",mime:"application/octet-stream",description:"",signature:{0:107,1:121,2:99,3:104,4:0,5:1},extractor:function(e,t){var r=new oe(e.slice(t));return r.moveTo(20),r.moveForwardsBy(r.readInt(4)),r.carve()}},{name:"TCP 数据包",extension:"tcp",mime:"application/tcp",description:"",signature:{12:8,13:0,14:69,15:0,21:0,22:function(e){return e>=1&&e<=128},23:6},extractor:null},{name:"UDP 数据包",extension:"udp",mime:"application/udp",description:"",signature:{12:8,13:0,14:69,15:0,16:[0,1,2,3,4,5],22:function(e){return e>=1&&e<=128},23:17},extractor:null},{name:"已编译 HTML",extension:"chm,chw,chi",mime:"application/vnd.ms-htmlhelp",description:"",signature:{0:73,1:84,2:83,3:70,4:3,5:0,6:0,7:0},extractor:null},{name:"Windows 密码",extension:"pwl",mime:"application/octet-stream",description:"",signature:{0:227,1:130,2:133,3:150},extractor:null},{name:"Bitlocker 恢复密钥",extension:"bitlocker",mime:"application/octet-stream",description:"",signature:{0:255,1:254,2:66,3:0,4:105,5:0,6:116,7:0,8:76,9:0,10:111,11:0,12:99,13:0,14:107,15:0,16:101,17:0,18:114,19:0,20:32,21:0},extractor:null},{name:"证书",extension:"cer,cat,p7b,p7c,p7m,p7s,swz,rsa,crl,crt,der",mime:"application/pkix-cert",description:"",signature:{0:48,1:130,4:[6,10,48]},extractor:null},{name:"证书",extension:"cat,swz,p7m",mime:"application/vnd.ms-pki.seccat",description:"",signature:{0:48,1:131,2:function(e){return 0!==e},5:6,6:9},extractor:null},{name:"PGP 公钥环",extension:"pkr,gpg",mime:"application/pgp-keys",description:"",signature:{0:153,1:1,2:[13,162],3:4},extractor:null},{name:"PGP 私钥环",extension:"skr",mime:"application/pgp-keys",description:"",signature:[{0:149,1:1,2:207,3:4},{0:149,1:3,2:198,3:4},{0:149,1:5,2:134,3:4}],extractor:null},{name:"PGP Safe",extension:"pgd",mime:"application/pgp-keys",description:"",signature:{0:80,1:71,2:80,3:100,4:77,5:65,6:73,7:78,8:96,9:1,10:0},extractor:null},{name:"任务计划程序",extension:"job",mime:"application/octet-stream",description:"",signature:{0:[0,1,2,3],1:[5,6],2:1,3:0,20:70,21:0},extractor:null},{name:"Windows 快捷方式",extension:"lnk",mime:"application/x-ms-shortcut",description:"",signature:{0:76,1:0,2:0,3:0,4:1,5:20,6:2,7:0,8:0,9:0,10:0,11:0,12:192,13:0,14:0,15:0,16:0,17:0,18:0,19:70},extractor:function(e,t){var r=new oe(e.slice(t));return r.moveTo(52),r.moveTo(r.readInt(4,"le")),r.carve()}},{name:"Bash",extension:"bash",mime:"application/bash",description:"",signature:{0:35,1:33,2:47,3:98,4:105,5:110,6:47,7:98,8:97,9:115,10:104},extractor:null},{name:"Shell",extension:"sh",mime:"application/sh",description:"",signature:{0:35,1:33,2:47,3:98,4:105,5:110,6:47,7:115,8:104},extractor:null},{name:"Python",extension:"py,pyc,pyd,pyo,pyw,pyz",mime:"application/python",description:"",signature:{0:35,1:33,2:47,3:117,4:115,5:114,6:47,7:98,8:105,9:110,10:47,11:112,12:121,13:116,14:104,15:111,16:110,17:[50,51,10,13]},extractor:null},{name:"Ruby",extension:"rb",mime:"application/ruby",description:"",signature:{0:35,1:33,2:47,3:117,4:115,5:114,6:47,7:98,8:105,9:110,10:47,11:114,12:117,13:98,14:121},extractor:null},{name:"Perl",extension:"pl,pm,t,pod",mime:"application/perl",description:"",signature:{0:35,1:33,2:47,3:117,4:115,5:114,6:47,7:98,8:105,9:110,10:47,11:112,12:101,13:114,14:108},extractor:null},{name:"PHP",extension:"php,phtml,php3,php4,php5,php7,phps,php-s,pht,phar",mime:"application/php",description:"",signature:{0:60,1:63,2:112,3:104,4:112},extractor:null},{name:"Smile",extension:"sml",mime:"\tapplication/x-jackson-smile",description:"",signature:{0:58,1:41,2:10},extractor:null},{name:"Lua 字节码",extension:"luac",mime:"application/x-lua",description:"",signature:{0:27,1:76,2:117,3:97},extractor:null},{name:"WebAssembly 二进制文件",extension:"wasm",mime:"application/octet-stream",description:"",signature:{0:0,1:97,2:115,3:109},extractor:null}]};function le(e,t){var r=new oe(e.slice(t));r.continueUntil([80,75,5,6]),r.moveForwardsBy(20);var n=r.readInt(2,"le");return r.moveForwardsBy(n),r.carve()}function ce(e,t){var r="207250237254",n=new oe(e.slice(t)),i=n.getBytes(4).join("");return n.moveTo(function(e,t,r){var n=28;t&&(n+=4),e.moveTo(16);var i=e.readInt(4,r);return function(e,t,r,n){for(var i=0,o=0;o<n;o++){e.moveTo(t);var a=e.readInt(4,r);25===a?(e.moveTo(t+48),i+=e.readInt(8,r),e.moveTo(t+4),t+=e.readInt(4,r)):1===a&&(e.moveTo(t+36),i+=e.readInt(4,r),e.moveTo(t+4),t+=e.readInt(4,r))}return i}(e,n,r,i)}(n,function(e){return e===r||"254237250207"===e}(i),function(e){return"206250237254"===e||e===r}(i)?"le":"be")),n.carve()}for(var fe=new Array(288),he=0;he<fe.length;he++)fe[he]=he<=143?8:he<=255?9:he<=279?7:8;var pe=we(fe),ve=we(new Array(30).fill(5)),me=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];function ye(e){for(var t=0;!t;){t=e.readBits(1,"le");var r=e.readBits(2,"le");if(0===r){e.moveForwardsBy(1);var n=e.readInt(2,"le");e.moveForwardsBy(2+n)}else if(1===r)be(e,pe,ve);else{if(2!==r)throw new Error(`Invalid block type while parsing DEFLATE stream at pos ${e.position}`);for(var i=e.readBits(5,"le")+257,o=e.readBits(5,"le")+1,a=e.readBits(4,"le")+4,u=new Uint8Array(me.length),s=0;s<a;s++)u[me[s]]=e.readBits(3,"le");for(var l=we(u),c=new Uint8Array(i+o),f=void 0,h=void 0,p=void 0,v=0;v<i+o;)switch(f=xe(e,l)){case 16:for(h=3+e.readBits(2,"le");h--;)c[v++]=p;break;case 17:for(h=3+e.readBits(3,"le");h--;)c[v++]=0;p=0;break;case 18:for(h=11+e.readBits(7,"le");h--;)c[v++]=0;p=0;break;default:c[v++]=f,p=f}be(e,we(c.subarray(0,i)),we(c.subarray(i)))}}e.bitPos>0&&e.moveForwardsBy(1)}var de=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],ge=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];function be(e,t,r){for(var n,i=0;(n=xe(e,t))&&256!==n;){if(++i>1e4)throw new Error("Caught in probable infinite loop while parsing Huffman Block");n<256||(e.readBits(de[n-257],"le"),n=xe(e,r),e.readBits(ge[n],"le"))}}function we(e){for(var t=Math.max.apply(Math,e),r=Math.min.apply(Math,e),n=1<<t,i=new Uint32Array(n),o=1,a=0,u=2;o<=t;){for(var s=0;s<e.length;s++)if(e[s]===o){var l=void 0,c=void 0,f=void 0;for(l=0,c=a,f=0;f<o;f++)l=l<<1|1&c,c>>=1;for(var h=o<<16|s,p=l;p<n;p+=u)i[p]=h;a++}o++,a<<=1,u<<=1}return[i,t,r]}function xe(e,t){var r=n(t,2),i=r[0],o=r[1],a=i[e.readBits(o,"le")&(1<<o)-1],u=a>>>16;if(u>o)throw new Error(`Invalid Huffman Code length while parsing DEFLATE block at pos ${e.position}: ${u}`);return e.moveBackwardsByBits(o-u),65535&a}function Be(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(e.length){for(var n=0;n<e.length;n++)if(Ae(e[n],t,r))return!0;return!1}return Ae(e,t,r)}function Ae(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;for(var n in e){var i=parseInt(n,10)+r;switch(typeof e[n]){case"number":if(t[i]!==e[n])return!1;break;case"object":if(e[n].indexOf(t[i])<0)return!1;break;case"function":if(!e[n](t[i]))return!1;break;default:throw new Error(`Unrecognised signature type at offset ${n}`)}}return!0}const Ee=function(){return s((function e(){i(this,e)}),null,[{key:"checkForValue",value:function(e){if(void 0===e)throw new Error("only use translation methods with .bind")}},{key:"toArrayBuffer",value:function(){throw new Error("toArrayBuffer has not been implemented")}},{key:"fromArrayBuffer",value:function(){throw new Error("fromArrayBuffer has not been implemented")}}])}();function Fe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Fe=function(){return!!e})()}const Se=function(e){function t(){return i(this,t),e=this,n=arguments,r=f(r=t),c(e,Fe()?Reflect.construct(r,n||[],f(e).constructor):r.apply(e,n));var e,r,n}return p(t,e),s(t,null,[{key:"toArrayBuffer",value:function(){t.checkForValue(this.value),this.value=new Uint8Array(this.value).buffer}},{key:"fromArrayBuffer",value:function(){t.checkForValue(this.value),this.value=Array.prototype.slice.call(new Uint8Array(this.value))}}])}(Ee);function ke(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ke=function(){return!!e})()}const Ie=function(e){function t(){return i(this,t),e=this,n=arguments,r=f(r=t),c(e,ke()?Reflect.construct(r,n||[],f(e).constructor):r.apply(e,n));var e,r,n}return p(t,e),s(t,null,[{key:"toArrayBuffer",value:function(){t.checkForValue(this.value),this.value=ie.isBigNumber(this.value)?P.strToArrayBuffer(this.value.toFixed()):new ArrayBuffer}},{key:"fromArrayBuffer",value:function(){t.checkForValue(this.value);try{this.value=new ie(P.arrayBufferToStr(this.value))}catch(e){this.value=new ie(NaN)}}}])}(Ee);function Ce(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ce=function(){return!!e})()}const Te=function(e){function t(){return i(this,t),e=this,n=arguments,r=f(r=t),c(e,Ce()?Reflect.construct(r,n||[],f(e).constructor):r.apply(e,n));var e,r,n}return p(t,e),s(t,null,[{key:"toArrayBuffer",value:function(){var e=this;if(t.checkForValue(this.value),!L())return new Promise((function(t,r){P.readFile(e.value).then((function(t){return e.value=t.buffer})).then(t).catch(r)}));this.value=P.readFileSync(this.value)}},{key:"fromArrayBuffer",value:function(){t.checkForValue(this.value),this.value=new File(this.value,"unknown")}}])}(Ee);function Re(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Re=function(){return!!e})()}const Oe=function(e){function t(){return i(this,t),e=this,n=arguments,r=f(r=t),c(e,Re()?Reflect.construct(r,n||[],f(e).constructor):r.apply(e,n));var e,r,n}return p(t,e),s(t,null,[{key:"toArrayBuffer",value:function(){t.checkForValue(this.value),this.value=this.value?P.strToArrayBuffer(this.value):new ArrayBuffer}},{key:"fromArrayBuffer",value:function(){t.checkForValue(this.value),this.value=this.value?P.arrayBufferToStr(this.value):""}}])}(Ee);function Le(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Le=function(){return!!e})()}const Me=function(e){function t(){return i(this,t),e=this,n=arguments,r=f(r=t),c(e,Le()?Reflect.construct(r,n||[],f(e).constructor):r.apply(e,n));var e,r,n}return p(t,e),s(t,null,[{key:"toArrayBuffer",value:function(){t.checkForValue(this.value),this.value=this.value?P.strToArrayBuffer(P.unescapeHtml(P.stripHtmlTags(this.value,!0))):new ArrayBuffer}}])}(Oe);function Ue(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ue=function(){return!!e})()}const Pe=function(e){function t(){return i(this,t),e=this,n=arguments,r=f(r=t),c(e,Ue()?Reflect.construct(r,n||[],f(e).constructor):r.apply(e,n));var e,r,n}return p(t,e),s(t,null,[{key:"toArrayBuffer",value:function(){t.checkForValue(this.value),this.value=void 0!==this.value?P.strToArrayBuffer(JSON.stringify(this.value,null,4)):new ArrayBuffer}},{key:"fromArrayBuffer",value:function(){t.checkForValue(this.value),this.value=JSON.parse(P.arrayBufferToStr(this.value))}}])}(Ee);function De(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(De=function(){return!!e})()}var Ne=function(e){function t(){return i(this,t),e=this,n=arguments,r=f(r=t),c(e,De()?Reflect.construct(r,n||[],f(e).constructor):r.apply(e,n));var e,r,n}return p(t,e),s(t,null,[{key:"toArrayBuffer",value:(n=m(d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.checkForValue(this.value),!L()){e.next=5;break}this.value=this.value.map((function(e){return Uint8Array.from(e.data)})),e.next=8;break;case 5:return e.next=7,t.concatenateTypedArraysWithTypedElements.apply(t,g(this.value));case 7:this.value=e.sent;case 8:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"fromArrayBuffer",value:function(){t.checkForValue(this.value),this.value=[new File(this.value,"unknown")]}},{key:"concatenateTypedArraysWithTypedElements",value:(r=m(d().mark((function e(){var t,r,n,i,o,a,u,s,l,c,f,h,p,v=arguments;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=0,r=v.length,n=new Array(r),i=0;i<r;i++)n[i]=v[i];for(o=0,a=n;o<a.length;o++)u=a[o],t+=u.size;s=new Uint8Array(t),l=0,c=0,f=n;case 6:if(!(c<f.length)){e.next=16;break}return h=f[c],e.next=10,P.readFile(h);case 10:p=e.sent,s.set(p,l),l+=p.length;case 13:c++,e.next=6;break;case 16:return e.abrupt("return",s);case 17:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)})},{key:"concatenateTypedArrays",value:function(){for(var e=0,t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];for(var i=0,o=r;i<o.length;i++)e+=o[i].length;for(var a=new Uint8Array(e),u=0,s=0,l=r;s<l.length;s++){var c=l[s];a.set(c,u),u+=c.length}return a}}]);var r,n}(Ee);const _e=Ne;function $e(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($e=function(){return!!e})()}const Xe=function(e){function t(){return i(this,t),e=this,n=arguments,r=f(r=t),c(e,$e()?Reflect.construct(r,n||[],f(e).constructor):r.apply(e,n));var e,r,n}return p(t,e),s(t,null,[{key:"toArrayBuffer",value:function(){t.checkForValue(this.value),this.value="number"==typeof this.value?P.strToArrayBuffer(this.value.toString()):new ArrayBuffer}},{key:"fromArrayBuffer",value:function(){t.checkForValue(this.value),this.value=this.value?parseFloat(P.arrayBufferToStr(this.value)):0}}])}(Ee);var je=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(i(this,e),this.value=new ArrayBuffer(0),this.type=e.ARRAY_BUFFER,t&&Object.prototype.hasOwnProperty.call(t,"value")&&Object.prototype.hasOwnProperty.call(t,"type"))this.set(t.value,t.type);else if(t&&null!==r)this.set(t,r);else if(t){var n=e.typeEnum(t.constructor.name);this.set(t,n)}}return s(e,[{key:"get",value:function(t){var r=this;return"string"==typeof t&&(t=e.typeEnum(t)),this.type!==t?L()?(this._translate(t),this.value):new Promise((function(e,n){r._translate(t).then((function(){e(r.value)})).catch(n)})):this.value}},{key:"set",value:function(t,r){if("string"==typeof r&&(r=e.typeEnum(r)),w().debug("Dish type: "+e.enumLookup(r)),this.value=t,this.type=r,!this.valid()){var n=P.truncate(JSON.stringify(this.value),25);throw new N(`Data is not a valid ${e.enumLookup(r)}: ${n}`)}}},{key:"presentAs",value:function(e){return this.clone().get(e)}},{key:"detectDishType",value:function(){var e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.keys(se);if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),!(e&&e.length>1))return[];var r=[],n={};for(var i in se)t.includes(i)&&(n[i]=se[i]);for(var o in n)n[o].forEach((function(t){Be(t.signature,e)&&r.push(t)}));return r}(new Uint8Array(this.value.slice(0,2048)));return e.length&&e[0].mime&&"text/plain"===e[0].mime?e[0].mime:null}},{key:"getTitle",value:(t=m(d().mark((function t(r){var n,i;return d().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n="",t.t0=this.type,t.next=t.t0===e.FILE?4:t.t0===e.LIST_FILE?6:t.t0===e.JSON?8:t.t0===e.NUMBER||t.t0===e.BIG_NUMBER?10:t.t0===e.ARRAY_BUFFER||t.t0===e.BYTE_ARRAY?12:15;break;case 4:return n=this.value.name,t.abrupt("break",26);case 6:return n=`${this.value.length} file(s)`,t.abrupt("break",26);case 8:return n="application/json",t.abrupt("break",26);case 10:return n=this.value.toString(),t.abrupt("break",26);case 12:if(null===(n=this.detectDishType())){t.next=15;break}return t.abrupt("break",26);case 15:return t.prev=15,(i=this.clone()).value=i.value.slice(0,256),t.next=20,i.get(e.STRING);case 20:n=t.sent,t.next=26;break;case 23:t.prev=23,t.t1=t.catch(15),w().error(`${e.enumLookup(this.type)} cannot be sliced. ${t.t1}`);case 26:return t.abrupt("return",n.slice(0,r));case 27:case"end":return t.stop()}}),t,this,[[15,23]])}))),function(e){return t.apply(this,arguments)})},{key:"valid",value:function(){switch(this.type){case e.BYTE_ARRAY:if(!(this.value instanceof Uint8Array||this.value instanceof Array))return!1;for(var t=0;t<this.value.length;t++)if("number"!=typeof this.value[t]||this.value[t]<0||this.value[t]>255)return!1;return!0;case e.STRING:case e.HTML:return"string"==typeof this.value;case e.NUMBER:return"number"==typeof this.value;case e.ARRAY_BUFFER:return this.value instanceof ArrayBuffer;case e.BIG_NUMBER:if(ie.isBigNumber(this.value))return!0;if(Object.keys(this.value).sort().equals(["c","e","s"])){var r=new ie;return r.c=this.value.c,r.e=this.value.e,r.s=this.value.s,this.value=r,!0}return!1;case e.JSON:return!0;case e.FILE:return this.value instanceof File;case e.LIST_FILE:return this.value instanceof Array&&this.value.reduce((function(e,t){return e&&t instanceof File}),!0);default:return!1}}},{key:"size",get:function(){switch(this.type){case e.BYTE_ARRAY:case e.STRING:case e.HTML:return this.value.length;case e.NUMBER:case e.BIG_NUMBER:return this.value.toString().length;case e.ARRAY_BUFFER:return this.value.byteLength;case e.JSON:return JSON.stringify(this.value).length;case e.FILE:return this.value.size;case e.LIST_FILE:return this.value.reduce((function(e,t){return e+t.size}),0);default:return-1}}},{key:"clone",value:function(){var t=new e;switch(this.type){case e.STRING:case e.HTML:case e.NUMBER:case e.BIG_NUMBER:t.set(this.value,this.type);break;case e.BYTE_ARRAY:case e.JSON:t.set(JSON.parse(JSON.stringify(this.value)),this.type);break;case e.ARRAY_BUFFER:t.set(this.value.slice(0),this.type);break;case e.FILE:t.set(new File([this.value],this.value.name,{type:this.value.type,lastModified:this.value.lastModified}),this.type);break;case e.LIST_FILE:t.set(this.value.map((function(e){return new File([e],e.name,{type:e.type,lastModified:e.lastModified})})),this.type);break;default:throw new N("Cannot clone Dish, unknown type")}return t}},{key:"_translate",value:function(t){var r=this;if(w().debug(`Translating Dish from ${e.enumLookup(this.type)} to ${e.enumLookup(t)}`),!L())return new Promise((function(n,i){r._toArrayBuffer().then((function(){return r.type=e.ARRAY_BUFFER})).then((function(){r._fromArrayBuffer(t),n()})).catch(i)}));this._toArrayBuffer(),this.type=e.ARRAY_BUFFER,this._fromArrayBuffer(t)}},{key:"_toArrayBuffer",value:function(){var t=this,r={browser:{[e.STRING]:function(){return Promise.resolve(Oe.toArrayBuffer.bind(t)())},[e.NUMBER]:function(){return Promise.resolve(Xe.toArrayBuffer.bind(t)())},[e.HTML]:function(){return Promise.resolve(Me.toArrayBuffer.bind(t)())},[e.ARRAY_BUFFER]:function(){return Promise.resolve()},[e.BIG_NUMBER]:function(){return Promise.resolve(Ie.toArrayBuffer.bind(t)())},[e.JSON]:function(){return Promise.resolve(Pe.toArrayBuffer.bind(t)())},[e.FILE]:function(){return Te.toArrayBuffer.bind(t)()},[e.LIST_FILE]:function(){return Promise.resolve(_e.toArrayBuffer.bind(t)())},[e.BYTE_ARRAY]:function(){return Promise.resolve(Se.toArrayBuffer.bind(t)())}},node:{[e.STRING]:function(){return Oe.toArrayBuffer.bind(t)()},[e.NUMBER]:function(){return Xe.toArrayBuffer.bind(t)()},[e.HTML]:function(){return Me.toArrayBuffer.bind(t)()},[e.ARRAY_BUFFER]:function(){},[e.BIG_NUMBER]:function(){return Ie.toArrayBuffer.bind(t)()},[e.JSON]:function(){return Pe.toArrayBuffer.bind(t)()},[e.FILE]:function(){return Te.toArrayBuffer.bind(t)()},[e.LIST_FILE]:function(){return _e.toArrayBuffer.bind(t)()},[e.BYTE_ARRAY]:function(){return Se.toArrayBuffer.bind(t)()}}};try{return r[L()?"node":"browser"][this.type]()}catch(t){throw new N(`Error translating from ${e.enumLookup(this.type)} to ArrayBuffer: ${t}`)}}},{key:"_fromArrayBuffer",value:function(t){var r=this,n={[e.STRING]:function(){return Oe.fromArrayBuffer.bind(r)()},[e.NUMBER]:function(){return Xe.fromArrayBuffer.bind(r)()},[e.HTML]:function(){return Me.fromArrayBuffer.bind(r)()},[e.ARRAY_BUFFER]:function(){},[e.BIG_NUMBER]:function(){return Ie.fromArrayBuffer.bind(r)()},[e.JSON]:function(){return Pe.fromArrayBuffer.bind(r)()},[e.FILE]:function(){return Te.fromArrayBuffer.bind(r)()},[e.LIST_FILE]:function(){return _e.fromArrayBuffer.bind(r)()},[e.BYTE_ARRAY]:function(){return Se.fromArrayBuffer.bind(r)()}};try{n[t](),this.type=t}catch(r){throw new N(`Error translating from ArrayBuffer to ${e.enumLookup(t)}: ${r}`)}}}],[{key:"typeEnum",value:function(t){switch(t.toLowerCase()){case"bytearray":case"byte array":return e.BYTE_ARRAY;case"string":return e.STRING;case"number":return e.NUMBER;case"html":return e.HTML;case"arraybuffer":case"array buffer":return e.ARRAY_BUFFER;case"bignumber":case"big number":return e.BIG_NUMBER;case"json":case"object":return e.JSON;case"file":return e.FILE;case"list<file>":return e.LIST_FILE;default:throw new N("Invalid data type string. No matching enum.")}}},{key:"enumLookup",value:function(t){switch(t){case e.BYTE_ARRAY:return"byteArray";case e.STRING:return"string";case e.NUMBER:return"number";case e.HTML:return"html";case e.ARRAY_BUFFER:return"ArrayBuffer";case e.BIG_NUMBER:return"BigNumber";case e.JSON:return"JSON";case e.FILE:return"File";case e.LIST_FILE:return"List<File>";default:throw new N("Invalid data type enum. No matching type.")}}}]);var t}();je.BYTE_ARRAY=0,je.STRING=1,je.NUMBER=2,je.HTML=3,je.ARRAY_BUFFER=4,je.BIG_NUMBER=5,je.JSON=6,je.FILE=7,je.LIST_FILE=8;const Ge=je,Ze=function(){function e(t){i(this,e),this.name="",this.type="",this._value=null,this.disabled=!1,this.hint="",this.rows=0,this.toggleValues=[],this.target=null,this.defaultIndex=0,this.maxLength=null,this.min=null,this.max=null,this.step=1,t&&this._parseConfig(t)}return s(e,[{key:"_parseConfig",value:function(e){this.name=e.name,this.type=e.type,this.defaultValue=e.value,this.disabled=!!e.disabled,this.hint=e.hint||!1,this.rows=e.rows||!1,this.toggleValues=e.toggleValues,this.target=void 0!==e.target?e.target:null,this.defaultIndex=void 0!==e.defaultIndex?e.defaultIndex:0,this.maxLength=e.maxLength||null,this.min=e.min,this.max=e.max,this.step=e.step}},{key:"config",get:function(){return this._value}},{key:"value",get:function(){return this._value},set:function(t){this._value=e.prepare(t,this.type)}}],[{key:"prepare",value:function(e,t){var r;switch(t){case"binaryString":case"binaryShortString":case"editableOption":case"editableOptionShort":return P.parseEscapedChars(e);case"byteArray":return"string"==typeof e?k(e=e.replace(/\s+/g,"")):e;case"number":if(null===e)return e;if(r=parseFloat(e),isNaN(r))throw"Invalid ingredient value. Not a number: "+P.truncate(e.toString(),10);return r;default:return e}}}])}();var Qe=function(){return s((function e(){i(this,e),this._inputType=-1,this._outputType=-1,this._presentType=-1,this._breakpoint=!1,this._disabled=!1,this._flowControl=!1,this._manualBake=!1,this._ingList=[],this.name="",this.module="",this.description="",this.infoURL=null}),[{key:"run",value:function(e,t){return e}},{key:"highlight",value:function(e,t){return!1}},{key:"highlightReverse",value:function(e,t){return!1}},{key:"present",value:function(e,t){return e}},{key:"inputType",get:function(){return Ge.enumLookup(this._inputType)},set:function(e){this._inputType=Ge.typeEnum(e)}},{key:"outputType",get:function(){return Ge.enumLookup(this._outputType)},set:function(e){this._outputType=Ge.typeEnum(e),this._presentType<0&&(this._presentType=this._outputType)}},{key:"presentType",get:function(){return Ge.enumLookup(this._presentType)},set:function(e){this._presentType=Ge.typeEnum(e)}},{key:"args",get:function(){return this._ingList.map((function(e){var t={name:e.name,type:e.type,value:e.defaultValue};return e.toggleValues&&(t.toggleValues=e.toggleValues),e.hint&&(t.hint=e.hint),e.rows&&(t.rows=e.rows),e.disabled&&(t.disabled=e.disabled),e.target&&(t.target=e.target),e.defaultIndex&&(t.defaultIndex=e.defaultIndex),e.maxLength&&(t.maxLength=e.maxLength),"number"==typeof e.min&&(t.min=e.min),"number"==typeof e.max&&(t.max=e.max),e.step&&(t.step=e.step),t}))},set:function(e){var t=this;e.forEach((function(e){var r=new Ze(e);t.addIngredient(r)}))}},{key:"config",get:function(){return{op:this.name,args:this._ingList.map((function(e){return e.config}))}}},{key:"addIngredient",value:function(e){this._ingList.push(e)}},{key:"ingValues",get:function(){return this._ingList.map((function(e){return e.value}))},set:function(e){var t=this;e.forEach((function(e,r){t._ingList[r].value=e}))}},{key:"breakpoint",get:function(){return this._breakpoint},set:function(e){this._breakpoint=!!e}},{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=!!e}},{key:"flowControl",get:function(){return this._flowControl},set:function(e){this._flowControl=!!e}},{key:"manualBake",get:function(){return this._manualBake},set:function(e){this._manualBake=!!e}}])}();const He=Qe;function Ve(e,t,r){return t=f(t),c(e,Ye()?Reflect.construct(t,r||[],f(e).constructor):t.apply(e,r))}function Ye(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ye=function(){return!!e})()}function We(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Je(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Je(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function Je(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var ze=[{name:"I",value:"EKMFLGDQVZNTOWYHXUSPAIBRCJ<R"},{name:"II",value:"AJDKSIRUXBLHWTMCQGZNPYFVOE<F"},{name:"III",value:"BDFHJLCPRTXVZNYEIWGAKMUSQO<W"},{name:"IV",value:"ESOVPZJAYQUIRHXLNFTGKDCMWB<K"},{name:"V",value:"VZBRGITYUPSDNHLXAWMJQOFECK<A"},{name:"VI",value:"JPGVOUMFYQBENHZRDKASXLICTW<AN"},{name:"VII",value:"NZJHGRCXMYSWBOUFAIVLPEKQDT<AN"},{name:"VIII",value:"FKQHTLXOCBJSPDZRAMEWNIUYGV<AN"}],qe=[{name:"Beta",value:"LEYJVCNIXWPBQMDRTAKZGFUHOS"},{name:"Gamma",value:"FSOKANUERHMBTIYCWLQPZXVGJD"}],Ke=[{name:"B",value:"AY BR CU DH EQ FS GL IP JX KN MO TZ VW"},{name:"C",value:"AF BV CP DJ EI GO HY KR LZ MX NW TQ SU"},{name:"B Thin",value:"AE BN CK DQ FU GY HW IJ LO MP RX SZ TV"},{name:"C Thin",value:"AR BD CO EJ FN GT HK IV LM PW QZ SX UY"}],et="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("");function tt(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=P.ord(e);if(r>=65&&r<=90)return r-65;if(t)return r>=97&&r<=122?r-97:-1;throw new E("a2i called on non-uppercase ASCII character")}function rt(e){if(e>=0&&e<26)return P.chr(e+65);throw new E("i2a called on value outside 0..25")}var nt=function(){return s((function e(t,r,n,o){if(i(this,e),!/^[A-Z]{26}$/.test(t))throw new E("Rotor wiring must be 26 unique uppercase letters");if(!/^[A-Z]{0,26}$/.test(r))throw new E("Rotor steps must be 0-26 unique uppercase letters");if(!/^[A-Z]$/.test(n))throw new E("Rotor ring setting must be exactly one uppercase letter");if(!/^[A-Z]$/.test(o))throw new E("Rotor initial position must be exactly one uppercase letter");this.map=new Array(26),this.revMap=new Array(26);for(var a={},u=0;u<et.length;u++){var s=tt(et[u]),l=tt(t[u]);this.map[s]=l,this.revMap[l]=s,a[l]=!0}if(Object.keys(a).length!==et.length)throw new E("Rotor wiring must have each letter exactly once");var c=tt(n);this.steps=new Set;var f,h=We(r);try{for(h.s();!(f=h.n()).done;){var p=f.value;this.steps.add(P.mod(tt(p)-c,26))}}catch(e){h.e(e)}finally{h.f()}if(this.steps.size!==r.length)throw new E("Rotor steps must be unique");this.pos=P.mod(tt(o)-c,26)}),[{key:"step",value:function(){return this.pos=P.mod(this.pos+1,26),this.pos}},{key:"transform",value:function(e){return P.mod(this.map[P.mod(e+this.pos,26)]-this.pos,26)}},{key:"revTransform",value:function(e){return P.mod(this.revMap[P.mod(e+this.pos,26)]-this.pos,26)}}])}(),it=function(){return s((function e(t){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"PairMapBase";i(this,e),this.pairs=t,this.map={},""!==t&&t.split(/\s+/).forEach((function(e){if(!/^[A-Z]{2}$/.test(e))throw new E(n+" must be a whitespace-separated list of uppercase letter pairs");var t=tt(e[0]),i=tt(e[1]);if(t!==i){if(Object.prototype.hasOwnProperty.call(r.map,t))throw new E(`${n} connects ${e[0]} more than once`);if(Object.prototype.hasOwnProperty.call(r.map,i))throw new E(`${n} connects ${e[1]} more than once`);r.map[t]=i,r.map[i]=t}}))}),[{key:"transform",value:function(e){return Object.prototype.hasOwnProperty.call(this.map,e)?this.map[e]:e}},{key:"revTransform",value:function(e){return this.transform(e)}}])}(),ot=function(e){function t(e){var r;if(i(this,t),r=Ve(this,t,[e,"Reflector"]),26!==Object.keys(r.map).length)throw new E("Reflector must have exactly 13 pairs covering every letter");for(var n=new Array(26),o=0,a=Object.keys(r.map);o<a.length;o++){var u=a[o];n[u]=r.map[u]}return r.map=n,r}return p(t,e),s(t,[{key:"transform",value:function(e){return this.map[e]}}])}(it),at=function(e){function t(e){return i(this,t),Ve(this,t,[e,"Plugboard"])}return p(t,e),s(t)}(it),ut=function(){return s((function e(t,r,n){i(this,e),this.rotors=t,this.rotorsRev=[].concat(t).reverse(),this.reflector=r,this.plugboard=n}),[{key:"step",value:function(){var e=this.rotors[0],t=this.rotors[1];e.step(),(e.steps.has(e.pos)||t.steps.has(P.mod(t.pos+1,26)))&&(t.step(),t.steps.has(t.pos)&&this.rotors[2].step())}},{key:"crypt",value:function(e){var t,r="",n=We(e);try{for(n.s();!(t=n.n()).done;){var i=t.value,o=tt(i,!0);if(-1!==o){this.step(),o=this.plugboard.transform(o);var a,u=We(this.rotors);try{for(u.s();!(a=u.n()).done;)o=a.value.transform(o)}catch(e){u.e(e)}finally{u.f()}o=this.reflector.transform(o);var s,l=We(this.rotorsRev);try{for(l.s();!(s=l.n()).done;)o=s.value.revTransform(o)}catch(e){l.e(e)}finally{l.f()}r+=rt(o=this.plugboard.revTransform(o))}else r+=i}}catch(e){n.e(e)}finally{n.f()}return r}}])}(),st=function(e){function t(e,r,n){var o;if(i(this,t),o=Ve(this,t,[e,r,n]),3!==e.length&&4!==e.length)throw new E("Enigma must have 3 or 4 rotors");return o}return p(t,e),s(t)}(ut);function lt(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return ct(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ct(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ft(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ft=function(){return!!e})()}var ht=function(e){function t(){return i(this,t),e=this,n=arguments,r=f(r=t),c(e,ft()?Reflect.construct(r,n||[],f(e).constructor):r.apply(e,n));var e,r,n}return p(t,e),s(t,[{key:"copy",value:function(){return{map:this.map,revMap:this.revMap,pos:this.pos,step:this.step,transform:this.transform,revTransform:this.revTransform}}}])}(nt),pt=s((function e(t){i(this,e),this.letter=t,this.edges=new Set,this.visited=!1})),vt=function(){return s((function e(t,r,n){i(this,e),this.pos=t,this.node1=r,this.node2=n,r.edges.add(this),n.edges.add(this),this.visited=!1}),[{key:"getOther",value:function(e){return this.node1===e?this.node2:this.node1}}])}(),mt=function(){return s((function e(t,r){i(this,e),this.lowerCache=new Array(26),this.higherCache=new Array(26);for(var n=0;n<26;n++)this.higherCache[n]=new Array(26);this.changeRotors(t,r)}),[{key:"changeRotors",value:function(e,t){this.reflector=t,this.rotors=e,this.rotorsRev=[].concat(e).reverse(),this.cacheGen()}},{key:"step",value:function(e){for(var t=0;t<e-1;t++)this.rotors[t].step();this.cacheGen()}},{key:"cacheGen",value:function(){for(var e=0;e<26;e++){this.lowerCache[e]=void 0;for(var t=0;t<26;t++)this.higherCache[e][t]=void 0}for(var r=0;r<26;r++)if(void 0===this.lowerCache[r]){var n,i=r,o=lt(this.rotors);try{for(o.s();!(n=o.n()).done;)i=n.value.transform(i)}catch(e){o.e(e)}finally{o.f()}i=this.reflector.transform(i);var a,u=lt(this.rotorsRev);try{for(u.s();!(a=u.n()).done;)i=a.value.revTransform(i)}catch(e){u.e(e)}finally{u.f()}this.lowerCache[r]=i,this.lowerCache[i]=r}}},{key:"transform",value:function(e){return this.lowerCache[e]}}])}(),yt=function(){return s((function e(t,r,n,o,a){i(this,e),this.baseScrambler=t,this.initialPos=n,this.changeRotor(r),this.end1=o,this.end2=a,this.cache=this.baseScrambler.higherCache[n]}),[{key:"changeRotor",value:function(e){this.rotor=e,this.rotor.pos+=this.initialPos}},{key:"step",value:function(){this.rotor.step(),this.cache=this.baseScrambler.higherCache[this.rotor.pos]}},{key:"transform",value:function(e){var t=e,r=this.cache[e];return void 0!==r?r:(t=this.rotor.transform(t),t=this.baseScrambler.transform(t),t=this.rotor.revTransform(t),this.cache[e]=t,this.cache[t]=e,t)}},{key:"getOtherEnd",value:function(e){return this.end1===e?this.end2:this.end1}},{key:"getPos",value:function(){var e="",t=P.mod(this.rotor.pos-1,26);e+=rt(t);for(var r=0;r<this.baseScrambler.rotors.length;r++)e+=rt(t=this.baseScrambler.rotors[r].pos);return e.split("").reverse().join("")}}])}(),dt=function(){return s((function e(t,r,o,a,u){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;if(i(this,e),o.length<a.length)throw new E("Crib overruns supplied ciphertext");if(a.length<2)throw new E("Crib is too short");if(a.length>25)throw new E("Crib is too long");for(var l=0;l<a.length;l++)if(o[l]===a[l])throw new E(`Invalid crib: character ${o[l]} at pos ${l} in both ciphertext and crib`);this.ciphertext=o,this.crib=a,this.initRotors(t),this.check=u,this.updateFn=s;var c=n(this.makeMenu(),2),f=c[0],h=c[1];this.wires=new Array(676),this.scramblers=new Array;for(var p=0;p<26;p++)this.scramblers.push(new Array);this.sharedScrambler=new mt(this.baseRotors.slice(1),r),this.allScramblers=new Array,this.indicator=void 0;var v,m=lt(h);try{for(m.s();!(v=m.n()).done;){var y=v.value,d=this.baseRotors[0].copy(),g=tt(y.node1.letter),b=tt(y.node2.letter),w=new yt(this.sharedScrambler,d,y.pos,g,b);0===y.pos&&(this.indicator=w),this.scramblers[g].push(w),this.scramblers[b].push(w),this.allScramblers.push(w)}}catch(e){m.e(e)}finally{m.f()}void 0===this.indicator&&(this.indicator=new yt(this.sharedScrambler,this.baseRotors[0].copy(),0,void 0,void 0),this.allScramblers.push(this.indicator)),this.testRegister=tt(f.letter);var x,B=lt(f.edges);try{for(B.s();!(x=B.n()).done;){var A=x.value;this.testInput=[this.testRegister,tt(A.getOther(f).letter)];break}}catch(e){B.e(e)}finally{B.f()}}),[{key:"initRotors",value:function(e){this.baseRotors=[];var t,r=lt(e);try{for(r.s();!(t=r.n()).done;){var n=t.value,i=new ht(n,"","A","A");this.baseRotors.push(i)}}catch(e){r.e(e)}finally{r.f()}}},{key:"changeRotors",value:function(e,t){this.initRotors(e),this.sharedScrambler.changeRotors(this.baseRotors.slice(1),t);var r,n=lt(this.allScramblers);try{for(n.s();!(r=n.n()).done;)r.value.changeRotor(this.baseRotors[0].copy())}catch(e){n.e(e)}finally{n.f()}}},{key:"update",value:function(){void 0!==this.updateFn&&this.updateFn.apply(this,arguments)}},{key:"dfs",value:function(e){var t=0,r=1,i=e,o=i.edges.size,a=new Set;e.visited=!0;var u,s=lt(e.edges);try{for(s.s();!(u=s.n()).done;){var l=u.value;if(!l.visited){l.visited=!0,a.add(l);var c=l.getOther(e);if(c.visited)t+=1;else{var f=n(this.dfs(c),5),h=f[0],p=f[1],v=f[2],m=f[3],y=f[4];t+=h,r+=p,a=new Set([].concat(g(a),g(y))),m>o&&(i=v,o=m)}}}}catch(e){s.e(e)}finally{s.f()}return[t,r,i,o,a]}},{key:"makeMenu",value:function(){var e,t=new Map,r=lt(this.ciphertext+this.crib);try{for(r.s();!(e=r.n()).done;){var n=e.value;if(!t.has(n)){var i=new pt(n);t.set(n,i)}}}catch(e){r.e(e)}finally{r.f()}for(var o=0;o<this.crib.length;o++){var a=this.crib[o],u=this.ciphertext[o];new vt(o,t.get(a),t.get(u))}var s,l=[],c=lt(t.keys());try{for(c.s();!(s=c.n()).done;){var f=s.value;if(!t.get(f).visited){var h=this.dfs(t.get(f));l.push(h)}}}catch(e){c.e(e)}finally{c.f()}return l.sort((function(e,t){var r=t[0]-e[0];return 0===r&&(r=t[1]-e[1]),r})),this.nLoops=l[0][0],[l[0][2],l[0][4]]}},{key:"energise",value:function(e,t){var r=26*e+t;if(!this.wires[r]){this.wires[r]=!0;var n=26*t+e;if(this.wires[n]=!0,e!==this.testRegister&&t!==this.testRegister||(this.energiseCount++,26!==this.energiseCount)){for(var i=0;i<this.scramblers[e].length;i++){var o=this.scramblers[e][i],a=o.transform(t),u=o.getOtherEnd(e),s=26*u+a;if(!this.wires[s]&&(this.energise(u,a),26===this.energiseCount))return}if(e!==t)for(var l=0;l<this.scramblers[t].length;l++){var c=this.scramblers[t][l],f=c.transform(e),h=c.getOtherEnd(t),p=26*h+f;if(!this.wires[p]&&(this.energise(h,f),26===this.energiseCount))return}}}}},{key:"tryDecrypt",value:function(e){for(var t=this.indicator.rotor,r=t.pos,n=[],i=new at(e),o=0;o<Math.min(26,this.ciphertext.length);o++){var a=this.indicator.transform(i.transform(tt(this.ciphertext[o])));n.push(rt(i.transform(a))),this.indicator.step(1)}return t.pos=r,n.join("")}},{key:"formatPair",value:function(e,t){return e<t?`${rt(e)}${rt(t)}`:`${rt(t)}${rt(e)}`}},{key:"checkingMachine",value:function(e){if(e!==this.testInput[1]){for(var t=0;t<this.wires.length;t++)this.wires[t]=!1;this.energiseCount=0,this.energise(this.testRegister,e)}var r=new Set;r.add(this.formatPair(this.testRegister,e));for(var n=0;n<26;n++){for(var i=0,o=void 0,a=0;a<26;a++)this.wires[26*n+a]&&(i++,o=a);if(i>1)return"";0!==i&&r.add(this.formatPair(n,o))}return g(r).join(" ")}},{key:"checkStop",value:function(){var e=this.energiseCount;if(26!==e){var t,r;if(25===e){for(var n=0;n<26;n++)if(!this.wires[26*this.testRegister+n]){t=n;break}}else{if(1!==e){if(!this.check)return[this.indicator.getPos(),"??",this.tryDecrypt("")];for(var i=void 0,o=0;o<26;o++){var a=this.checkingMachine(o);if(""!==a){if(void 0!==i)return[this.indicator.getPos(),"??",this.tryDecrypt("")];i=a}}if(void 0===i)return;return[this.indicator.getPos(),i,this.tryDecrypt(i)]}t=this.testInput[1]}if(this.check){if(""===(r=this.checkingMachine(t)))return}else r=`${rt(this.testRegister)}${rt(t)}`;var u=this.tryDecrypt(r);return[this.indicator.getPos(),r,u]}}},{key:"run",value:function(){for(var e=0,t=[],r=Math.pow(26,this.baseRotors.length),n=1;n<=r;n++){for(var i=0;i<this.wires.length;i++)this.wires[i]=!1;this.energiseCount=0,this.energise.apply(this,g(this.testInput));var o=this.checkStop();void 0!==o&&(e++,t.push(o));for(var a=1,u=1;u<this.baseRotors.length&&n%Math.pow(26,u)==0;u++)a++;a>1&&this.sharedScrambler.step(a);var s,l=lt(this.allScramblers);try{for(l.s();!(s=l.n()).done;)s.value.step()}catch(e){l.e(e)}finally{l.f()}a>3&&this.update(this.nLoops,e,n/r)}return t}}])}();function gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function bt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(bt=function(){return!!e})()}var wt=function(e){function t(){var e,r,n,o;return i(this,t),r=this,n=f(n=t),(e=c(r,bt()?Reflect.construct(n,[],f(r).constructor):n.apply(r,o))).name="Bombe",e.module="Bletchley",e.description="布莱切利园用于攻击 Enigma 密码机的 Bombe 机器的模拟，基于波兰和英国密码分析家的工作。<br><br>要运行此操作，你需要有一个“密文片段”（crib），即目标密文块的一些已知明文，并知道使用的转子。（如果你不知道转子，请参阅“Bombe (multiple runs)”操作。）该机器将建议 Enigma 的可能配置。每个建议都包含转子起始位置（从左到右）和已知的跳线板对。<br><br>选择密文片段：首先，请注意 Enigma 无法将字母加密为其自身，这使你可以排除一些可能的密文片段位置。其次，Bombe 不模拟 Enigma 的中间转子步进。你的密文片段越长，其中发生步进的可能性就越大，这将阻止攻击工作。但是，除此之外，较长的密文片段通常更好。该攻击产生一个“菜单”，该菜单将密文字母映射到明文，目标是产生“环路”：例如，对于密文 ABC 和密文片段 CAB，我们有映射 A&lt;-&gt;C、B&lt;-&gt;A 和 C&lt;-&gt;B，这产生一个环路 A-B-C-A。环路越多，密文片段越好。该操作将输出此内容：如果你的菜单环路太少或太短，通常会产生大量不正确的输出。尝试不同的密文片段。如果菜单看起来不错，但没有产生正确的答案，则你的密文片段可能不正确，或者你可能重叠了中间转子步进 - 请尝试不同的密文片段。<br><br>输出不足以完全解密数据。你必须通过检查来恢复其余的跳线板设置。并且没有考虑环位设置：这会影响中间转子何时步进。如果你的输出在一段时间内是正确的，然后出错，请同时调整右侧转子上的环和起始位置，直到输出改善。如有必要，对中间转子重复此操作。<br><br>默认情况下，此操作在每个停位上运行检查机，这是一个手动过程，用于验证 Bombe 停位的质量，并丢弃失败的停位。如果你想查看硬件对于给定输入实际停止了多少次，请禁用检查机。<br><br>有关 Enigma、Typex 和 Bombe 操作的更详细描述，<a href='https://github.com/gchq/CyberChef/wiki/Enigma,-the-Bombe,-and-Typex'>请点击此处</a>。",e.infoURL="https://wikipedia.org/wiki/Bombe",e.inputType="string",e.outputType="JSON",e.presentType="html",e.args=[{name:"模型",type:"argSelector",value:[{name:"3 转子",off:[1]},{name:"4 转子",on:[1]}]},{name:"最左侧（第四）转子",type:"editableOption",value:qe,defaultIndex:0},{name:"左侧转子",type:"editableOption",value:ze,defaultIndex:0},{name:"中间转子",type:"editableOption",value:ze,defaultIndex:1},{name:"右侧转子",type:"editableOption",value:ze,defaultIndex:2},{name:"反射器",type:"editableOption",value:Ke},{name:"密文片段",type:"string",value:""},{name:"密文片段偏移量",type:"number",value:0},{name:"使用检查机",type:"boolean",value:!0}],e}return p(t,e),s(t,[{key:"updateStatus",value:function(e,t,r){var n=`Bombe 运行，菜单中有 ${e} 个环路（期望 2+）：${t} 个停位，完成 ${Math.floor(100*r)}%`;self.sendStatusMessage(n)}},{key:"run",value:function(e,t){for(var r=t[0],n=t[5],i=t[6],o=t[7],a=t[8],u=[],s=0;s<4;s++)if(0!==s||"3 转子"!==r){var l=t[s+1];l.includes("<")&&(l=l.split("<",2)[0]),u.push(l)}if(u.reverse(),0===i.length)throw new E("Crib cannot be empty");if(o<0)throw new E("Offset cannot be negative");e=e.replace(/[^A-Za-z]/g,"").toUpperCase(),i=i.replace(/[^A-Za-z]/g,"").toUpperCase();var c,f=e.slice(o),h=new ot(n);c=U()?this.updateStatus:void 0;var p=new dt(u,h,f,i,a,c),v=p.run();return{nLoops:p.nLoops,result:v}}},{key:"present",value:function(e){var t=`Bombe 在菜单上运行，环路数为 ${e.nLoops} 个${1===e.nLoops?"":"s"}（期望 2+）。注意：转子位置从左到右列出，从密文片段的开头开始，并忽略步进和环设置。确定了一些跳线板设置。还提供了从密文片段开头开始并忽略步进的解密预览。\n\n`;t+="<table class='table table-hover table-sm table-bordered table-nonfluid'><tr><th>转子停位</th>  <th>部分跳线板</th>  <th>解密预览</th></tr>\n";var r,i=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return gt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gt(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}(e.result);try{for(i.s();!(r=i.n()).done;){var o=n(r.value,3);t+=`<tr><td>${o[0]}</td>  <td>${o[1]}</td>  <td>${o[2]}</td></tr>\n`}}catch(e){i.e(e)}finally{i.f()}return t+"</table>"}}])}(He);const xt=wt;var Bt=[{name:"Up (.)",value:"."},{name:"Centre",value:""},{name:"Down (x)",value:"x"}],At={A:"11000",B:"10011",C:"01110",D:"10010",E:"10000",F:"10110",G:"01011",H:"00101",I:"01100",J:"11010",K:"11110",L:"01001",M:"00111",N:"00110",O:"00011",P:"01101",Q:"11101",R:"01010",S:"10100",T:"00001",U:"11100",V:"01111",W:"11001",X:"10111",Y:"10101",Z:"10001",3:"00010",4:"01000",9:"00100","/":"00000"," ":"00100",".":"00100",8:"11111",5:"11011","-":"11111","+":"11011"},Et={S1:43,S2:47,S3:51,S4:53,S5:59,M37:37,M61:61,X1:41,X2:31,X3:29,X4:26,X5:23},Ft={"No Pattern":{X:{1:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],2:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],3:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],4:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],5:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},S:{1:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],2:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],3:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],4:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],5:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},M:{1:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],2:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},"KH Pattern":{X:{1:[0,1,0,0,0,1,1,1,0,1,0,1,1,1,1,0,1,0,0,0,1,0,1,0,0,1,1,1,0,0,0,0,1,1,0,1,1,1,1,0,0],2:[1,0,0,1,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,1,0,0,1,1,0,1,1,0,0],3:[0,0,1,1,0,0,1,0,1,1,1,0,0,0,1,1,0,0,0,1,1,0,0,1,1,0,1,1,0],4:[1,1,0,0,1,0,0,1,1,1,1,0,0,1,1,0,1,1,1,0,0,0,0,1,0,0],5:[1,1,0,0,1,1,0,0,0,0,1,1,1,1,0,1,0,0,1,0,1,0,0]},S:{1:[0,1,0,0,0,1,1,0,1,0,1,0,0,1,1,1,0,1,0,1,0,1,1,1,1,0,1,0,1,0,1,0,1,0,1,0,0,1,0,1,1,0,1],2:[0,1,1,0,1,0,1,1,1,0,0,1,0,1,0,1,0,0,1,0,1,1,0,1,0,1,1,1,0,1,0,0,0,0,1,0,1,1,0,1,0,1,0,1,0,0,1],3:[0,1,0,1,0,1,0,0,1,1,1,0,0,0,0,1,0,1,0,1,1,0,1,0,1,0,1,0,0,1,1,1,0,1,0,1,0,0,1,0,1,0,1,1,0,0,1,0,1,0,1],4:[0,1,1,0,0,0,1,1,1,1,1,0,1,0,1,0,1,1,0,0,0,1,0,1,1,0,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,1,0,1,0,1,0,1,0,1,0,1,0],5:[1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,1,0,0,1,1,1,1,0,1,0,1,0,0,0,1,1,0,1,0,0,1,0]},M:{1:[0,1,1,1,1,0,1,1,1,1,0,1,1,1,0,1,1,1,1,0,1,1,0,0,0,0,1,1,1,0,1,1,1,1,0,1,1,1,1,0,1,1,1,1,0,1,1,1,1,0,1,1,1,0,1,1,1,1,0,0,0],2:[1,0,1,0,1,0,1,0,1,0,1,0,0,0,1,0,1,0,1,0,0,0,1,0,1,0,1,0,0,0,1,0,1,0,0,0,0]}},"ZMUG Pattern":{X:{1:[0,1,1,0,1,1,0,0,0,1,1,0,1,1,0,0,1,0,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,0],2:[1,1,0,1,1,0,0,0,0,1,1,1,0,1,1,1,1,0,1,0,0,0,1,1,0,0,1,1,0,0,0],3:[0,0,1,0,0,1,1,0,0,0,1,1,0,0,0,1,1,1,0,0,0,1,1,0,1,1,1,1,0],4:[1,0,1,0,1,0,0,1,1,0,0,0,1,1,0,0,1,0,1,1,1,0,0,1,0,1],5:[0,1,0,0,1,1,1,1,0,0,0,1,0,1,1,1,0,0,0,0,1,0,1]},S:{1:[1,1,0,1,0,0,1,1,0,0,0,1,1,1,0,0,1,1,0,0,0,1,1,0,0,0,1,1,1,1,0,0,1,1,1,0,0,1,1,1,0,0,0],2:[0,0,0,1,0,0,0,1,1,1,0,0,1,1,0,0,1,1,1,0,0,0,1,1,1,1,0,0,0,1,1,0,0,1,1,1,0,0,1,1,1,0,0,1,0,1,1],3:[0,1,0,0,1,1,0,0,1,1,1,0,0,1,1,1,0,0,1,0,0,0,1,1,1,1,0,0,0,1,0,0,0,1,1,1,0,0,0,1,1,0,0,0,1,1,0,0,1,1,1],4:[0,0,1,1,1,0,0,1,1,0,0,1,1,1,0,0,1,1,1,1,0,0,0,1,0,0,0,1,1,0,0,1,1,1,0,0,1,0,0,1,1,0,0,0,1,1,0,0,1,1,1,0,1],5:[1,0,0,1,1,1,0,0,0,1,0,0,0,1,1,1,1,0,0,1,1,1,0,0,1,0,0,1,1,1,1,0,0,0,1,1,0,0,1,1,1,0,0,1,1,0,0,1,1,1,0,0,1,0,0,0,1,1,0]},M:{1:[1,0,1,1,0,1,0,1,1,1,0,1,1,1,0,1,0,1,0,1,1,1,0,1,1,0,1,1,0,1,1,0,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,0,1,0,1,1,1,1,0,1,0,1,0,1],2:[0,1,0,1,0,1,1,0,1,0,1,1,0,1,1,1,0,1,1,1,0,1,1,0,1,0,1,1,1,0,1,1,1,0,1,1,1]}},"BREAM Pattern":{X:{1:[0,1,1,1,1,0,1,0,1,1,0,1,0,1,1,0,0,1,0,0,1,1,0,1,0,0,0,0,1,1,0,0,0,0,1,1,1,1,0,0,0],2:[0,1,1,1,0,0,0,0,1,0,0,0,1,1,0,1,0,1,0,0,0,1,1,0,1,1,1,0,0,1,1],3:[1,1,0,0,1,1,0,1,1,0,0,1,1,1,0,0,0,0,1,0,0,1,1,0,1,1,1,0,0],4:[1,1,1,1,0,0,1,0,0,1,1,0,0,1,0,0,1,1,0,1,0,0,1,1,0,0],5:[0,1,1,1,0,1,1,1,0,0,0,1,0,0,1,1,0,1,0,0,0,1,0]},S:{1:[0,0,0,1,1,1,0,0,1,1,1,0,1,1,0,0,1,0,1,0,1,1,0,1,1,0,1,0,0,1,0,0,1,0,1,0,1,0,1,0,1,0,0],2:[1,1,0,1,0,0,1,1,1,0,0,0,0,0,1,1,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,1,0,1,0,1,0,1,0,1,1,0,1,0,0],3:[1,0,0,1,0,0,1,1,0,1,1,1,0,0,0,1,1,1,0,0,0,0,1,1,1,1,0,1,0,1,0,1,1,0,0,1,0,0,1,0,1,0,1,0,1,0,1,0,1,0,1],4:[0,1,0,0,0,0,1,0,0,1,0,1,1,1,1,1,0,1,1,0,0,1,1,0,0,1,1,0,0,0,0,1,0,1,1,0,1,0,1,0,1,0,1,0,1,0,1,1,0,0,1,0,1],5:[1,0,1,0,1,0,0,1,1,0,0,1,1,0,1,1,0,0,1,0,0,0,1,0,0,0,0,1,0,1,1,0,1,1,1,1,0,1,1,1,0,0,1,0,1,0,0,0,1,1,0,1,0,1,0,1,0,1,0]},M:{1:[1,0,0,0,0,1,1,0,0,0,1,1,0,0,1,1,0,1,1,1,1,0,0,0,0,1,1,0,0,0,1,1,0,1,1,0,1,0,1,1,1,1,0,0,0,1,1,0,0,1,1,0,0,1,1,0,1,0,1,1,1],2:[0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,1,1,0,1,0,1,0,0,1,0,1,0,1,0,1,0,1,1,1,0,1]}}},St=function(){return s((function e(t,r,n,o,a,u,s,l){for(var c in i(this,e),this.ITAlookup=At,this.ReverseITAlookup={},this.ITAlookup){var f=this.ITAlookup[c];this.ReverseITAlookup[f]=c}this.initThyratrons(r),this.ciphertext=t,this.qbusin=n,this.qbusswitches=o,this.control=a,this.starts=u,this.settotal=s,this.limitations=l,this.allCounters=[0,0,0,0,0],this.Zbits=[0,0,0,0,0],this.ZbitsOneBack=[0,0,0,0,0],this.Qbits=[0,0,0,0,0],this.Xbits=[0,0,0,0,0],this.Xptr=[0,0,0,0,0],this.XbitsOneBack=[0,0,0,0,0],this.Sbits=[0,0,0,0,0],this.Sptr=[0,0,0,0,0],this.SbitsOneBack=[0,0,0,0,0],this.Mptr=[0,0],this.rotorPtrs={},this.totalmotor=0,this.P5Zbit=[0,0]}),[{key:"run",value:function(){var e={printout:""};this.rotorPtrs={X1:this.starts.X1,X2:this.starts.X2,X3:this.starts.X3,X4:this.starts.X4,X5:this.starts.X5,M61:this.starts.M61,M37:this.starts.M37,S1:this.starts.S1,S2:this.starts.S2,S3:this.starts.S3,S4:this.starts.S4,S5:this.starts.S5};var t=1,r=this.control.fast,n=this.control.slow;e.printout+=r+" "+n+"\n";do{this.allCounters=[0,0,0,0,0],this.ZbitsOneBack=[0,0,0,0,0],this.XbitsOneBack=[0,0,0,0,0],this.runTape();var i="00",o="00";""!==r&&(i=this.rotorPtrs[r].toString().padStart(2,"0")),""!==n&&(o=this.rotorPtrs[n].toString().padStart(2,"0"));for(var a="",u=0;u<5;u++)this.allCounters[u]>this.settotal&&(a+=String.fromCharCode(u+97)+this.allCounters[u]+" ");""!==a&&(e.printout+=i+" "+o+" : ",e.printout+=a,e.printout+="\n"),""!==r&&(this.rotorPtrs[r]++,this.rotorPtrs[r]>Et[r]&&(this.rotorPtrs[r]=1)),""!==n&&this.rotorPtrs[r]===this.starts[r]&&(this.rotorPtrs[n]++,this.rotorPtrs[n]>Et[n]&&(this.rotorPtrs[n]=1)),t++}while(JSON.stringify(this.rotorPtrs)!==JSON.stringify(this.starts));return e.counters=this.allCounters,e.runcount=t,e}},{key:"runTape",value:function(){var e="";this.Xptr=[this.rotorPtrs.X1,this.rotorPtrs.X2,this.rotorPtrs.X3,this.rotorPtrs.X4,this.rotorPtrs.X5],this.Mptr=[this.rotorPtrs.M37,this.rotorPtrs.M61],this.Sptr=[this.rotorPtrs.S1,this.rotorPtrs.S2,this.rotorPtrs.S3,this.rotorPtrs.S4,this.rotorPtrs.S5];for(var t=0;t<this.ciphertext.length;t++){e=this.ciphertext.charAt(t),this.getQbusInputs(e);var r=this.runQbusProcessingConditional();this.runQbusProcessingAddition(r),this.P5Zbit[1]=this.P5Zbit[0],this.P5Zbit[0]=this.ITAlookup[e].split("")[4],this.stepThyratrons()}}},{key:"stepThyratrons",value:function(){var e=this.Xptr[1]-1;0===e&&(e=Et.X2);var t=this.Sptr[0]-1;0===t&&(t=Et.S1);var r=this.Xptr[4]-1;0===r&&(r=Et.X5),0==(r-=1)&&(r=Et.X5);var n=this.Sptr[4]-1;0===n&&(n=Et.S5),0==(n-=1)&&(n=Et.S5);var i=this.limitations.X2,o=this.limitations.S1,a=this.limitations.P5,u=1;if(i&&(u=this.rings.X[2][e-1]),o&&(u^=this.rings.S[1][t-1]),a){var s=this.P5Zbit[1];s^=this.rings.X[5][r-1],u^=s^=this.rings.S[5][n-1]}var l=this.rings.M[2][this.Mptr[0]-1];this.totalmotor=l,(i||o)&&(this.totalmotor=0===l&&1===u?0:1);for(var c=0;c<5;c++)this.Xptr[c]++,this.Xptr[c]>Et["X"+(c+1)]&&(this.Xptr[c]=1);if(this.totalmotor)for(var f=0;f<5;f++)this.Sptr[f]++,this.Sptr[f]>Et["S"+(f+1)]&&(this.Sptr[f]=1);1===this.rings.M[1][this.Mptr[1]-1]&&this.Mptr[0]++,this.Mptr[0]>Et.M37&&(this.Mptr[0]=1),this.Mptr[1]++,this.Mptr[1]>Et.M61&&(this.Mptr[1]=1)}},{key:"getQbusInputs",value:function(e){if(this.Zbits=this.ITAlookup[e].split(""),"Z"===this.qbusin.Z)this.Qbits=this.Zbits;else if("ΔZ"===this.qbusin.Z)for(var t=0;t<5;t++)this.Qbits[t]=this.Zbits[t]^this.ZbitsOneBack[t];this.ZbitsOneBack=this.Zbits.slice();for(var r=0;r<5;r++)this.Xbits[r]=this.rings.X[r+1][this.Xptr[r]-1];if(""!==this.qbusin.Chi)if("Χ"===this.qbusin.Chi)for(var n=0;n<5;n++)this.Qbits[n]=this.Qbits[n]^this.Xbits[n];else if("ΔΧ"===this.qbusin.Chi)for(var i=0;i<5;i++)this.Qbits[i]=this.Qbits[i]^this.Xbits[i],this.Qbits[i]=this.Qbits[i]^this.XbitsOneBack[i];this.XbitsOneBack=this.Xbits.slice();for(var o=0;o<5;o++)this.Sbits[o]=this.rings.S[o+1][this.Sptr[o]-1];if(""!==this.qbusin.Psi)if("Ψ"===this.qbusin.Psi)for(var a=0;a<5;a++)this.Qbits[a]=this.Qbits[a]^this.Sbits[a];else if("ΔΨ"===this.qbusin.Psi)for(var u=0;u<5;u++)this.Qbits[u]=this.Qbits[u]^this.Sbits[u],this.Qbits[u]=this.Qbits[u]^this.SbitsOneBack[u];this.SbitsOneBack=this.Sbits.slice()}},{key:"runQbusProcessingConditional",value:function(){for(var e=[-1,-1,-1,-1,-1],t=this.qbusswitches.condition.length,r=0;r<t;r++){var n=this.qbusswitches.condition[r];if(""!==n.Counter){for(var i=!0,o=n.Counter-1,a=this.readBusSwitches(n.Qswitches),u=0;u<5;u++)a[u]>=0&&a[u]!==parseInt(this.Qbits[u],10)&&(i=!1);n.Negate&&(i=!i),-1===e[o]?e[o]=i:i||(e[o]=!1)}}for(var s=0;s<5;s++)this.qbusswitches.condNegateAll&&-1!==e[s]&&(e[s]=!e[s]);return e}},{key:"runQbusProcessingAddition",value:function(e){var t=this.qbusswitches.addition[0],r=t.Qswitches.slice();if(t.C1){for(var n=0,i=0;i<5;i++)r[i]&&(n^=this.Qbits[i]);n===(""===t.Equals?-1:"."===t.Equals?0:1)?-1===e[0]&&(e[0]=!0):e[0]=!1}for(var o=0;o<5;o++)this.qbusswitches.addNegateAll&&-1!==e[o]&&(e[o]=!e[o]),(""===this.qbusswitches.totalMotor||"x"===this.qbusswitches.totalMotor&&0===this.totalmotor||"."===this.qbusswitches.totalMotor&&1===this.totalmotor)&&!0===e[o]&&this.allCounters[o]++}},{key:"initThyratrons",value:function(e){this.rings={X:{1:Ft[e].X[1].slice().reverse(),2:Ft[e].X[2].slice().reverse(),3:Ft[e].X[3].slice().reverse(),4:Ft[e].X[4].slice().reverse(),5:Ft[e].X[5].slice().reverse()},M:{1:Ft[e].M[1].slice().reverse(),2:Ft[e].M[2].slice().reverse()},S:{1:Ft[e].S[1].slice().reverse(),2:Ft[e].S[2].slice().reverse(),3:Ft[e].S[3].slice().reverse(),4:Ft[e].S[4].slice().reverse(),5:Ft[e].S[5].slice().reverse()}}}},{key:"readBusSwitches",value:function(e){for(var t=[-1,-1,-1,-1,-1],r=0;r<5;r++)"."===e[r]&&(t[r]=0),"x"===e[r]&&(t[r]=1);return t}}])}();function kt(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return It(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?It(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function It(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Ct(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Ct=function(){return!!e})()}const Tt=function(e){function t(){var e,r,n,o;return i(this,t),r=this,n=f(n=t),(e=c(r,Ct()?Reflect.construct(n,[],f(r).constructor):n.apply(r,o))).name="Colossus",e.module="Bletchley",e.description="科洛萨斯是世界上第一台电子计算机的名称。汤米·弗劳尔斯设计了十台科洛萨斯计算机，并在 1943 年二战期间于多利斯希尔的邮局研究实验室建造。它们协助破解了德国 Lorenz 密码机附件，这是一种为希特勒及其前线将军之间的通信加密而制造的机器。<br><br>要了解更多信息，请访问 <a href='https://virtualcolossus.co.uk' target='_blank'>virtualcolossus.co.uk</a>，Virtual Colossus 是一个在线的、基于浏览器的科洛萨斯计算机模拟器。<br><br>有关此操作的更详细描述，请访问 <a href='https://github.com/gchq/CyberChef/wiki/Colossus' target='_blank'>此处</a>。",e.infoURL="https://wikipedia.org/wiki/Colossus_computer",e.inputType="string",e.outputType="JSON",e.presentType="html",e.args=[{name:"输入",type:"label"},{name:"模式",type:"option",value:["KH Pattern","ZMUG Pattern","BREAM Pattern"]},{name:"QBusZ",type:"option",value:["","Z","ΔZ"]},{name:"QBusΧ",type:"option",value:["","Χ","ΔΧ"]},{name:"QBusΨ",type:"option",value:["","Ψ","ΔΨ"]},{name:"模式",type:"option",value:["None","Χ2","Χ2 + P5","X2 + Ψ1","X2 + Ψ1 + P5"]},{name:"K 支架选项",type:"argSelector",value:[{name:"选择程序",on:[7],off:[8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40]},{name:"顶部区域 - 条件",on:[8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30],off:[7,31,32,33,34,35,36,37,38,39,40]},{name:"底部区域 - 加法",on:[31,32,33,34,35,36,37,38,39,40],off:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30]},{name:"高级",on:[8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40],off:[7]}]},{name:"要运行的程序",type:"option",value:["","Letter Count","1+2=. (1+2 Break In, Find X1,X2)","4=5=/1=2 (Given X1,X2 find X4,X5)","/,5,U (Count chars to find X3)"]},{name:"K 支架：条件",type:"label"},{name:"R1-Q1",type:"editableOptionShort",value:Bt,defaultIndex:1},{name:"R1-Q2",type:"editableOptionShort",value:Bt,defaultIndex:1},{name:"R1-Q3",type:"editableOptionShort",value:Bt,defaultIndex:1},{name:"R1-Q4",type:"editableOptionShort",value:Bt,defaultIndex:1},{name:"R1-Q5",type:"editableOptionShort",value:Bt,defaultIndex:1},{name:"R1-Negate",type:"boolean",value:!1},{name:"R1-Counter",type:"option",value:["","1","2","3","4","5"]},{name:"R2-Q1",type:"editableOptionShort",value:Bt,defaultIndex:1},{name:"R2-Q2",type:"editableOptionShort",value:Bt,defaultIndex:1},{name:"R2-Q3",type:"editableOptionShort",value:Bt,defaultIndex:1},{name:"R2-Q4",type:"editableOptionShort",value:Bt,defaultIndex:1},{name:"R2-Q5",type:"editableOptionShort",value:Bt,defaultIndex:1},{name:"R2-Negate",type:"boolean",value:!1},{name:"R2-Counter",type:"option",value:["","1","2","3","4","5"]},{name:"R3-Q1",type:"editableOptionShort",value:Bt,defaultIndex:1},{name:"R3-Q2",type:"editableOptionShort",value:Bt,defaultIndex:1},{name:"R3-Q3",type:"editableOptionShort",value:Bt,defaultIndex:1},{name:"R3-Q4",type:"editableOptionShort",value:Bt,defaultIndex:1},{name:"R3-Q5",type:"editableOptionShort",value:Bt,defaultIndex:1},{name:"R3-Negate",type:"boolean",value:!1},{name:"R3-Counter",type:"option",value:["","1","2","3","4","5"]},{name:"全部取反",type:"boolean",value:!1},{name:"K 支架：加法",type:"label"},{name:"Add-Q1",type:"boolean",value:!1},{name:"Add-Q2",type:"boolean",value:!1},{name:"Add-Q3",type:"boolean",value:!1},{name:"Add-Q4",type:"boolean",value:!1},{name:"Add-Q5",type:"boolean",value:!1},{name:"Add-Equals",type:"editableOptionShort",value:Bt,defaultIndex:1},{name:"Add-Counter1",type:"boolean",value:!1},{name:"Add Negate All",type:"boolean",value:!1},{name:"Total Motor",type:"editableOptionShort",value:Bt,defaultIndex:1},{name:"主控制面板",type:"label"},{name:"设置总数",type:"number",value:0},{name:"快速步进",type:"option",value:["","X1","X2","X3","X4","X5","M37","M61","S1","S2","S3","S4","S5"]},{name:"慢速步进",type:"option",value:["","X1","X2","X3","X4","X5","M37","M61","S1","S2","S3","S4","S5"]},{name:"起始 Χ1",type:"number",value:1},{name:"起始 Χ2",type:"number",value:1},{name:"起始 Χ3",type:"number",value:1},{name:"起始 Χ4",type:"number",value:1},{name:"起始 Χ5",type:"number",value:1},{name:"起始 M61",type:"number",value:1},{name:"起始 M37",type:"number",value:1},{name:"起始 Ψ1",type:"number",value:1},{name:"起始 Ψ2",type:"number",value:1},{name:"起始 Ψ3",type:"number",value:1},{name:"起始 Ψ4",type:"number",value:1},{name:"起始 Ψ5",type:"number",value:1}],e}return p(t,e),s(t,[{key:"run",value:function(e,t){var r,n=kt(e=e.toUpperCase());try{for(n.s();!(r=n.n()).done;){var i=r.value;if(-1==="ABCDEFGHIJKLMNOPQRSTUVWXYZ34589+-./".indexOf(i)){var o=i;throw"\n"===o&&(o="Carriage Return")," "===o&&(o="Space"),new E("Invalid ITA2 character : "+o)}}}catch(e){n.e(e)}finally{n.f()}var a=t[1],u={Z:t[2],Chi:t[3],Psi:t[4]},s=t[5],l=[!1,!1,!1];s.includes("Χ2")&&(l[0]=!0),s.includes("Ψ1")&&(l[1]=!0),s.includes("P5")&&(l[2]=!0);var c={X2:l[0],S1:l[1],P5:l[2]},f=t[6],h=t[7];"Select Program"===f&&""!==h&&(t=this.selectProgram(h,t));for(var p=new RegExp("^$|^[.x]$"),v=0;v<3;v++)for(var m=0;m<5;m++)if(!p.test(t[7*v+(m+9)]))throw new E("Switch R"+(v+1)+"-Q"+(m+1)+" can only be set to blank, . or x");if(!p.test(t[37]))throw new E("Switch Add-Equals can only be set to blank, . or x");if(!p.test(t[40]))throw new E("Switch Total Motor can only be set to blank, . or x");var y={condition:[{Qswitches:[t[9],t[10],t[11],t[12],t[13]],Negate:t[14],Counter:t[15]},{Qswitches:[t[16],t[17],t[18],t[19],t[20]],Negate:t[21],Counter:t[22]},{Qswitches:[t[23],t[24],t[25],t[26],t[27]],Negate:t[28],Counter:t[29]}],condNegateAll:t[30],addition:[{Qswitches:[t[32],t[33],t[34],t[35],t[36]],Equals:t[37],C1:t[38]}],addNegateAll:t[39],totalMotor:t[40]},d=parseInt(t[42],10);if(d<0||d>9999)throw new E("Set Total must be between 0000 and 9999");var g={fast:t[43],slow:t[44]};if(t[52]<1||t[52]>43)throw new E("Ψ1 start must be between 1 and 43");if(t[53]<1||t[53]>47)throw new E("Ψ2 start must be between 1 and 47");if(t[54]<1||t[54]>51)throw new E("Ψ3 start must be between 1 and 51");if(t[55]<1||t[55]>53)throw new E("Ψ4 start must be between 1 and 53");if(t[56]<1||t[57]>59)throw new E("Ψ5 start must be between 1 and 59");if(t[51]<1||t[51]>37)throw new E("Μ37 start must be between 1 and 37");if(t[50]<1||t[50]>61)throw new E("Μ61 start must be between 1 and 61");if(t[45]<1||t[45]>41)throw new E("Χ1 start must be between 1 and 41");if(t[46]<1||t[46]>31)throw new E("Χ2 start must be between 1 and 31");if(t[47]<1||t[47]>29)throw new E("Χ3 start must be between 1 and 29");if(t[48]<1||t[48]>26)throw new E("Χ4 start must be between 1 and 26");if(t[49]<1||t[49]>23)throw new E("Χ5 start must be between 1 and 23");var b={X1:t[45],X2:t[46],X3:t[47],X4:t[48],X5:t[49],M61:t[50],M37:t[51],S1:t[52],S2:t[53],S3:t[54],S4:t[55],S5:t[56]};return new St(e,a,u,y,g,b,d,c).run()}},{key:"selectProgram",value:function(e,t){return"Letter Count"===e&&(t[9]="",t[10]="",t[11]="",t[12]="",t[13]="",t[14]=!1,t[15]="1",t[22]="",t[29]="",t[30]=!1,t[38]=!1),"1+2=. (1+2 Break In, Find X1,X2)"===e&&(t[15]="",t[22]="",t[29]="",t[32]=!0,t[33]=!0,t[34]=!1,t[35]=!1,t[36]=!1,t[37]=".",t[38]=!0),"4=5=/1=2 (Given X1,X2 find X4,X5)"===e&&(t[9]=".",t[10]=".",t[11]="",t[12]=".",t[13]=".",t[14]=!0,t[15]="1",t[16]="x",t[17]="x",t[18]="",t[19]="x",t[20]="x",t[21]=!0,t[22]="1",t[29]="",t[30]=!0,t[38]=!1),"/,5,U (Count chars to find X3)"===e&&(t[9]=".",t[10]=".",t[11]=".",t[12]=".",t[13]=".",t[14]=!1,t[15]="1",t[16]="x",t[17]="x",t[18]=".",t[19]="x",t[20]="x",t[21]=!1,t[22]="2",t[23]="x",t[24]="x",t[25]="x",t[26]=".",t[27]=".",t[28]=!1,t[29]="3",t[30]=!1,t[38]=!1),t}},{key:"present",value:function(e){var t="科洛萨斯打印机\n\n";t+=e.printout+"\n\n",t+="科洛萨斯计数器\n\n",t+="<table class='table table-hover table-sm table-bordered table-nonfluid'><tr><th>计数器 1</th>  <th>计数器 2</th>  <th>计数器 3</th>  <th>计数器 4</th>  <th>计数器 5</th></tr>\n",t+="<tr>";var r,n=kt(e.counters);try{for(n.s();!(r=n.n()).done;)t+=`<td>${r.value}</td>\n`}catch(e){n.e(e)}finally{n.f()}return(t+="</tr>")+"</table>"}}])}(He);function Rt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Rt=function(){return!!e})()}var Ot=function(e){function t(){var e,r,n,o;return i(this,t),r=this,n=f(n=t),(e=c(r,Rt()?Reflect.construct(n,[],f(r).constructor):n.apply(r,o))).name="Enigma",e.module="Bletchley",e.description="使用二战恩尼格玛机进行加密/解密操作。<br><br>恩尼格玛机曾被包括德军在内的多方在二战期间广泛使用，作为便携式密码机，用于保护敏感的军事、外交和商业通信。<br><br>本工具提供了标准的德军转子和反射器配置。要配置插线板，请输入一系列连接的字母对，例如 <code>AB CD EF</code> 表示 A 连接到 B，C 连接到 D，E 连接到 F。这也可用于创建自定义反射器。要创建自定义转子，请输入转子将 A 到 Z 映射到的字母顺序，可选择在后面添加 <code>&lt;</code> 和步进点列表。<br>与真实的恩尼格玛机相比，本工具在转子放置等方面具有相当大的自由度（例如，真实的四转子恩尼格玛机仅使用薄型反射器以及第四槽位的 Beta 或 Gamma 转子）。<br><br>有关恩尼格玛机、Typex 和 Bombe 操作的更详细描述，<a href='https://github.com/gchq/CyberChef/wiki/Enigma,-the-Bombe,-and-Typex'>请点击此处查看</a>。",e.infoURL="https://wikipedia.org/wiki/Enigma_machine",e.inputType="string",e.outputType="string",e.args=[{name:"型号",type:"argSelector",value:[{name:"3 转子",off:[1,2,3]},{name:"4 转子",on:[1,2,3]}]},{name:"最左侧（第 4 个）转子",type:"editableOption",value:qe,defaultIndex:0},{name:"最左侧转子环设置",type:"option",value:et},{name:"最左侧转子初始值",type:"option",value:et},{name:"左侧转子",type:"editableOption",value:ze,defaultIndex:0},{name:"左侧转子环设置",type:"option",value:et},{name:"左侧转子初始值",type:"option",value:et},{name:"中间转子",type:"editableOption",value:ze,defaultIndex:1},{name:"中间转子环设置",type:"option",value:et},{name:"中间转子初始值",type:"option",value:et},{name:"右侧转子",type:"editableOption",value:ze,defaultIndex:2},{name:"右侧转子环设置",type:"option",value:et},{name:"右侧转子初始值",type:"option",value:et},{name:"反射器",type:"editableOption",value:Ke},{name:"插线板",type:"string",value:""},{name:"严格输出",hint:"移除非字母字符并分组输出",type:"boolean",value:!0}],e}return p(t,e),s(t,[{key:"parseRotorStr",value:function(e,t){if(""===e)throw new E(`Rotor ${t} must be provided.`);return e.includes("<")?e.split("<",2):[e,""]}},{key:"run",value:function(e,t){for(var r=t[0],i=t[13],o=t[14],a=t[15],u=[],s=0;s<4;s++)if(0!==s||"3-rotor"!==r){var l=n(this.parseRotorStr(t[3*s+1],1),2),c=l[0],f=l[1];u.push(new nt(c,f,t[3*s+2],t[3*s+3]))}u.reverse();var h=new ot(i),p=new at(o);a&&(e=e.replace(/[^A-Za-z]/g,""));var v=new st(u,h,p).crypt(e);return a&&(v=v.replace(/([A-Z]{5})(?!$)/g,"$1 ")),v}},{key:"highlight",value:function(e,t){if(!1===t[13])return e}},{key:"highlightReverse",value:function(e,t){if(!1===t[13])return e}}])}(He);const Lt=Ot;function Mt(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Ut(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ut(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function Ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Pt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Pt=function(){return!!e})()}var Dt=function(e){function t(){var e,r,n,o;return i(this,t),r=this,n=f(n=t),(e=c(r,Pt()?Reflect.construct(n,[],f(r).constructor):n.apply(r,o))).name="Lorenz",e.module="Bletchley",e.description="Lorenz SZ40/42 密码机附件是二战时期德国的转子密码机，带有十二个转子，以内联方式连接在远程电传打字机之间。<br><br>它使用 Vernam 密码，带有两组五个转子（在布莱切利公园分别称为 psi(ψ) 轮和 chi(χ) 轮），以创建两个伪随机的五位比特流，以 ITA2 编码，并与明文进行异或运算。另外两个转子，称为 mu(μ) 或电机轮，可以保持 psi 轮的步进，意味着它们是间歇性步进的。<br><br>每个转子在其圆周周围具有不同数量的凸轮/突耳，可以设置为活动或非活动状态，从而改变密钥流。<br><br>模拟了三种型号的 Lorenz 密码机：SZ40、SZ42a 和 SZ42b，并包括了三种示例轮型模式（突耳设置）（KH、ZMUG 和 BREAM），可以选择使用字母 'x' 表示活动突耳，'.' 表示非活动突耳来设置自定义模式。<br><br>输入可以是发送时的明文或 ITA2，以及接收时的 ITA2。<br><br>要了解更多信息，请访问 Virtual Lorenz，这是一个在线的、基于浏览器的 Lorenz SZ40/42 模拟器：<a href='https://lorenz.virtualcolossus.co.uk' target='_blank'>lorenz.virtualcolossus.co.uk</a>。<br><br>关于此操作的更详细描述，请访问 <a href='https://github.com/gchq/CyberChef/wiki/Lorenz-SZ' target='_blank'>here</a>。",e.infoURL="https://wikipedia.org/wiki/Lorenz_cipher",e.inputType="string",e.outputType="string",e.args=[{name:"型号",type:"option",value:["SZ40","SZ42a","SZ42b"]},{name:"轮型模式",type:"argSelector",value:[{name:"KH 模式",off:[19,20,21,22,23,24,25,26,27,28,29,30]},{name:"ZMUG 模式",off:[19,20,21,22,23,24,25,26,27,28,29,30]},{name:"BREAM 模式",off:[19,20,21,22,23,24,25,26,27,28,29,30]},{name:"无模式",off:[19,20,21,22,23,24,25,26,27,28,29,30]},{name:"自定义",on:[19,20,21,22,23,24,25,26,27,28,29,30]}]},{name:"KT-Schalter",type:"boolean",value:!1},{name:"模式",type:"argSelector",value:[{name:"发送",on:[4],off:[5]},{name:"接收",off:[4],on:[5]}]},{name:"输入类型",type:"option",value:["Plaintext","ITA2"]},{name:"输出类型",type:"option",value:["Plaintext","ITA2"]},{name:"ITA2 格式",type:"option",value:["5/8/9","+/-/."]},{name:"Ψ1 起始位置 (1-43)",type:"number",value:1},{name:"Ψ2 起始位置 (1-47)",type:"number",value:1},{name:"Ψ3 起始位置 (1-51)",type:"number",value:1},{name:"Ψ4 起始位置 (1-53)",type:"number",value:1},{name:"Ψ5 起始位置 (1-59)",type:"number",value:1},{name:"Μ37 起始位置 (1-37)",type:"number",value:1},{name:"Μ61 起始位置 (1-61)",type:"number",value:1},{name:"Χ1 起始位置 (1-41)",type:"number",value:1},{name:"Χ2 起始位置 (1-31)",type:"number",value:1},{name:"Χ3 起始位置 (1-29)",type:"number",value:1},{name:"Χ4 起始位置 (1-26)",type:"number",value:1},{name:"Χ5 起始位置 (1-23)",type:"number",value:1},{name:"Ψ1 凸轮 (43)",type:"string",value:".x...xx.x.x..xxx.x.x.xxxx.x.x.x.x.x..x.xx.x"},{name:"Ψ2 凸轮 (47)",type:"string",value:".xx.x.xxx..x.x.x..x.xx.x.xxx.x....x.xx.x.x.x..x"},{name:"Ψ3 凸轮 (51)",type:"string",value:".x.x.x..xxx....x.x.xx.x.x.x..xxx.x.x..x.x.xx..x.x.x"},{name:"Ψ4 凸轮 (53)",type:"string",value:".xx...xxxxx.x.x.xx...x.xx.x.x..x.x.xx.x..x.x.x.x.x.x."},{name:"Ψ5 凸轮 (59)",type:"string",value:"xx...xx.x..x.xx.x...x.x.x.x.x.x.x.x.xx..xxxx.x.x...xx.x..x."},{name:"Μ37 凸轮 (37)",type:"string",value:"x.x.x.x.x.x...x.x.x...x.x.x...x.x...."},{name:"Μ61 凸轮 (61)",type:"string",value:".xxxx.xxxx.xxx.xxxx.xx....xxx.xxxx.xxxx.xxxx.xxxx.xxx.xxxx..."},{name:"Χ1 凸轮 (41)",type:"string",value:".x...xxx.x.xxxx.x...x.x..xxx....xx.xxxx.."},{name:"Χ2 凸轮 (31)",type:"string",value:"x..xxx...x.xxxx..xx..x..xx.xx.."},{name:"Χ3 凸轮 (29)",type:"string",value:"..xx..x.xxx...xx...xx..xx.xx."},{name:"Χ4 凸轮 (26)",type:"string",value:"xx..x..xxxx..xx.xxx....x.."},{name:"Χ5 凸轮 (23)",type:"string",value:"xx..xx....xxxx.x..x.x.."}],e}return p(t,e),s(t,[{key:"run",value:function(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],u=t[5],s=t[6],l=t[19],c=t[20],f=t[21],h=t[22],p=t[23],v=t[24],m=t[25],y=t[26],d=t[27],g=t[28],b=t[29],w=t[30],x=t[7],B=t[8],A=t[9],F=t[10],S=t[11],k=t[12],I=t[13],C=t[14],T=t[15],R=t[16],O=t[17],L=t[18];if(this.reverseTable(),x<1||x>43)throw new E("Ψ1 start must be between 1 and 43");if(B<1||B>47)throw new E("Ψ2 start must be between 1 and 47");if(A<1||A>51)throw new E("Ψ3 start must be between 1 and 51");if(F<1||F>53)throw new E("Ψ4 start must be between 1 and 53");if(S<1||S>59)throw new E("Ψ5 start must be between 1 and 59");if(k<1||k>37)throw new E("Μ37 start must be between 1 and 37");if(I<1||I>61)throw new E("Μ61 start must be between 1 and 61");if(C<1||C>41)throw new E("Χ1 start must be between 1 and 41");if(T<1||T>31)throw new E("Χ2 start must be between 1 and 31");if(R<1||R>29)throw new E("Χ3 start must be between 1 and 29");if(O<1||O>26)throw new E("Χ4 start must be between 1 and 26");if(L<1||L>23)throw new E("Χ5 start must be between 1 and 23");var M="";if("Custom"===n){var U=new RegExp("^[.xX]*$");if(43!==l.length||!U.test(l))throw new E("Ψ1 custom lugs must be 43 long and can only include . or x ");if(47!==c.length||!U.test(c))throw new E("Ψ2 custom lugs must be 47 long and can only include . or x");if(51!==f.length||!U.test(f))throw new E("Ψ3 custom lugs must be 51 long and can only include . or x");if(53!==h.length||!U.test(h))throw new E("Ψ4 custom lugs must be 53 long and can only include . or x");if(59!==p.length||!U.test(p))throw new E("Ψ5 custom lugs must be 59 long and can only include . or x");if(37!==v.length||!U.test(v))throw new E("M37 custom lugs must be 37 long and can only include . or x");if(61!==m.length||!U.test(m))throw new E("M61 custom lugs must be 61 long and can only include . or x");if(41!==y.length||!U.test(y))throw new E("Χ1 custom lugs must be 41 long and can only include . or x");if(31!==d.length||!U.test(d))throw new E("Χ2 custom lugs must be 31 long and can only include . or x");if(29!==g.length||!U.test(g))throw new E("Χ3 custom lugs must be 29 long and can only include . or x");if(26!==b.length||!U.test(b))throw new E("Χ4 custom lugs must be 26 long and can only include . or x");if(23!==w.length||!U.test(w))throw new E("Χ5 custom lugs must be 23 long and can only include . or x");(M=Gt["No Pattern"]).S[1]=this.readLugs(l),M.S[2]=this.readLugs(c),M.S[3]=this.readLugs(f),M.S[4]=this.readLugs(h),M.S[5]=this.readLugs(p),M.M[1]=this.readLugs(m),M.M[2]=this.readLugs(v),M.X[1]=this.readLugs(y),M.X[2]=this.readLugs(d),M.X[3]=this.readLugs(g),M.X[4]=this.readLugs(b),M.X[5]=this.readLugs(w)}else M=Gt[n];var P=M.X,D=M.S,N=M.M,_=this.convertToITA2(e,a,o),$=[],X=[],j=N[1][I-1],G=N[2][k-1],Z=[0,0,0],Q=this,H=Array.prototype.map.call(_,(function(e){var t=e.toUpperCase(),n=T+1;32===n&&(n=1);var a=x+1;if(44===a&&(a=1),X=[P[1][C-1],P[2][T-1],P[3][R-1],P[4][O-1],P[5][L-1]],$=[D[1][x-1],D[2][B-1],D[3][A-1],D[4][F-1],D[5][S-1]],void 0===Nt[t])return"";for(var u=[],l=0;l<=4;l++)u[l]=Nt[t][l]^$[l]^X[l];var c=u.join("");--C<1&&(C=41),--T<1&&(T=31),--R<1&&(R=29),--O<1&&(O=26),--L<1&&(L=23),--I<1&&(I=61),1===j&&--k<1&&(k=37);var f,h=G,p=0;if(Z[2]=Z[1],Z[1]=Z[0],Z[0]="Send"===o?parseInt(Nt[t][4],10):parseInt(u[4],10),"SZ42a"===r)p=parseInt(P[2][n-1],10),i&&(p=p===Z[2]?0:1),f=0===h&&1===p?0:1;else if("SZ42b"===r)p=1,parseInt(P[2][n-1],10)===parseInt(D[1][a-1],10)&&(p=0),i&&(p=p===Z[2]?0:1),f=0===h&&1===p?0:1;else{if("SZ40"!==r)throw new E("Lorenz model type not recognised");f=h}1===f&&(--x<1&&(x=43),--B<1&&(B=47),--A<1&&(A=51),--F<1&&(F=53),--S<1&&(S=59)),j=N[1][I-1],G=N[2][k-1];var v=Q.REVERSE_ITA2_TABLE[c];return"5/8/9"===s&&("+"===v&&(v="5"),"-"===v&&(v="8"),"."===v&&(v="9")),v})),V=H.join("");return this.convertFromITA2(V,u,o)}},{key:"reverseTable",value:function(){for(var e in this.REVERSE_ITA2_TABLE={},this.REVERSE_FIGSHIFT_TABLE={},Nt){var t=Nt[e];this.REVERSE_ITA2_TABLE[t]=e}for(var r in jt){var n=jt[r];this.REVERSE_FIGSHIFT_TABLE[n]=r}}},{key:"readLugs",value:function(e){return Array.prototype.map.call(e,(function(e){return"."===e?0:1}))}},{key:"convertToITA2",value:function(e,t,r){var n,i="",o=!1,a=Mt(e);try{for(a.s();!(n=a.n()).done;){var u=n.value.toUpperCase();if("ITA2"===t||"Receive"===r){if(-1===$t.indexOf(u)){var s=u;throw"\n"===s&&(s="Carriage Return")," "===s&&(s="Space"),new E("Invalid ITA2 character : "+s)}i+=u}else{if(-1===_t.indexOf(u))throw new E("Invalid Plaintext character : "+u);o||-1===Xt.indexOf(u)?o?"\n"===u?i+="34":"\r"===u?i+="4":-1===Xt.indexOf(u)?(o=!1,i+="88"+u):i+=jt[u]:i+="\n"===u?"34":"\r"===u?"4":u:(o=!0,i+="55"+jt[u])}}}catch(e){a.e(e)}finally{a.f()}return i}},{key:"convertFromITA2",value:function(e,t,r){var n,i="",o=!1,a=Mt(e);try{for(a.s();!(n=a.n()).done;){var u=n.value;"Receive"===r&&"Plaintext"===t?"5"===u||"+"===u?o=!0:"8"===u||"-"===u?o=!1:i+="9"===u?" ":"3"===u?"\n":"4"===u?"":"/"===u?"/":o?this.REVERSE_FIGSHIFT_TABLE[u]:u:i+=u}}catch(e){a.e(e)}finally{a.f()}return i}}])}(He),Nt={A:"11000",B:"10011",C:"01110",D:"10010",E:"10000",F:"10110",G:"01011",H:"00101",I:"01100",J:"11010",K:"11110",L:"01001",M:"00111",N:"00110",O:"00011",P:"01101",Q:"11101",R:"01010",S:"10100",T:"00001",U:"11100",V:"01111",W:"11001",X:"10111",Y:"10101",Z:"10001",3:"00010",4:"01000",9:"00100","/":"00000"," ":"00100",".":"00100",8:"11111",5:"11011","-":"11111","+":"11011"},_t="ABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890+-'()/:=?,. \n\r",$t="ABCDEFGHIJKLMNOPQRSTUVWXYZ34589+-./",Xt="1234567890+-'()/:=?,.",jt={1:"Q",2:"W",3:"E",4:"R",5:"T",6:"Y",7:"U",8:"I",9:"O",0:"P"," ":"9","-":"A","?":"B",":":"C","#":"D","%":"F","@":"G","£":"H","":"J","(":"K",")":"L",".":"M",",":"N","'":"S","=":"V","/":"X","+":"Z","\n":"3","\r":"4"},Gt={"No Pattern":{X:{1:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],2:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],3:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],4:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],5:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},S:{1:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],2:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],3:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],4:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],5:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},M:{1:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],2:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},"KH Pattern":{X:{1:[0,1,0,0,0,1,1,1,0,1,0,1,1,1,1,0,1,0,0,0,1,0,1,0,0,1,1,1,0,0,0,0,1,1,0,1,1,1,1,0,0],2:[1,0,0,1,1,1,0,0,0,1,0,1,1,1,1,0,0,1,1,0,0,1,0,0,1,1,0,1,1,0,0],3:[0,0,1,1,0,0,1,0,1,1,1,0,0,0,1,1,0,0,0,1,1,0,0,1,1,0,1,1,0],4:[1,1,0,0,1,0,0,1,1,1,1,0,0,1,1,0,1,1,1,0,0,0,0,1,0,0],5:[1,1,0,0,1,1,0,0,0,0,1,1,1,1,0,1,0,0,1,0,1,0,0]},S:{1:[0,1,0,0,0,1,1,0,1,0,1,0,0,1,1,1,0,1,0,1,0,1,1,1,1,0,1,0,1,0,1,0,1,0,1,0,0,1,0,1,1,0,1],2:[0,1,1,0,1,0,1,1,1,0,0,1,0,1,0,1,0,0,1,0,1,1,0,1,0,1,1,1,0,1,0,0,0,0,1,0,1,1,0,1,0,1,0,1,0,0,1],3:[0,1,0,1,0,1,0,0,1,1,1,0,0,0,0,1,0,1,0,1,1,0,1,0,1,0,1,0,0,1,1,1,0,1,0,1,0,0,1,0,1,0,1,1,0,0,1,0,1,0,1],4:[0,1,1,0,0,0,1,1,1,1,1,0,1,0,1,0,1,1,0,0,0,1,0,1,1,0,1,0,1,0,0,1,0,1,0,1,1,0,1,0,0,1,0,1,0,1,0,1,0,1,0,1,0],5:[1,1,0,0,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,1,0,0,1,1,1,1,0,1,0,1,0,0,0,1,1,0,1,0,0,1,0]},M:{1:[0,1,1,1,1,0,1,1,1,1,0,1,1,1,0,1,1,1,1,0,1,1,0,0,0,0,1,1,1,0,1,1,1,1,0,1,1,1,1,0,1,1,1,1,0,1,1,1,1,0,1,1,1,0,1,1,1,1,0,0,0],2:[1,0,1,0,1,0,1,0,1,0,1,0,0,0,1,0,1,0,1,0,0,0,1,0,1,0,1,0,0,0,1,0,1,0,0,0,0]}},"ZMUG Pattern":{X:{1:[0,1,1,0,1,1,0,0,0,1,1,0,1,1,0,0,1,0,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,1,1,1,0,0,1,1,0],2:[1,1,0,1,1,0,0,0,0,1,1,1,0,1,1,1,1,0,1,0,0,0,1,1,0,0,1,1,0,0,0],3:[0,0,1,0,0,1,1,0,0,0,1,1,0,0,0,1,1,1,0,0,0,1,1,0,1,1,1,1,0],4:[1,0,1,0,1,0,0,1,1,0,0,0,1,1,0,0,1,0,1,1,1,0,0,1,0,1],5:[0,1,0,0,1,1,1,1,0,0,0,1,0,1,1,1,0,0,0,0,1,0,1]},S:{1:[1,1,0,1,0,0,1,1,0,0,0,1,1,1,0,0,1,1,0,0,0,1,1,0,0,0,1,1,1,1,0,0,1,1,1,0,0,1,1,1,0,0,0],2:[0,0,0,1,0,0,0,1,1,1,0,0,1,1,0,0,1,1,1,0,0,0,1,1,1,1,0,0,0,1,1,0,0,1,1,1,0,0,1,1,1,0,0,1,0,1,1],3:[0,1,0,0,1,1,0,0,1,1,1,0,0,1,1,1,0,0,1,0,0,0,1,1,1,1,0,0,0,1,0,0,0,1,1,1,0,0,0,1,1,0,0,0,1,1,0,0,1,1,1],4:[0,0,1,1,1,0,0,1,1,0,0,1,1,1,0,0,1,1,1,1,0,0,0,1,0,0,0,1,1,0,0,1,1,1,0,0,1,0,0,1,1,0,0,0,1,1,0,0,1,1,1,0,1],5:[1,0,0,1,1,1,0,0,0,1,0,0,0,1,1,1,1,0,0,1,1,1,0,0,1,0,0,1,1,1,1,0,0,0,1,1,0,0,1,1,1,0,0,1,1,0,0,1,1,1,0,0,1,0,0,0,1,1,0]},M:{1:[1,0,1,1,0,1,0,1,1,1,0,1,1,1,0,1,0,1,0,1,1,1,0,1,1,0,1,1,0,1,1,0,1,1,0,1,1,1,0,1,1,1,0,1,1,1,0,1,0,1,0,1,1,1,1,0,1,0,1,0,1],2:[0,1,0,1,0,1,1,0,1,0,1,1,0,1,1,1,0,1,1,1,0,1,1,0,1,0,1,1,1,0,1,1,1,0,1,1,1]}},"BREAM Pattern":{X:{1:[0,1,1,1,1,0,1,0,1,1,0,1,0,1,1,0,0,1,0,0,1,1,0,1,0,0,0,0,1,1,0,0,0,0,1,1,1,1,0,0,0],2:[0,1,1,1,0,0,0,0,1,0,0,0,1,1,0,1,0,1,0,0,0,1,1,0,1,1,1,0,0,1,1],3:[1,1,0,0,1,1,0,1,1,0,0,1,1,1,0,0,0,0,1,0,0,1,1,0,1,1,1,0,0],4:[1,1,1,1,0,0,1,0,0,1,1,0,0,1,0,0,1,1,0,1,0,0,1,1,0,0],5:[0,1,1,1,0,1,1,1,0,0,0,1,0,0,1,1,0,1,0,0,0,1,0]},S:{1:[0,0,0,1,1,1,0,0,1,1,1,0,1,1,0,0,1,0,1,0,1,1,0,1,1,0,1,0,0,1,0,0,1,0,1,0,1,0,1,0,1,0,0],2:[1,1,0,1,0,0,1,1,1,0,0,0,0,0,1,1,1,1,0,1,0,0,1,0,1,1,0,0,1,1,0,1,0,1,0,1,0,1,0,1,0,1,1,0,1,0,0],3:[1,0,0,1,0,0,1,1,0,1,1,1,0,0,0,1,1,1,0,0,0,0,1,1,1,1,0,1,0,1,0,1,1,0,0,1,0,0,1,0,1,0,1,0,1,0,1,0,1,0,1],4:[0,1,0,0,0,0,1,0,0,1,0,1,1,1,1,1,0,1,1,0,0,1,1,0,0,1,1,0,0,0,0,1,0,1,1,0,1,0,1,0,1,0,1,0,1,0,1,1,0,0,1,0,1],5:[1,0,1,0,1,0,0,1,1,0,0,1,1,0,1,1,0,0,1,0,0,0,1,0,0,0,0,1,0,1,1,0,1,1,1,1,0,1,1,1,0,0,1,0,1,0,0,0,1,1,0,1,0,1,0,1,0,1,0]},M:{1:[1,0,0,0,0,1,1,0,0,0,1,1,0,0,1,1,0,1,1,1,1,0,0,0,0,1,1,0,0,0,1,1,0,1,1,0,1,0,1,1,1,1,0,0,0,1,1,0,0,1,1,0,0,1,1,0,1,0,1,1,1],2:[0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,1,1,1,0,1,0,1,0,0,1,0,1,0,1,0,1,0,1,1,1,0,1]}}};const Zt=Dt;function Qt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Qt=function(){return!!e})()}function Ht(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Vt(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Vt(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function Vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Yt(e,t,r){var n,i=[],o=Ht(e.slice(t,r));try{for(o.s();!(n=o.n()).done;){var a=n.value;i.push(a.value)}}catch(e){o.e(e)}finally{o.f()}return i.join("\n")}var Wt=function(e){function t(){var e,r,n,o;return i(this,t),r=this,n=f(n=t),(e=c(r,Qt()?Reflect.construct(n,[],f(r).constructor):n.apply(r,o))).name="多次 Bombe",e.module="Bletchley",e.description="模拟用于攻击 Enigma 密码机的 Bombe 机器。此版本执行多次 Bombe 运算以处理未知的转子配置。<br><br>在在此处运行之前，您应该在单个 Bombe 操作上测试您的菜单。有关选择 crib 的说明，请参阅 Bombe 操作的描述。<br><br>有关 Enigma、Typex 和 Bombe 操作的更详细描述，请<a href='https://github.com/gchq/CyberChef/wiki/Enigma,-the-Bombe,-and-Typex'>点击此处查看</a>。",e.infoURL="https://wikipedia.org/wiki/Bombe",e.inputType="string",e.outputType="JSON",e.presentType="html",e.args=[{name:"标准 Enigma 密码机",type:"populateMultiOption",value:[{name:"德军制式 Enigma 密码机 (第一版 - 3 转子)",value:[Yt(ze,0,5),"",Yt(Ke,0,1)]},{name:"德军制式 Enigma 密码机 (第二版 - 3 转子)",value:[Yt(ze,0,8),"",Yt(Ke,0,2)]},{name:"德军制式 Enigma 密码机 (第三版 - 4 转子)",value:[Yt(ze,0,8),Yt(qe,1,2),Yt(Ke,2,3)]},{name:"德军制式 Enigma 密码机 (第四版 - 4 转子)",value:[Yt(ze,0,8),Yt(qe,1,3),Yt(Ke,2,4)]},{name:"用户自定义",value:["","",""]}],target:[1,2,3]},{name:"主转子",type:"text",value:""},{name:"第四转子",type:"text",value:""},{name:"反射器",type:"text",value:""},{name:"字谜短句 (Crib)",type:"string",value:""},{name:"字谜短句偏移量 (Crib 偏移量)",type:"number",value:0},{name:"使用校验机",type:"boolean",value:!0}],e}return p(t,e),s(t,[{key:"updateStatus",value:function(e,t,r,n){var i=(Date.now()-n)/r*(1-r)/1e3,o=Math.floor(i/3600),a=`0${Math.floor(i%3600/60)}`.slice(-2),u=`0${Math.floor(i%60)}`.slice(-2),s=`Bombe run with ${e} loop${1===e?"":"s"} in menu (2+ desirable): ${t} stops, ${Math.floor(100*r)}% done, ${o}:${a}:${u} remaining`;self.sendStatusMessage(s)}},{key:"validateRotor",value:function(e){if(e.includes("<")&&(e=e.split("<",2)[0]),!/^[A-Z]{26}$/.test(e))throw new E("Rotor wiring must be 26 unique uppercase letters");if(26!==new Set(e).size)throw new E("Rotor wiring must be 26 unique uppercase letters");return e}},{key:"run",value:function(e,t){var r,n=t[1],i=t[2],o=t[3],a=t[4],u=t[5],s=t[6],l=[],c=[],f=[],h=Ht(n.split("\n"));try{for(h.s();!(r=h.n()).done;){var p=r.value;p=this.validateRotor(p),l.push(p)}}catch(e){h.e(e)}finally{h.f()}if(l.length<3)throw new E("A minimum of three rotors must be supplied");if(""!==i){var v,m=Ht(i.split("\n"));try{for(m.s();!(v=m.n()).done;){var y=v.value;y=this.validateRotor(y),c.push(y)}}catch(e){m.e(e)}finally{m.f()}}0===c.length&&c.push("");var d,g=Ht(o.split("\n"));try{for(g.s();!(d=g.n()).done;){var b=d.value,w=new ot(b);f.push(w)}}catch(e){g.e(e)}finally{g.f()}if(0===f.length)throw new E("A minimum of one reflector must be supplied");if(0===a.length)throw new E("Crib cannot be empty");if(u<0)throw new E("Offset cannot be negative");e=e.replace(/[^A-Za-z]/g,"").toUpperCase(),a=a.replace(/[^A-Za-z]/g,"").toUpperCase();var x,B=e.slice(u);x=U()?this.updateStatus:void 0;for(var A=void 0,F={bombeRuns:[]},S=6*function(e){for(var t=1,r=1;r<=3;r++)t*=(e+1-r)/r;return t}(l.length)*c.length*f.length,k=0,I=0,C=Date.now(),T=0,R=l;T<R.length;T++){var O,L=R[T],M=Ht(l);try{for(M.s();!(O=M.n()).done;){var P=O.value;if(P!==L){var D,N=Ht(l);try{for(N.s();!(D=N.n()).done;){var _=D.value;if(_!==P&&_!==L){var $,X=Ht(c);try{for(X.s();!($=X.n()).done;){var j,G=$.value,Z=Ht(f);try{for(Z.s();!(j=Z.n()).done;){var Q=j.value;k++;var H=[L,P,_];""!==G&&H.push(G),void 0===A?(A=new dt(H,Q,B,a,s),F.nLoops=A.nLoops):A.changeRotors(H,Q);var V=A.run();I+=V.length,void 0!==x&&x(A.nLoops,I,k/S,C),V.length>0&&F.bombeRuns.push({rotors:H,reflector:Q.pairs,result:V})}}catch(e){Z.e(e)}finally{Z.f()}}}catch(e){X.e(e)}finally{X.f()}}}}catch(e){N.e(e)}finally{N.f()}}}}catch(e){M.e(e)}finally{M.f()}}return F}},{key:"present",value:function(e){var t,r=`Bombe 运行菜单包含 ${e.nLoops} 循环${1===e.nLoops?"":"s"} (建议值 2 或更多)。注意：转子和转子位置从左到右列出，忽略步进和环设置，位置从字谜短句的开头算起。已确定部分插线板设置。还提供了从字谜短句开头开始且忽略步进的解密预览。\n`,i=Ht(e.bombeRuns);try{for(i.s();!(t=i.n()).done;){var o=t.value;r+=`\n转子：${o.rotors.slice().reverse().join(", ")}\n反射器：${o.reflector}\n`,r+="<table class='table table-hover table-sm table-bordered table-nonfluid'><tr><th>转子停位</th>  <th>部分插线板</th>  <th>解密预览</th></tr>\n";var a,u=Ht(o.result);try{for(u.s();!(a=u.n()).done;){var s=n(a.value,3);r+=`<tr><td>${s[0]}</td>  <td>${s[1]}</td>  <td>${s[2]}</td></tr>\n`}}catch(e){u.e(e)}finally{u.f()}r+="</table>\n"}}catch(e){i.e(e)}finally{i.f()}return r}}])}(He);const Jt=Wt;function zt(e,t,r){return t=f(t),c(e,qt()?Reflect.construct(t,r||[],f(e).constructor):t.apply(e,r))}function qt(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(qt=function(){return!!e})()}function Kt(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return er(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?er(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function er(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var tr=[{name:"Example 1",value:"SRGWANHPJZFXVIDQCEUKBYOLMT"},{name:"Example 2",value:"THQEFSAZVKJYULBODCPXNIMWRG"},{name:"Example 3",value:"XDTUYLEVFNQZBPOGIRCSMHWKAJ"},{name:"Example 4",value:"LOHDMCWUPSTNGVXYFJREQIKBZA"},{name:"Example 5",value:"ERXWNZQIJYLVOFUMSGHTCKPBDA"},{name:"Example 6",value:"FQECYHJIOUMDZVPSLKRTGWXBAN"},{name:"Example 7",value:"TBYIUMKZDJSOPEWXVANHLCFQGR"},{name:"Example 8",value:"QZUPDTFNYIAOMLEBWJXCGHKRSV"},{name:"Example 9",value:"CZWNHEMPOVXLKRSIDGJFYBTQAU"},{name:"Example 10",value:"ENPXJVKYQBFZTICAGMOHWRLDUS"}],rr=[{name:"Example 1",value:"6201348957"},{name:"Example 2",value:"6147253089"},{name:"Example 3",value:"8239647510"},{name:"Example 4",value:"7194835260"},{name:"Example 5",value:"4873205916"}],nr="0123456789".split("");function ir(e){var t=e.charCodeAt();return 97<=t&&t<=122?String.fromCharCode(t-32):e}var or=function(){return s((function e(t,r,n){i(this,e),this.cipherBank=new ar(t),this.controlBank=new ur(r),this.indexBank=new sr(n)}),[{key:"step",value:function(){var e=this.controlBank.goThroughControl(),t=this.indexBank.goThroughIndex(e);this.cipherBank.step(t)}},{key:"encryptLetter",value:function(e){" "===(e=ir(e))?e="Z":"Z"===e&&(e="X");var t=this.cipherBank.encrypt(e);return this.step(),t}},{key:"decryptLetter",value:function(e){e=ir(e);var t=this.cipherBank.decrypt(e);return"Z"===t&&(t=" "),this.step(),t}},{key:"encrypt",value:function(e){var t,r="",n=Kt(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;r=r.concat(this.encryptLetter(i))}}catch(e){n.e(e)}finally{n.f()}return r}},{key:"decrypt",value:function(e){var t,r="",n=Kt(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;r=r.concat(this.decryptLetter(i))}}catch(e){n.e(e)}finally{n.f()}return r}}])}(),ar=function(){return s((function e(t){i(this,e),this.rotors=t}),[{key:"encrypt",value:function(e){var t,r=Kt(this.rotors);try{for(r.s();!(t=r.n()).done;)e=t.value.crypt(e,"leftToRight")}catch(e){r.e(e)}finally{r.f()}return e}},{key:"decrypt",value:function(e){var t,r=Kt(g(this.rotors).reverse());try{for(r.s();!(t=r.n()).done;)e=t.value.crypt(e,"rightToLeft")}catch(e){r.e(e)}finally{r.f()}return e}},{key:"step",value:function(e){var t={0:[0,9],1:[7,8],2:[5,6],3:[3,4],4:[1,2]},r=[];for(var n in t){var i,o=t[n],a=Kt(e);try{for(a.s();!(i=a.n()).done;){var u=i.value;if(o.includes(u)){r.push(this.rotors[n]);break}}}catch(e){a.e(e)}finally{a.f()}}for(var s=0,l=r;s<l.length;s++)l[s].step()}}])}(),ur=function(){return s((function e(t){i(this,e),this.rotors=g(t).reverse()}),[{key:"crypt",value:function(e){var t,r=Kt(this.rotors);try{for(r.s();!(t=r.n()).done;)e=t.value.crypt(e,"rightToLeft")}catch(e){r.e(e)}finally{r.f()}return e}},{key:"getOutputs",value:function(){var e=[this.crypt("F"),this.crypt("G"),this.crypt("H"),this.crypt("I")],t={1:"B",2:"C",3:"DE",4:"FGH",5:"IJK",6:"LMNO",7:"PQRST",8:"UVWXYZ",9:"A"},r=[];for(var n in t){var i,o=t[n],a=Kt(e);try{for(a.s();!(i=a.n()).done;){var u=i.value;if(o.includes(u)){r.push(n);break}}}catch(e){a.e(e)}finally{a.f()}}return r}},{key:"step",value:function(){var e=this.rotors[1],t=this.rotors[2],r=this.rotors[3];14===t.state&&(14===e.state&&r.step(),e.step()),t.step()}},{key:"goThroughControl",value:function(){var e=this.getOutputs();return this.step(),e}}])}(),sr=function(){return s((function e(t){i(this,e),this.rotors=t}),[{key:"crypt",value:function(e){var t,r=Kt(this.rotors);try{for(r.s();!(t=r.n()).done;)e=t.value.crypt(e)}catch(e){r.e(e)}finally{r.f()}return e}},{key:"goThroughIndex",value:function(e){var t,r=[],n=Kt(e);try{for(n.s();!(t=n.n()).done;){var i=t.value;r.push(this.crypt(i))}}catch(e){n.e(e)}finally{n.f()}return r}}])}(),lr=function(){return s((function e(t,r,n){i(this,e),this.state=r,this.numMapping=this.getNumMapping(t,n),this.posMapping=this.getPosMapping(n)}),[{key:"getNumMapping",value:function(e,t){if(!1===t)return e;for(var r=e.length,n=new Array(r),i=0;i<r;i++)n[e[i]]=i;return n}},{key:"getPosMapping",value:function(e){var t=this.numMapping.length,r=[];if(!1===e)for(var n=this.state;n<this.state+t;n++){var i=n%t;i<0&&(i+=t),r.push(i)}else for(var o=this.state;o>this.state-t;o--){var a=o%t;a<0&&(a+=t),r.push(a)}return r}},{key:"cryptNum",value:function(e,t){var r,n=this.posMapping[e];return"leftToRight"===t?r=this.numMapping[n]:"rightToLeft"===t&&(r=this.numMapping.indexOf(n)),this.posMapping.indexOf(r)}},{key:"step",value:function(){var e=this.posMapping.pop();this.posMapping.splice(0,0,e),this.state=this.posMapping[0]}}])}(),cr=function(e){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return i(this,t),zt(this,t,[e=e.split("").map(t.letterToNum),t.letterToNum(r),n])}return p(t,e),s(t,[{key:"crypt",value:function(e,r){e=t.letterToNum(e);var n=this.cryptNum(e,r);return t.numToLetter(n)}}],[{key:"letterToNum",value:function(e){return e.charCodeAt()-65}},{key:"numToLetter",value:function(e){return String.fromCharCode(e+65)}}])}(lr),fr=function(e){function t(e,r){return i(this,t),zt(this,t,[e=e.split("").map(Number),Number(r),!1])}return p(t,e),s(t,[{key:"crypt",value:function(e){return this.cryptNum(e,"leftToRight")}}])}(lr);function hr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(hr=function(){return!!e})()}var pr=function(e){function t(){var e,r,n,o;return i(this,t),r=this,n=f(n=t),(e=c(r,hr()?Reflect.construct(n,[],f(r).constructor):n.apply(r,o))).name="SIGABA",e.module="Bletchley",e.description="使用二战时期 SIGABA 密码机进行加密/解密。<br><br>SIGABA，也称为 ECM Mark II，在二战期间至 20 世纪 50 年代被美国用于消息加密。它在 20 世纪 30 年代由美国陆军和海军开发，至今仍未被破解。SIGABA 由 15 个转子组成：5 个密码转子和 10 个转子（5 个控制转子和 5 个索引转子），用于控制密码转子的步进。SIGABA 的转子步进比当时的其他转子机器（如 Enigma）复杂得多。所有示例转子绕线均为随机示例集。<br><br>要配置转子绕线，对于密码转子和控制转子，请输入一个字母字符串，该字符串从 A 映射到 Z；对于索引转子，请输入一个数字序列，该序列从 0 映射到 9。请注意，加密与解密不同，因此请先选择所需的模式。<br><br>注意：虽然此工具已针对其他软件模拟器进行了测试，但尚未针对硬件进行测试。",e.infoURL="https://wikipedia.org/wiki/SIGABA",e.inputType="string",e.outputType="string",e.args=[{name:"第 1 个（左侧）密码转子",type:"editableOption",value:tr,defaultIndex:0},{name:"第 1 个密码转子反向",type:"boolean",value:!1},{name:"第 1 个密码转子初始值",type:"option",value:et},{name:"第 2 个密码转子",type:"editableOption",value:tr,defaultIndex:0},{name:"第 2 个密码转子反向",type:"boolean",value:!1},{name:"第 2 个密码转子初始值",type:"option",value:et},{name:"第 3 个（中间）密码转子",type:"editableOption",value:tr,defaultIndex:0},{name:"第 3 个密码转子反向",type:"boolean",value:!1},{name:"第 3 个密码转子初始值",type:"option",value:et},{name:"第 4 个密码转子",type:"editableOption",value:tr,defaultIndex:0},{name:"第 4 个密码转子反向",type:"boolean",value:!1},{name:"第 4 个密码转子初始值",type:"option",value:et},{name:"第 5 个（右侧）密码转子",type:"editableOption",value:tr,defaultIndex:0},{name:"第 5 个密码转子反向",type:"boolean",value:!1},{name:"第 5 个密码转子初始值",type:"option",value:et},{name:"第 1 个（左侧）控制转子",type:"editableOption",value:tr,defaultIndex:0},{name:"第 1 个控制转子反向",type:"boolean",value:!1},{name:"第 1 个控制转子初始值",type:"option",value:et},{name:"第 2 个控制转子",type:"editableOption",value:tr,defaultIndex:0},{name:"第 2 个控制转子反向",type:"boolean",value:!1},{name:"第 2 个控制转子初始值",type:"option",value:et},{name:"第 3 个（中间）控制转子",type:"editableOption",value:tr,defaultIndex:0},{name:"第 3 个控制转子反向",type:"boolean",value:!1},{name:"第 3 个控制转子初始值",type:"option",value:et},{name:"第 4 个控制转子",type:"editableOption",value:tr,defaultIndex:0},{name:"第 4 个控制转子反向",type:"boolean",value:!1},{name:"第 4 个控制转子初始值",type:"option",value:et},{name:"第 5 个（右侧）控制转子",type:"editableOption",value:tr,defaultIndex:0},{name:"第 5 个控制转子反向",type:"boolean",value:!1},{name:"第 5 个控制转子初始值",type:"option",value:et},{name:"第 1 个（左侧）索引转子",type:"editableOption",value:rr,defaultIndex:0},{name:"第 1 个索引转子初始值",type:"option",value:nr},{name:"第 2 个索引转子",type:"editableOption",value:rr,defaultIndex:0},{name:"第 2 个索引转子初始值",type:"option",value:nr},{name:"第 3 个（中间）索引转子",type:"editableOption",value:rr,defaultIndex:0},{name:"第 3 个索引转子初始值",type:"option",value:nr},{name:"第 4 个索引转子",type:"editableOption",value:rr,defaultIndex:0},{name:"第 4 个索引转子初始值",type:"option",value:nr},{name:"第 5 个（右侧）索引转子",type:"editableOption",value:rr,defaultIndex:0},{name:"第 5 个索引转子初始值",type:"option",value:nr},{name:"SIGABA 模式",type:"option",value:["加密","解密"]}],e}return p(t,e),s(t,[{key:"run",value:function(e,t){for(var r=t[40],n=[],i=[],o=[],a=0;a<5;a++){var u=t[3*a];n.push(new cr(u,t[3*a+2],t[3*a+1]))}for(var s=5;s<10;s++){var l=t[3*s];i.push(new cr(l,t[3*s+2],t[3*s+1]))}for(var c=15;c<20;c++){var f=t[2*c];o.push(new fr(f,t[2*c+1]))}var h,p=new or(n,i,o);return"加密"===r?h=p.encrypt(e):"解密"===r&&(h=p.decrypt(e)),h}}])}(He);const vr=pr;function mr(){return mr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!{}.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(n){var i=Object.getOwnPropertyDescriptor(n,t);return i.get?i.get.call(arguments.length<3?e:r):i.value}},mr.apply(null,arguments)}function yr(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return dr(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?dr(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw o}}}}function dr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function gr(e,t,r){return t=f(t),c(e,br()?Reflect.construct(t,r||[],f(e).constructor):t.apply(e,r))}function br(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(br=function(){return!!e})()}for(var wr=[{name:"Example 1",value:"MCYLPQUVRXGSAOWNBJEZDTFKHI<BFHNQUW"},{name:"Example 2",value:"KHWENRCBISXJQGOFMAPVYZDLTU<BFHNQUW"},{name:"Example 3",value:"BYPDZMGIKQCUSATREHOJNLFWXV<BFHNQUW"},{name:"Example 4",value:"ZANJCGDLVHIXOBRPMSWQUKFYET<BFHNQUW"},{name:"Example 5",value:"QXBGUTOVFCZPJIHSWERYNDAMLK<BFHNQUW"},{name:"Example 6",value:"BDCNWUEIQVFTSXALOGZJYMHKPR<BFHNQUW"},{name:"Example 7",value:"WJUKEIABMSGFTQZVCNPHORDXYL<BFHNQUW"},{name:"Example 8",value:"TNVCZXDIPFWQKHSJMAOYLEURGB<BFHNQUW"}],xr=[{name:"Example",value:"AN BC FG IE KD LU MH OR TS VZ WQ XJ YP"}],Br={Q:"1",W:"2",E:"3",R:"4",T:"5",Y:"6",U:"7",I:"8",O:"9",P:"0",A:"-",S:"/",D:"Z",F:"%",G:"X",H:"£",K:"(",L:")",C:"V",B:"'",N:",",M:"."},Ar={},Er=0,Fr=Object.keys(Br);Er<Fr.length;Er++){var Sr=Fr[Er];Ar[Br[Sr]]=Sr}var kr=function(e){function t(e,r,n,o){var a;if(i(this,t),a=gr(this,t,[e,r,n]),5!==e.length)throw new E("Typex must have 5 rotors");return a.keyboard=o,a}return p(t,e),s(t,[{key:"step",value:function(){var e=this.rotors[2],t=this.rotors[3];e.step(),(e.steps.has(e.pos)||t.steps.has(P.mod(t.pos+1,26)))&&(t.step(),t.steps.has(t.pos)&&this.rotors[4].step())}},{key:"crypt",value:function(e){var r=e;if("Encrypt"===this.keyboard){r="";var n,i=!1,o=yr(e);try{for(o.s();!(n=o.n()).done;){var a=n.value;" "===a?r+="X":i?Object.prototype.hasOwnProperty.call(Ar,a)?r+=Ar[a]:(i=!1,r+="V"+a):Object.prototype.hasOwnProperty.call(Ar,a)?(i=!0,r+="Z"+Ar[a]):r+=a}}catch(e){o.e(e)}finally{o.f()}}var u,s,l,c=(u=t,s=this,"function"==typeof(l=mr(f(1&3?u.prototype:u),"crypt",s))?function(e){return l.apply(s,e)}:l)([r]),h=c;if("Decrypt"===this.keyboard){h="";var p,v=!1,m=yr(c);try{for(m.s();!(p=m.n()).done;){var y=p.value;"X"===y?h+=" ":"V"===y?v=!1:"Z"===y?v=!0:h+=v?Br[y]:y}}catch(e){m.e(e)}finally{m.f()}}return h}}])}(ut),Ir=function(e){function t(e,r,n,o,a){i(this,t);var u=e;if(n){for(var s=new Array(26),l=0;l<26;l++){var c=P.mod(26-tt(e[l]),26),f=rt(P.mod(26-tt(et[l]),26));s[c]=f}u=s.join("")}return gr(this,t,[u,r,o,a])}return p(t,e),s(t)}(nt),Cr=function(e){function t(e){var r;if(i(this,t),!/^[A-Z]{26}$/.test(e))throw new E("Plugboard wiring must be 26 unique uppercase letters");e=e.replace(/./g,(function(e){return"AZYXWVUTSRQPONMLKJIHGFEDCB"[tt(e)]}));try{r=gr(this,t,[e,"","A","A"])}catch(e){throw new E(e.message.replace("Rotor","Plugboard"))}return l(r)}return p(t,e),s(t,[{key:"transform",value:function(e){return P.mod(this.map[P.mod(e+this.pos,26)]-this.pos,26)}},{key:"revTransform",value:function(e){return P.mod(this.revMap[P.mod(e+this.pos,26)]-this.pos,26)}}])}(nt);function Tr(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Tr=function(){return!!e})()}var Rr=function(e){function t(){var e,r,n,o;return i(this,t),r=this,n=f(n=t),(e=c(r,Tr()?Reflect.construct(n,[],f(r).constructor):n.apply(r,o))).name="Typex",e.module="Bletchley",e.description="使用二战 Typex 机器进行加密/解密。<br><br>Typex 最初由英国皇家空军在二战前建造，基于恩尼格玛密码机，但进行了一些改进，包括使用五个转子、更多步进点和可互换的接线核心。它在英国和英联邦军队中广泛使用。后来出现了一些变体；这里我们模拟二战时期的 Mark 22 Typex，带有用于反射器和输入的插线板。Typex 转子定期更换，且没有公开的；这里提供了一个随机示例集。<br><br>要配置反射器插线板，请在反射器框中输入连接字母对的字符串，例如 `AB CD EF` 将 A 连接到 B，C 连接到 D，E 连接到 F（你需要连接每个字母）。还有一个输入插线板：与恩尼格玛密码机的插线板不同，它不限于成对连接，因此像转子一样输入（无需步进）。要创建你自己的转子，请输入转子将 A 到 Z 映射到的字母，按顺序排列，可以选择后跟 `&lt;` 然后是步进点列表。<br><br>关于恩尼格玛密码机、Typex 和 Bombe 操作的更详细描述<a href='https://github.com/gchq/CyberChef/wiki/Enigma,-the-Bombe,-and-Typex'>可以在这里找到</a>。",e.infoURL="https://wikipedia.org/wiki/Typex",e.inputType="string",e.outputType="string",e.args=[{name:"第 1 个（左侧）转子",type:"editableOption",value:wr,defaultIndex:0},{name:"第 1 个转子反向",type:"boolean",value:!1},{name:"第 1 个转子环设置",type:"option",value:et},{name:"第 1 个转子初始值",type:"option",value:et},{name:"第 2 个转子",type:"editableOption",value:wr,defaultIndex:1},{name:"第 2 个转子反向",type:"boolean",value:!1},{name:"第 2 个转子环设置",type:"option",value:et},{name:"第 2 个转子初始值",type:"option",value:et},{name:"第 3 个（中间）转子",type:"editableOption",value:wr,defaultIndex:2},{name:"第 3 个转子反向",type:"boolean",value:!1},{name:"第 3 个转子环设置",type:"option",value:et},{name:"第 3 个转子初始值",type:"option",value:et},{name:"第 4 个（静态）转子",type:"editableOption",value:wr,defaultIndex:3},{name:"第 4 个转子反向",type:"boolean",value:!1},{name:"第 4 个转子环设置",type:"option",value:et},{name:"第 4 个转子初始值",type:"option",value:et},{name:"第 5 个（右侧，静态）转子",type:"editableOption",value:wr,defaultIndex:4},{name:"第 5 个转子反向",type:"boolean",value:!1},{name:"第 5 个转子环设置",type:"option",value:et},{name:"第 5 个转子初始值",type:"option",value:et},{name:"反射器",type:"editableOption",value:xr},{name:"插线板",type:"string",value:""},{name:"Typex 键盘模拟",type:"option",value:["None","Encrypt","Decrypt"]},{name:"严格输出",hint:"移除非字母字符并分组输出",type:"boolean",value:!0}],e}return p(t,e),s(t,[{key:"parseRotorStr",value:function(e,t){if(""===e)throw new E(`Rotor ${t} must be provided.`);return e.includes("<")?e.split("<",2):[e,""]}},{key:"run",value:function(e,t){for(var r=t[20],i=t[21],o=t[22],a=t[23],u=[],s=0;s<5;s++){var l=n(this.parseRotorStr(t[4*s]),2),c=l[0],f=l[1];u.push(new Ir(c,f,t[4*s+1],t[4*s+2],t[4*s+3]))}u.reverse();var h=new ot(r),p=i;""===p&&(p="ABCDEFGHIJKLMNOPQRSTUVWXYZ");var v=new Cr(p);a&&(e="Encrypt"===o?e.replace(/[^A-Za-z0-9 /%£()',.-]/g,""):e.replace(/[^A-Za-z]/g,""));var m=new kr(u,h,v,o).crypt(e);return a&&"Decrypt"!==o&&(m=m.replace(/([A-Z]{5})(?!$)/g,"$1 ")),m}},{key:"highlight",value:function(e,t){if(!1===t[18])return e}},{key:"highlightReverse",value:function(e,t){if(!1===t[18])return e}}])}(He);const Or=Rr;("undefined"==typeof self?{}:self.OpModules||{}).Bletchley={Bombe:xt,Colossus:Tt,Enigma:Lt,Lorenz:Zt,"多次 Bombe":Jt,SIGABA:vr,Typex:Or}})()})();